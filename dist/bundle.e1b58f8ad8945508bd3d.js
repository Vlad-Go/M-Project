/*! For license information please see bundle.e1b58f8ad8945508bd3d.js.LICENSE.txt */
!function(){var e={8391:function(e,t,n){"use strict";n(3048),n(9247),n(8128),n(241),n(4918),n(9839),n(8878),n(3090),n(4184),n(1587),n(338),n(49),n(1497),n(6248)},3048:function(e,t,n){n(9823),n(9701),n(5843),n(8344),n(541),n(8904),n(4978),n(9770),n(8338),n(7941),n(3668),n(7070),n(9163),n(3310),n(9773),n(9020),n(4210),n(6139),n(8629),n(9745),n(5694),n(6130),n(5821),n(6349),n(8110),n(3689),n(2211),n(3730),n(6729),n(7374),n(2095),n(6362),n(6329),n(7463),n(5874),n(5886),n(91),n(6799),n(1570),n(6006),n(8377),n(108),n(905),n(8103),n(5937),n(9979),n(3601),n(4226),n(9750),n(1462),n(4773),n(2421),n(2763),n(1711),n(183),n(7472),n(516),n(427),n(3777),n(7238),n(5942),n(513),n(4186),n(5502),n(6213),n(9457),n(9876),n(9772),n(7174),n(5251),n(7984),n(3359),n(195),n(8586),n(817),n(5337),n(5079),n(5105),n(4163),n(5867),n(9606),n(9174),n(8466),n(7209),n(1796),n(7772),n(286),n(4434),n(3231),n(46),n(9399),n(8312),n(5155),n(3133),n(1601),n(453),n(1954),n(8703),n(652),n(7680),n(5506),n(5846),n(4321),n(751),n(4828),n(4208),n(2679),n(9236),n(2235),n(1239),n(8392),n(773),n(3623),n(345),n(8460),n(6788),n(6780),n(3620),n(3958),n(1592),n(5469),n(6471),n(3149),n(4637),n(1335),n(2603),n(4460),n(5970),n(4288),n(2039),n(4613),n(122),n(9484),n(1014),n(7150),n(8982),n(8868),n(8633),e.exports=n(66)},8128:function(e,t,n){n(7328),e.exports=n(66).Array.flatMap},9247:function(e,t,n){n(8081),e.exports=n(66).Array.includes},338:function(e,t,n){n(9716),e.exports=n(66).Object.entries},4184:function(e,t,n){n(7453),e.exports=n(66).Object.getOwnPropertyDescriptors},1587:function(e,t,n){n(27),e.exports=n(66).Object.values},49:function(e,t,n){"use strict";n(2235),n(6632),e.exports=n(66).Promise.finally},4918:function(e,t,n){n(8302),e.exports=n(66).String.padEnd},241:function(e,t,n){n(9447),e.exports=n(66).String.padStart},8878:function(e,t,n){n(152),e.exports=n(66).String.trimRight},9839:function(e,t,n){n(9324),e.exports=n(66).String.trimLeft},3090:function(e,t,n){n(3756),e.exports=n(9669).f("asyncIterator")},1829:function(e,t,n){n(1739),e.exports=n(7208).global},6610:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},498:function(e,t,n){var i=n(9632);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},7208:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},1725:function(e,t,n){var i=n(6610);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},5179:function(e,t,n){e.exports=!n(472)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},8765:function(e,t,n){var i=n(9632),r=n(3280).document,s=i(r)&&i(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},8310:function(e,t,n){var i=n(3280),r=n(7208),s=n(1725),o=n(2292),a=n(657),l=function(e,t,n){var c,u,h,d=e&l.F,p=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,y=e&l.W,v=p?r:r[t]||(r[t]={}),_=v.prototype,b=p?i:f?i[t]:(i[t]||{}).prototype;for(c in p&&(n=t),n)(u=!d&&b&&void 0!==b[c])&&a(v,c)||(h=u?b[c]:n[c],v[c]=p&&"function"!=typeof b[c]?n[c]:g&&u?s(h,i):y&&b[c]==h?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(h):m&&"function"==typeof h?s(Function.call,h):h,m&&((v.virtual||(v.virtual={}))[c]=h,e&l.R&&_&&!_[c]&&o(_,c,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},472:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},3280:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},657:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},2292:function(e,t,n){var i=n(510),r=n(8439);e.exports=n(5179)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},4457:function(e,t,n){e.exports=!n(5179)&&!n(472)((function(){return 7!=Object.defineProperty(n(8765)("div"),"a",{get:function(){return 7}}).a}))},9632:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},510:function(e,t,n){var i=n(498),r=n(4457),s=n(2737),o=Object.defineProperty;t.f=n(5179)?Object.defineProperty:function(e,t,n){if(i(e),t=s(t,!0),i(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},8439:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2737:function(e,t,n){var i=n(9632);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},1739:function(e,t,n){var i=n(8310);i(i.G,{global:n(3280)})},2761:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},1525:function(e,t,n){var i=n(6688);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},2094:function(e,t,n){var i=n(2190)("unscopables"),r=Array.prototype;null==r[i]&&n(4216)(r,i,{}),e.exports=function(e){r[i][e]=!0}},8492:function(e,t,n){"use strict";var i=n(2070)(!0);e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},5824:function(e){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},6365:function(e,t,n){var i=n(7334);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},6257:function(e,t,n){"use strict";var i=n(6033),r=n(8615),s=n(6078);e.exports=[].copyWithin||function(e,t){var n=i(this),o=s(n.length),a=r(e,o),l=r(t,o),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?o:r(c,o))-l,o-a),h=1;for(l<a&&a<l+u&&(h=-1,l+=u-1,a+=u-1);u-- >0;)l in n?n[a]=n[l]:delete n[a],a+=h,l+=h;return n}},3195:function(e,t,n){"use strict";var i=n(6033),r=n(8615),s=n(6078);e.exports=function(e){for(var t=i(this),n=s(t.length),o=arguments.length,a=r(o>1?arguments[1]:void 0,n),l=o>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);c>a;)t[a++]=e;return t}},9021:function(e,t,n){var i=n(5703),r=n(6078),s=n(8615);e.exports=function(e){return function(t,n,o){var a,l=i(t),c=r(l.length),u=s(o,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},8309:function(e,t,n){var i=n(1528),r=n(8467),s=n(6033),o=n(6078),a=n(3531);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,h=6==e,d=5==e||h,p=t||a;return function(t,a,f){for(var m,g,y=s(t),v=r(y),_=i(a,f,3),b=o(v.length),w=0,T=n?p(t,b):l?p(t,0):void 0;b>w;w++)if((d||w in v)&&(g=_(m=v[w],w,y),e))if(n)T[w]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:T.push(m)}else if(u)return!1;return h?-1:c||u?u:T}}},9291:function(e,t,n){var i=n(2761),r=n(6033),s=n(8467),o=n(6078);e.exports=function(e,t,n,a,l){i(t);var c=r(e),u=s(c),h=o(c.length),d=l?h-1:0,p=l?-1:1;if(n<2)for(;;){if(d in u){a=u[d],d+=p;break}if(d+=p,l?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:h>d;d+=p)d in u&&(a=t(a,u[d],d,c));return a}},1071:function(e,t,n){var i=n(7334),r=n(9141),s=n(2190)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[s])&&(t=void 0)),void 0===t?Array:t}},3531:function(e,t,n){var i=n(1071);e.exports=function(e,t){return new(i(e))(t)}},9337:function(e,t,n){"use strict";var i=n(2761),r=n(7334),s=n(7757),o=[].slice,a={},l=function(e,t,n){if(!(t in a)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";a[t]=Function("F,a","return new F("+i.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=o.call(arguments,1),a=function(){var i=n.concat(o.call(arguments));return this instanceof a?l(t,i.length,i):s(t,i,e)};return r(t.prototype)&&(a.prototype=t.prototype),a}},106:function(e,t,n){var i=n(6688),r=n(2190)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:s?i(t):"Object"==(o=i(t))&&"function"==typeof t.callee?"Arguments":o}},6688:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},8156:function(e,t,n){"use strict";var i=n(8558).f,r=n(2897),s=n(2243),o=n(1528),a=n(5824),l=n(1891),c=n(1195),u=n(5038),h=n(9766),d=n(6628),p=n(998).fastKey,f=n(9060),m=d?"_s":"size",g=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,i){a(e,u,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[m]=0,null!=i&&l(i,n,e[c],e)}));return s(u.prototype,{clear:function(){for(var e=f(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=f(this,t),i=g(n,e);if(i){var r=i.n,s=i.p;delete n._i[i.i],i.r=!0,s&&(s.n=r),r&&(r.p=s),n._f==i&&(n._f=r),n._l==i&&(n._l=s),n[m]--}return!!i},forEach:function(e){f(this,t);for(var n,i=o(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(f(this,t),e)}}),d&&i(u.prototype,"size",{get:function(){return f(this,t)[m]}}),u},def:function(e,t,n){var i,r,s=g(e,t);return s?s.v=n:(e._l=s={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=s),i&&(i.n=s),e[m]++,"F"!==r&&(e._i[r]=s)),e},getEntry:g,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=f(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?u(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,u(1))}),n?"entries":"values",!n,!0),h(t)}}},6339:function(e,t,n){"use strict";var i=n(2243),r=n(998).getWeak,s=n(6365),o=n(7334),a=n(5824),l=n(1891),c=n(8309),u=n(4040),h=n(9060),d=c(5),p=c(6),f=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},y=function(e,t){return d(e.a,(function(e){return e[0]===t}))};g.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,s){var c=e((function(e,i){a(e,c,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=i&&l(i,n,e[s],e)}));return i(c.prototype,{delete:function(e){if(!o(e))return!1;var n=r(e);return!0===n?m(h(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!o(e))return!1;var n=r(e);return!0===n?m(h(this,t)).has(e):n&&u(n,this._i)}}),c},def:function(e,t,n){var i=r(s(t),!0);return!0===i?m(e).set(t,n):i[e._i]=n,e},ufstore:m}},7611:function(e,t,n){"use strict";var i=n(8113),r=n(5772),s=n(7738),o=n(2243),a=n(998),l=n(1891),c=n(5824),u=n(7334),h=n(8625),d=n(3143),p=n(5727),f=n(8938);e.exports=function(e,t,n,m,g,y){var v=i[e],_=v,b=g?"set":"add",w=_&&_.prototype,T={},C=function(e){var t=w[e];s(w,e,"delete"==e||"has"==e?function(e){return!(y&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(y||w.forEach&&!h((function(){(new _).entries().next()})))){var k=new _,I=k[b](y?{}:-0,1)!=k,S=h((function(){k.has(1)})),E=d((function(e){new _(e)})),P=!y&&h((function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)}));E||((_=t((function(t,n){c(t,_,e);var i=f(new v,t,_);return null!=n&&l(n,g,i[b],i),i}))).prototype=w,w.constructor=_),(S||P)&&(C("delete"),C("has"),g&&C("get")),(P||I)&&C(b),y&&w.clear&&delete w.clear}else _=m.getConstructor(t,e,g,b),o(_.prototype,n),a.NEED=!0;return p(_,e),T[e]=_,r(r.G+r.W+r.F*(_!=v),T),y||m.setStrong(_,e,g),_}},66:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},6644:function(e,t,n){"use strict";var i=n(8558),r=n(6061);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},1528:function(e,t,n){var i=n(2761);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},2626:function(e,t,n){"use strict";var i=n(8625),r=Date.prototype.getTime,s=Date.prototype.toISOString,o=function(e){return e>9?e:"0"+e};e.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=s.call(new Date(-50000000000001))}))||!i((function(){s.call(new Date(NaN))}))?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}:s},9296:function(e,t,n){"use strict";var i=n(6365),r=n(1382),s="number";e.exports=function(e){if("string"!==e&&e!==s&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),e!=s)}},1622:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},6628:function(e,t,n){e.exports=!n(8625)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},5050:function(e,t,n){var i=n(7334),r=n(8113).document,s=i(r)&&i(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},3603:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},7820:function(e,t,n){var i=n(2912),r=n(7957),s=n(5873);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var o,a=n(e),l=s.f,c=0;a.length>c;)l.call(e,o=a[c++])&&t.push(o);return t}},5772:function(e,t,n){var i=n(8113),r=n(66),s=n(4216),o=n(7738),a=n(1528),l=function(e,t,n){var c,u,h,d,p=e&l.F,f=e&l.G,m=e&l.S,g=e&l.P,y=e&l.B,v=f?i:m?i[t]||(i[t]={}):(i[t]||{}).prototype,_=f?r:r[t]||(r[t]={}),b=_.prototype||(_.prototype={});for(c in f&&(n=t),n)h=((u=!p&&v&&void 0!==v[c])?v:n)[c],d=y&&u?a(h,i):g&&"function"==typeof h?a(Function.call,h):h,v&&o(v,c,h,e&l.U),_[c]!=h&&s(_,c,d),g&&b[c]!=h&&(b[c]=h)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},6570:function(e,t,n){var i=n(2190)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},8625:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},8897:function(e,t,n){"use strict";n(5846);var i=n(7738),r=n(4216),s=n(8625),o=n(1622),a=n(2190),l=n(3288),c=a("species"),u=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=a(e),p=!s((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),f=p?!s((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!t})):void 0;if(!p||!f||"replace"===e&&!u||"split"===e&&!h){var m=/./[d],g=n(o,d,""[e],(function(e,t,n,i,r){return t.exec===l?p&&!r?{done:!0,value:m.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}})),y=g[0],v=g[1];i(String.prototype,e,y),r(RegExp.prototype,d,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},4859:function(e,t,n){"use strict";var i=n(6365);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2674:function(e,t,n){"use strict";var i=n(9141),r=n(7334),s=n(6078),o=n(1528),a=n(2190)("isConcatSpreadable");e.exports=function e(t,n,l,c,u,h,d,p){for(var f,m,g=u,y=0,v=!!d&&o(d,p,3);y<c;){if(y in l){if(f=v?v(l[y],y,n):l[y],m=!1,r(f)&&(m=void 0!==(m=f[a])?!!m:i(f)),m&&h>0)g=e(t,n,f,s(f.length),g,h-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=f}g++}y++}return g}},1891:function(e,t,n){var i=n(1528),r=n(3221),s=n(8908),o=n(6365),a=n(6078),l=n(7107),c={},u={},h=e.exports=function(e,t,n,h,d){var p,f,m,g,y=d?function(){return e}:l(e),v=i(n,h,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(s(y)){for(p=a(e.length);p>_;_++)if((g=t?v(o(f=e[_])[0],f[1]):v(e[_]))===c||g===u)return g}else for(m=y.call(e);!(f=m.next()).done;)if((g=r(m,v,f.value,t))===c||g===u)return g};h.BREAK=c,h.RETURN=u},646:function(e,t,n){e.exports=n(8655)("native-function-to-string",Function.toString)},8113:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},4040:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},4216:function(e,t,n){var i=n(8558),r=n(6061);e.exports=n(6628)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},8954:function(e,t,n){var i=n(8113).document;e.exports=i&&i.documentElement},5100:function(e,t,n){e.exports=!n(6628)&&!n(8625)((function(){return 7!=Object.defineProperty(n(5050)("div"),"a",{get:function(){return 7}}).a}))},8938:function(e,t,n){var i=n(7334),r=n(6095).set;e.exports=function(e,t,n){var s,o=t.constructor;return o!==n&&"function"==typeof o&&(s=o.prototype)!==n.prototype&&i(s)&&r&&r(e,s),e}},7757:function(e){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},8467:function(e,t,n){var i=n(6688);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},8908:function(e,t,n){var i=n(3988),r=n(2190)("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[r]===e)}},9141:function(e,t,n){var i=n(6688);e.exports=Array.isArray||function(e){return"Array"==i(e)}},3917:function(e,t,n){var i=n(7334),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},7334:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},4587:function(e,t,n){var i=n(7334),r=n(6688),s=n(2190)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},3221:function(e,t,n){var i=n(6365);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var s=e.return;throw void 0!==s&&i(s.call(e)),t}}},6445:function(e,t,n){"use strict";var i=n(2897),r=n(6061),s=n(5727),o={};n(4216)(o,n(2190)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(o,{next:r(1,n)}),s(e,t+" Iterator")}},1195:function(e,t,n){"use strict";var i=n(1422),r=n(5772),s=n(7738),o=n(4216),a=n(3988),l=n(6445),c=n(5727),u=n(9002),h=n(2190)("iterator"),d=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,n,g,y,v,_){l(n,t,g);var b,w,T,C=function(e){if(!d&&e in E)return E[e];switch(e){case p:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",I=y==f,S=!1,E=e.prototype,P=E[h]||E["@@iterator"]||y&&E[y],x=P||C(y),N=y?I?C("entries"):x:void 0,A="Array"==t&&E.entries||P;if(A&&(T=u(A.call(new e)))!==Object.prototype&&T.next&&(c(T,k,!0),i||"function"==typeof T[h]||o(T,h,m)),I&&P&&P.name!==f&&(S=!0,x=function(){return P.call(this)}),i&&!_||!d&&!S&&E[h]||o(E,h,x),a[t]=x,a[k]=m,y)if(b={values:I?x:C(f),keys:v?x:C(p),entries:N},_)for(w in b)w in E||s(E,w,b[w]);else r(r.P+r.F*(d||S),t,b);return b}},3143:function(e,t,n){var i=n(2190)("iterator"),r=!1;try{var s=[7][i]();s.return=function(){r=!0},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s=[7],o=s[i]();o.next=function(){return{done:n=!0}},s[i]=function(){return o},e(s)}catch(e){}return n}},5038:function(e){e.exports=function(e,t){return{value:t,done:!!e}}},3988:function(e){e.exports={}},1422:function(e){e.exports=!1},9489:function(e){var t=Math.expm1;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:t},4519:function(e,t,n){var i=n(2697),r=Math.pow,s=r(2,-52),o=r(2,-23),a=r(2,127)*(2-o),l=r(2,-126);e.exports=Math.fround||function(e){var t,n,r=Math.abs(e),c=i(e);return r<l?c*(r/l/o+1/s-1/s)*l*o:(n=(t=(1+o/s)*r)-(t-r))>a||n!=n?c*(1/0):c*n}},922:function(e){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},2697:function(e){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},998:function(e,t,n){var i=n(5078)("meta"),r=n(7334),s=n(4040),o=n(8558).f,a=0,l=Object.isExtensible||function(){return!0},c=!n(8625)((function(){return l(Object.preventExtensions({}))})),u=function(e){o(e,i,{value:{i:"O"+ ++a,w:{}}})},h=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},getWeak:function(e,t){if(!s(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},onFreeze:function(e){return c&&h.NEED&&l(e)&&!s(e,i)&&u(e),e}}},3492:function(e,t,n){var i=n(8113),r=n(9124).set,s=i.MutationObserver||i.WebKitMutationObserver,o=i.process,a=i.Promise,l="process"==n(6688)(o);e.exports=function(){var e,t,n,c=function(){var i,r;for(l&&(i=o.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){o.nextTick(c)};else if(!s||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);n=function(){u.then(c)}}else n=function(){r.call(i,c)};else{var h=!0,d=document.createTextNode("");new s(c).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},8577:function(e,t,n){"use strict";var i=n(2761);function r(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)}e.exports.f=function(e){return new r(e)}},7029:function(e,t,n){"use strict";var i=n(6628),r=n(2912),s=n(7957),o=n(5873),a=n(6033),l=n(8467),c=Object.assign;e.exports=!c||n(8625)((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i}))?function(e,t){for(var n=a(e),c=arguments.length,u=1,h=s.f,d=o.f;c>u;)for(var p,f=l(arguments[u++]),m=h?r(f).concat(h(f)):r(f),g=m.length,y=0;g>y;)p=m[y++],i&&!d.call(f,p)||(n[p]=f[p]);return n}:c},2897:function(e,t,n){var i=n(6365),r=n(7331),s=n(3603),o=n(8034)("IE_PROTO"),a=function(){},l=function(){var e,t=n(5050)("iframe"),i=s.length;for(t.style.display="none",n(8954).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[s[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=i(e),n=new a,a.prototype=null,n[o]=e):n=l(),void 0===t?n:r(n,t)}},8558:function(e,t,n){var i=n(6365),r=n(5100),s=n(1382),o=Object.defineProperty;t.f=n(6628)?Object.defineProperty:function(e,t,n){if(i(e),t=s(t,!0),i(n),r)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},7331:function(e,t,n){var i=n(8558),r=n(6365),s=n(2912);e.exports=n(6628)?Object.defineProperties:function(e,t){r(e);for(var n,o=s(t),a=o.length,l=0;a>l;)i.f(e,n=o[l++],t[n]);return e}},4662:function(e,t,n){var i=n(5873),r=n(6061),s=n(5703),o=n(1382),a=n(4040),l=n(5100),c=Object.getOwnPropertyDescriptor;t.f=n(6628)?c:function(e,t){if(e=s(e),t=o(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return r(!i.f.call(e,t),e[t])}},5259:function(e,t,n){var i=n(5703),r=n(6604).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(i(e))}},6604:function(e,t,n){var i=n(5547),r=n(3603).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},7957:function(e,t){t.f=Object.getOwnPropertySymbols},9002:function(e,t,n){var i=n(4040),r=n(6033),s=n(8034)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},5547:function(e,t,n){var i=n(4040),r=n(5703),s=n(9021)(!1),o=n(8034)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),l=0,c=[];for(n in a)n!=o&&i(a,n)&&c.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~s(c,n)||c.push(n));return c}},2912:function(e,t,n){var i=n(5547),r=n(3603);e.exports=Object.keys||function(e){return i(e,r)}},5873:function(e,t){t.f={}.propertyIsEnumerable},468:function(e,t,n){var i=n(5772),r=n(66),s=n(8625);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),i(i.S+i.F*s((function(){n(1)})),"Object",o)}},758:function(e,t,n){var i=n(6628),r=n(2912),s=n(5703),o=n(5873).f;e.exports=function(e){return function(t){for(var n,a=s(t),l=r(a),c=l.length,u=0,h=[];c>u;)n=l[u++],i&&!o.call(a,n)||h.push(e?[n,a[n]]:a[n]);return h}}},6831:function(e,t,n){var i=n(6604),r=n(7957),s=n(6365),o=n(8113).Reflect;e.exports=o&&o.ownKeys||function(e){var t=i.f(s(e)),n=r.f;return n?t.concat(n(e)):t}},5575:function(e,t,n){var i=n(8113).parseFloat,r=n(8487).trim;e.exports=1/i(n(8021)+"-0")!=-1/0?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},929:function(e,t,n){var i=n(8113).parseInt,r=n(8487).trim,s=n(8021),o=/^[-+]?0[xX]/;e.exports=8!==i(s+"08")||22!==i(s+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(o.test(n)?16:10))}:i},9739:function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},5151:function(e,t,n){var i=n(6365),r=n(7334),s=n(8577);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},6061:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2243:function(e,t,n){var i=n(7738);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},7738:function(e,t,n){var i=n(8113),r=n(4216),s=n(4040),o=n(5078)("src"),a=n(646),l="toString",c=(""+a).split(l);n(66).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var l="function"==typeof n;l&&(s(n,"name")||r(n,"name",t)),e[t]!==n&&(l&&(s(n,o)||r(n,o,e[t]?""+e[t]:c.join(String(t)))),e===i?e[t]=n:a?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[o]||a.call(this)}))},2404:function(e,t,n){"use strict";var i=n(106),r=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var s=n.call(e,t);if("object"!=typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},3288:function(e,t,n){"use strict";var i,r,s=n(4859),o=RegExp.prototype.exec,a=String.prototype.replace,l=o,c=(i=/a/,r=/b*/g,o.call(i,"a"),o.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,n,i,r,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",s.call(l))),c&&(t=l.lastIndex),i=o.call(l,e),c&&i&&(l.lastIndex=l.global?i.index+i[0].length:t),u&&i&&i.length>1&&a.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=l},339:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},6095:function(e,t,n){var i=n(7334),r=n(6365),s=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(1528)(Function.call,n(4662).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:s}},9766:function(e,t,n){"use strict";var i=n(8113),r=n(8558),s=n(6628),o=n(2190)("species");e.exports=function(e){var t=i[e];s&&t&&!t[o]&&r.f(t,o,{configurable:!0,get:function(){return this}})}},5727:function(e,t,n){var i=n(8558).f,r=n(4040),s=n(2190)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},8034:function(e,t,n){var i=n(8655)("keys"),r=n(5078);e.exports=function(e){return i[e]||(i[e]=r(e))}},8655:function(e,t,n){var i=n(66),r=n(8113),s="__core-js_shared__",o=r[s]||(r[s]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(1422)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},1987:function(e,t,n){var i=n(6365),r=n(2761),s=n(2190)("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||null==(n=i(o)[s])?t:r(n)}},225:function(e,t,n){"use strict";var i=n(8625);e.exports=function(e,t){return!!e&&i((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},2070:function(e,t,n){var i=n(3338),r=n(1622);e.exports=function(e){return function(t,n){var s,o,a=String(r(t)),l=i(n),c=a.length;return l<0||l>=c?e?"":void 0:(s=a.charCodeAt(l))<55296||s>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):s:e?a.slice(l,l+2):o-56320+(s-55296<<10)+65536}}},465:function(e,t,n){var i=n(4587),r=n(1622);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},5776:function(e,t,n){var i=n(5772),r=n(8625),s=n(1622),o=/"/g,a=function(e,t,n,i){var r=String(s(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),a+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(a),i(i.P+i.F*r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},6283:function(e,t,n){var i=n(6078),r=n(7160),s=n(1622);e.exports=function(e,t,n,o){var a=String(s(e)),l=a.length,c=void 0===n?" ":String(n),u=i(t);if(u<=l||""==c)return a;var h=u-l,d=r.call(c,Math.ceil(h/c.length));return d.length>h&&(d=d.slice(0,h)),o?d+a:a+d}},7160:function(e,t,n){"use strict";var i=n(3338),r=n(1622);e.exports=function(e){var t=String(r(this)),n="",s=i(e);if(s<0||s==1/0)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},8487:function(e,t,n){var i=n(5772),r=n(1622),s=n(8625),o=n(8021),a="["+o+"]",l=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),u=function(e,t,n){var r={},a=s((function(){return!!o[e]()||"​"!="​"[e]()})),l=r[e]=a?t(h):o[e];n&&(r[n]=l),i(i.P+i.F*a,"String",r)},h=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},8021:function(e){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},9124:function(e,t,n){var i,r,s,o=n(1528),a=n(7757),l=n(8954),c=n(5050),u=n(8113),h=u.process,d=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,g=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){v.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++g]=function(){a("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete y[e]},"process"==n(6688)(h)?i=function(e){h.nextTick(o(v,e,1))}:m&&m.now?i=function(e){m.now(o(v,e,1))}:f?(s=(r=new f).port2,r.port1.onmessage=_,i=o(s.postMessage,s,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",_,!1)):i="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),e.exports={set:d,clear:p}},8615:function(e,t,n){var i=n(3338),r=Math.max,s=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):s(e,t)}},1982:function(e,t,n){var i=n(3338),r=n(6078);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length!");return n}},3338:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},5703:function(e,t,n){var i=n(8467),r=n(1622);e.exports=function(e){return i(r(e))}},6078:function(e,t,n){var i=n(3338),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},6033:function(e,t,n){var i=n(1622);e.exports=function(e){return Object(i(e))}},1382:function(e,t,n){var i=n(7334);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},7978:function(e,t,n){"use strict";if(n(6628)){var i=n(1422),r=n(8113),s=n(8625),o=n(5772),a=n(5949),l=n(4972),c=n(1528),u=n(5824),h=n(6061),d=n(4216),p=n(2243),f=n(3338),m=n(6078),g=n(1982),y=n(8615),v=n(1382),_=n(4040),b=n(106),w=n(7334),T=n(6033),C=n(8908),k=n(2897),I=n(9002),S=n(6604).f,E=n(7107),P=n(5078),x=n(2190),N=n(8309),A=n(9021),R=n(1987),O=n(7680),M=n(3988),L=n(3143),D=n(9766),F=n(3195),j=n(6257),U=n(8558),q=n(4662),$=U.f,V=q.f,H=r.RangeError,W=r.TypeError,z=r.Uint8Array,B="ArrayBuffer",G="SharedArrayBuffer",K="BYTES_PER_ELEMENT",Y=Array.prototype,J=l.ArrayBuffer,Q=l.DataView,X=N(0),Z=N(2),ee=N(3),te=N(4),ne=N(5),ie=N(6),re=A(!0),se=A(!1),oe=O.values,ae=O.keys,le=O.entries,ce=Y.lastIndexOf,ue=Y.reduce,he=Y.reduceRight,de=Y.join,pe=Y.sort,fe=Y.slice,me=Y.toString,ge=Y.toLocaleString,ye=x("iterator"),ve=x("toStringTag"),_e=P("typed_constructor"),be=P("def_constructor"),we=a.CONSTR,Te=a.TYPED,Ce=a.VIEW,ke="Wrong length!",Ie=N(1,(function(e,t){return Ne(R(e,e[be]),t)})),Se=s((function(){return 1===new z(new Uint16Array([1]).buffer)[0]})),Ee=!!z&&!!z.prototype.set&&s((function(){new z(1).set({})})),Pe=function(e,t){var n=f(e);if(n<0||n%t)throw H("Wrong offset!");return n},xe=function(e){if(w(e)&&Te in e)return e;throw W(e+" is not a typed array!")},Ne=function(e,t){if(!w(e)||!(_e in e))throw W("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Re(R(e,e[be]),t)},Re=function(e,t){for(var n=0,i=t.length,r=Ne(e,i);i>n;)r[n]=t[n++];return r},Oe=function(e,t,n){$(e,t,{get:function(){return this._d[n]}})},Me=function(e){var t,n,i,r,s,o,a=T(e),l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,d=E(a);if(null!=d&&!C(d)){for(o=d.call(a),i=[],t=0;!(s=o.next()).done;t++)i.push(s.value);a=i}for(h&&l>2&&(u=c(u,arguments[2],2)),t=0,n=m(a.length),r=Ne(this,n);n>t;t++)r[t]=h?u(a[t],t):a[t];return r},Le=function(){for(var e=0,t=arguments.length,n=Ne(this,t);t>e;)n[e]=arguments[e++];return n},De=!!z&&s((function(){ge.call(new z(1))})),Fe=function(){return ge.apply(De?fe.call(xe(this)):xe(this),arguments)},je={copyWithin:function(e,t){return j.call(xe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return te(xe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(xe(this),arguments)},filter:function(e){return Ae(this,Z(xe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ne(xe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ie(xe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(xe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return se(xe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return re(xe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return de.apply(xe(this),arguments)},lastIndexOf:function(e){return ce.apply(xe(this),arguments)},map:function(e){return Ie(xe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ue.apply(xe(this),arguments)},reduceRight:function(e){return he.apply(xe(this),arguments)},reverse:function(){for(var e,t=this,n=xe(t).length,i=Math.floor(n/2),r=0;r<i;)e=t[r],t[r++]=t[--n],t[n]=e;return t},some:function(e){return ee(xe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(xe(this),e)},subarray:function(e,t){var n=xe(this),i=n.length,r=y(e,i);return new(R(n,n[be]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,m((void 0===t?i:y(t,i))-r))}},Ue=function(e,t){return Ae(this,fe.call(xe(this),e,t))},qe=function(e){xe(this);var t=Pe(arguments[1],1),n=this.length,i=T(e),r=m(i.length),s=0;if(r+t>n)throw H(ke);for(;s<r;)this[t+s]=i[s++]},$e={entries:function(){return le.call(xe(this))},keys:function(){return ae.call(xe(this))},values:function(){return oe.call(xe(this))}},Ve=function(e,t){return w(e)&&e[Te]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},He=function(e,t){return Ve(e,t=v(t,!0))?h(2,e[t]):V(e,t)},We=function(e,t,n){return!(Ve(e,t=v(t,!0))&&w(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?$(e,t,n):(e[t]=n.value,e)};we||(q.f=He,U.f=We),o(o.S+o.F*!we,"Object",{getOwnPropertyDescriptor:He,defineProperty:We}),s((function(){me.call({})}))&&(me=ge=function(){return de.call(this)});var ze=p({},je);p(ze,$e),d(ze,ye,$e.values),p(ze,{slice:Ue,set:qe,constructor:function(){},toString:me,toLocaleString:Fe}),Oe(ze,"buffer","b"),Oe(ze,"byteOffset","o"),Oe(ze,"byteLength","l"),Oe(ze,"length","e"),$(ze,ve,{get:function(){return this[Te]}}),e.exports=function(e,t,n,l){var c=e+((l=!!l)?"Clamped":"")+"Array",h="get"+e,p="set"+e,f=r[c],y=f||{},v=f&&I(f),_=!f||!a.ABV,T={},C=f&&f.prototype,E=function(e,n){$(e,n,{get:function(){return function(e,n){var i=e._d;return i.v[h](n*t+i.o,Se)}(this,n)},set:function(e){return function(e,n,i){var r=e._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*t+r.o,i,Se)}(this,n,e)},enumerable:!0})};_?(f=n((function(e,n,i,r){u(e,f,c,"_d");var s,o,a,l,h=0,p=0;if(w(n)){if(!(n instanceof J||(l=b(n))==B||l==G))return Te in n?Re(f,n):Me.call(f,n);s=n,p=Pe(i,t);var y=n.byteLength;if(void 0===r){if(y%t)throw H(ke);if((o=y-p)<0)throw H(ke)}else if((o=m(r)*t)+p>y)throw H(ke);a=o/t}else a=g(n),s=new J(o=a*t);for(d(e,"_d",{b:s,o:p,l:o,e:a,v:new Q(s)});h<a;)E(e,h++)})),C=f.prototype=k(ze),d(C,"constructor",f)):s((function(){f(1)}))&&s((function(){new f(-1)}))&&L((function(e){new f,new f(null),new f(1.5),new f(e)}),!0)||(f=n((function(e,n,i,r){var s;return u(e,f,c),w(n)?n instanceof J||(s=b(n))==B||s==G?void 0!==r?new y(n,Pe(i,t),r):void 0!==i?new y(n,Pe(i,t)):new y(n):Te in n?Re(f,n):Me.call(f,n):new y(g(n))})),X(v!==Function.prototype?S(y).concat(S(v)):S(y),(function(e){e in f||d(f,e,y[e])})),f.prototype=C,i||(C.constructor=f));var P=C[ye],x=!!P&&("values"==P.name||null==P.name),N=$e.values;d(f,_e,!0),d(C,Te,c),d(C,Ce,!0),d(C,be,f),(l?new f(1)[ve]==c:ve in C)||$(C,ve,{get:function(){return c}}),T[c]=f,o(o.G+o.W+o.F*(f!=y),T),o(o.S,c,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*s((function(){y.of.call(f,1)})),c,{from:Me,of:Le}),K in C||d(C,K,t),o(o.P,c,je),D(c),o(o.P+o.F*Ee,c,{set:qe}),o(o.P+o.F*!x,c,$e),i||C.toString==me||(C.toString=me),o(o.P+o.F*s((function(){new f(1).slice()})),c,{slice:Ue}),o(o.P+o.F*(s((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!s((function(){C.toLocaleString.call([1,2])}))),c,{toLocaleString:Fe}),M[c]=x?P:N,i||x||d(C,ye,N)}}else e.exports=function(){}},4972:function(e,t,n){"use strict";var i=n(8113),r=n(6628),s=n(1422),o=n(5949),a=n(4216),l=n(2243),c=n(8625),u=n(5824),h=n(3338),d=n(6078),p=n(1982),f=n(6604).f,m=n(8558).f,g=n(3195),y=n(5727),v="ArrayBuffer",_="DataView",b="Wrong index!",w=i.ArrayBuffer,T=i.DataView,C=i.Math,k=i.RangeError,I=i.Infinity,S=w,E=C.abs,P=C.pow,x=C.floor,N=C.log,A=C.LN2,R="buffer",O="byteLength",M="byteOffset",L=r?"_b":R,D=r?"_l":O,F=r?"_o":M;function j(e,t,n){var i,r,s,o=new Array(n),a=8*n-t-1,l=(1<<a)-1,c=l>>1,u=23===t?P(2,-24)-P(2,-77):0,h=0,d=e<0||0===e&&1/e<0?1:0;for((e=E(e))!=e||e===I?(r=e!=e?1:0,i=l):(i=x(N(e)/A),e*(s=P(2,-i))<1&&(i--,s*=2),(e+=i+c>=1?u/s:u*P(2,1-c))*s>=2&&(i++,s/=2),i+c>=l?(r=0,i=l):i+c>=1?(r=(e*s-1)*P(2,t),i+=c):(r=e*P(2,c-1)*P(2,t),i=0));t>=8;o[h++]=255&r,r/=256,t-=8);for(i=i<<t|r,a+=t;a>0;o[h++]=255&i,i/=256,a-=8);return o[--h]|=128*d,o}function U(e,t,n){var i,r=8*n-t-1,s=(1<<r)-1,o=s>>1,a=r-7,l=n-1,c=e[l--],u=127&c;for(c>>=7;a>0;u=256*u+e[l],l--,a-=8);for(i=u&(1<<-a)-1,u>>=-a,a+=t;a>0;i=256*i+e[l],l--,a-=8);if(0===u)u=1-o;else{if(u===s)return i?NaN:c?-I:I;i+=P(2,t),u-=o}return(c?-1:1)*i*P(2,u-t)}function q(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function $(e){return[255&e]}function V(e){return[255&e,e>>8&255]}function H(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function W(e){return j(e,52,8)}function z(e){return j(e,23,4)}function B(e,t,n){m(e.prototype,t,{get:function(){return this[n]}})}function G(e,t,n,i){var r=p(+n);if(r+t>e[D])throw k(b);var s=e[L]._b,o=r+e[F],a=s.slice(o,o+t);return i?a:a.reverse()}function K(e,t,n,i,r,s){var o=p(+n);if(o+t>e[D])throw k(b);for(var a=e[L]._b,l=o+e[F],c=i(+r),u=0;u<t;u++)a[l+u]=c[s?u:t-u-1]}if(o.ABV){if(!c((function(){w(1)}))||!c((function(){new w(-1)}))||c((function(){return new w,new w(1.5),new w(NaN),w.name!=v}))){for(var Y,J=(w=function(e){return u(this,w),new S(p(e))}).prototype=S.prototype,Q=f(S),X=0;Q.length>X;)(Y=Q[X++])in w||a(w,Y,S[Y]);s||(J.constructor=w)}var Z=new T(new w(2)),ee=T.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||l(T.prototype,{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else w=function(e){u(this,w,v);var t=p(e);this._b=g.call(new Array(t),0),this[D]=t},T=function(e,t,n){u(this,T,_),u(e,w,_);var i=e[D],r=h(t);if(r<0||r>i)throw k("Wrong offset!");if(r+(n=void 0===n?i-r:d(n))>i)throw k("Wrong length!");this[L]=e,this[F]=r,this[D]=n},r&&(B(w,O,"_l"),B(T,R,"_b"),B(T,O,"_l"),B(T,M,"_o")),l(T.prototype,{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return q(G(this,4,e,arguments[1]))},getUint32:function(e){return q(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return U(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return U(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){K(this,1,e,$,t)},setUint8:function(e,t){K(this,1,e,$,t)},setInt16:function(e,t){K(this,2,e,V,t,arguments[2])},setUint16:function(e,t){K(this,2,e,V,t,arguments[2])},setInt32:function(e,t){K(this,4,e,H,t,arguments[2])},setUint32:function(e,t){K(this,4,e,H,t,arguments[2])},setFloat32:function(e,t){K(this,4,e,z,t,arguments[2])},setFloat64:function(e,t){K(this,8,e,W,t,arguments[2])}});y(w,v),y(T,_),a(T.prototype,o.VIEW,!0),t.ArrayBuffer=w,t.DataView=T},5949:function(e,t,n){for(var i,r=n(8113),s=n(4216),o=n(5078),a=o("typed_array"),l=o("view"),c=!(!r.ArrayBuffer||!r.DataView),u=c,h=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(i=r[d[h++]])?(s(i.prototype,a,!0),s(i.prototype,l,!0)):u=!1;e.exports={ABV:c,CONSTR:u,TYPED:a,VIEW:l}},5078:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},5822:function(e,t,n){var i=n(8113).navigator;e.exports=i&&i.userAgent||""},9060:function(e,t,n){var i=n(7334);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},5660:function(e,t,n){var i=n(8113),r=n(66),s=n(1422),o=n(9669),a=n(8558).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=s?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},9669:function(e,t,n){t.f=n(2190)},2190:function(e,t,n){var i=n(8655)("wks"),r=n(5078),s=n(8113).Symbol,o="function"==typeof s;(e.exports=function(e){return i[e]||(i[e]=o&&s[e]||(o?s:r)("Symbol."+e))}).store=i},7107:function(e,t,n){var i=n(106),r=n(2190)("iterator"),s=n(3988);e.exports=n(66).getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||s[i(e)]}},1601:function(e,t,n){var i=n(5772);i(i.P,"Array",{copyWithin:n(6257)}),n(2094)("copyWithin")},46:function(e,t,n){"use strict";var i=n(5772),r=n(8309)(4);i(i.P+i.F*!n(225)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},453:function(e,t,n){var i=n(5772);i(i.P,"Array",{fill:n(3195)}),n(2094)("fill")},4434:function(e,t,n){"use strict";var i=n(5772),r=n(8309)(2);i(i.P+i.F*!n(225)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},8703:function(e,t,n){"use strict";var i=n(5772),r=n(8309)(6),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i(i.P+i.F*o,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(2094)(s)},1954:function(e,t,n){"use strict";var i=n(5772),r=n(8309)(5),s="find",o=!0;s in[]&&Array(1).find((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(2094)(s)},7772:function(e,t,n){"use strict";var i=n(5772),r=n(8309)(0),s=n(225)([].forEach,!0);i(i.P+i.F*!s,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},9606:function(e,t,n){"use strict";var i=n(1528),r=n(5772),s=n(6033),o=n(3221),a=n(8908),l=n(6078),c=n(6644),u=n(7107);r(r.S+r.F*!n(3143)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,h,d=s(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,y=0,v=u(d);if(g&&(m=i(m,f>2?arguments[2]:void 0,2)),null==v||p==Array&&a(v))for(n=new p(t=l(d.length));t>y;y++)c(n,y,g?m(d[y],y):d[y]);else for(h=v.call(d),n=new p;!(r=h.next()).done;y++)c(n,y,g?o(h,m,[r.value,y],!0):r.value);return n.length=y,n}})},5155:function(e,t,n){"use strict";var i=n(5772),r=n(9021)(!1),s=[].indexOf,o=!!s&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(o||!n(225)(s)),"Array",{indexOf:function(e){return o?s.apply(this,arguments)||0:r(this,e,arguments[1])}})},5867:function(e,t,n){var i=n(5772);i(i.S,"Array",{isArray:n(9141)})},7680:function(e,t,n){"use strict";var i=n(2094),r=n(5038),s=n(3988),o=n(5703);e.exports=n(1195)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},8466:function(e,t,n){"use strict";var i=n(5772),r=n(5703),s=[].join;i(i.P+i.F*(n(8467)!=Object||!n(225)(s)),"Array",{join:function(e){return s.call(r(this),void 0===e?",":e)}})},3133:function(e,t,n){"use strict";var i=n(5772),r=n(5703),s=n(3338),o=n(6078),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(225)(a)),"Array",{lastIndexOf:function(e){if(l)return a.apply(this,arguments)||0;var t=r(this),n=o(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,s(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},286:function(e,t,n){"use strict";var i=n(5772),r=n(8309)(1);i(i.P+i.F*!n(225)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},9174:function(e,t,n){"use strict";var i=n(5772),r=n(6644);i(i.S+i.F*n(8625)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},8312:function(e,t,n){"use strict";var i=n(5772),r=n(9291);i(i.P+i.F*!n(225)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},9399:function(e,t,n){"use strict";var i=n(5772),r=n(9291);i(i.P+i.F*!n(225)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},7209:function(e,t,n){"use strict";var i=n(5772),r=n(8954),s=n(6688),o=n(8615),a=n(6078),l=[].slice;i(i.P+i.F*n(8625)((function(){r&&l.call(r)})),"Array",{slice:function(e,t){var n=a(this.length),i=s(this);if(t=void 0===t?n:t,"Array"==i)return l.call(this,e,t);for(var r=o(e,n),c=o(t,n),u=a(c-r),h=new Array(u),d=0;d<u;d++)h[d]="String"==i?this.charAt(r+d):this[r+d];return h}})},3231:function(e,t,n){"use strict";var i=n(5772),r=n(8309)(3);i(i.P+i.F*!n(225)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},1796:function(e,t,n){"use strict";var i=n(5772),r=n(2761),s=n(6033),o=n(8625),a=[].sort,l=[1,2,3];i(i.P+i.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!n(225)(a)),"Array",{sort:function(e){return void 0===e?a.call(s(this)):a.call(s(this),r(e))}})},652:function(e,t,n){n(9766)("Array")},817:function(e,t,n){var i=n(5772);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},5079:function(e,t,n){var i=n(5772),r=n(2626);i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},5337:function(e,t,n){"use strict";var i=n(5772),r=n(6033),s=n(1382);i(i.P+i.F*n(8625)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=r(this),n=s(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},4163:function(e,t,n){var i=n(2190)("toPrimitive"),r=Date.prototype;i in r||n(4216)(r,i,n(9296))},5105:function(e,t,n){var i=Date.prototype,r="Invalid Date",s=i.toString,o=i.getTime;new Date(NaN)+""!=r&&n(7738)(i,"toString",(function(){var e=o.call(this);return e==e?s.call(this):r}))},8629:function(e,t,n){var i=n(5772);i(i.P,"Function",{bind:n(9337)})},5694:function(e,t,n){"use strict";var i=n(7334),r=n(9002),s=n(2190)("hasInstance"),o=Function.prototype;s in o||n(8558).f(o,s,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},9745:function(e,t,n){var i=n(8558).f,r=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in r||n(6628)&&i(r,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},1239:function(e,t,n){"use strict";var i=n(8156),r=n(9060),s="Map";e.exports=n(7611)(s,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(r(this,s),e);return t&&t.v},set:function(e,t){return i.def(r(this,s),0===e?0:e,t)}},i,!0)},5886:function(e,t,n){var i=n(5772),r=n(922),s=Math.sqrt,o=Math.acosh;i(i.S+i.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+s(e-1)*s(e+1))}})},91:function(e,t,n){var i=n(5772),r=Math.asinh;i(i.S+i.F*!(r&&1/r(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},6799:function(e,t,n){var i=n(5772),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},1570:function(e,t,n){var i=n(5772),r=n(2697);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},6006:function(e,t,n){var i=n(5772);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},8377:function(e,t,n){var i=n(5772),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},108:function(e,t,n){var i=n(5772),r=n(9489);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},905:function(e,t,n){var i=n(5772);i(i.S,"Math",{fround:n(4519)})},8103:function(e,t,n){var i=n(5772),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,s=0,o=0,a=arguments.length,l=0;o<a;)l<(n=r(arguments[o++]))?(s=s*(i=l/n)*i+1,l=n):s+=n>0?(i=n/l)*i:n;return l===1/0?1/0:l*Math.sqrt(s)}})},5937:function(e,t,n){var i=n(5772),r=Math.imul;i(i.S+i.F*n(8625)((function(){return-5!=r(4294967295,5)||2!=r.length})),"Math",{imul:function(e,t){var n=65535,i=+e,r=+t,s=n&i,o=n&r;return 0|s*o+((n&i>>>16)*o+s*(n&r>>>16)<<16>>>0)}})},9979:function(e,t,n){var i=n(5772);i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},3601:function(e,t,n){var i=n(5772);i(i.S,"Math",{log1p:n(922)})},4226:function(e,t,n){var i=n(5772);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},9750:function(e,t,n){var i=n(5772);i(i.S,"Math",{sign:n(2697)})},1462:function(e,t,n){var i=n(5772),r=n(9489),s=Math.exp;i(i.S+i.F*n(8625)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(s(e-1)-s(-e-1))*(Math.E/2)}})},4773:function(e,t,n){var i=n(5772),r=n(9489),s=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(s(e)+s(-e))}})},2421:function(e,t,n){var i=n(5772);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},6349:function(e,t,n){"use strict";var i=n(8113),r=n(4040),s=n(6688),o=n(8938),a=n(1382),l=n(8625),c=n(6604).f,u=n(4662).f,h=n(8558).f,d=n(8487).trim,p="Number",f=i.Number,m=f,g=f.prototype,y=s(n(2897)(g))==p,v="trim"in String.prototype,_=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){var n,i,r,s=(t=v?t.trim():d(t,3)).charCodeAt(0);if(43===s||45===s){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var o,l=t.slice(2),c=0,u=l.length;c<u;c++)if((o=l.charCodeAt(c))<48||o>r)return NaN;return parseInt(l,i)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof f&&(y?l((function(){g.valueOf.call(n)})):s(n)!=p)?o(new m(_(t)),n,f):_(t)};for(var b,w=n(6628)?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;w.length>T;T++)r(m,b=w[T])&&!r(f,b)&&h(f,b,u(m,b));f.prototype=g,g.constructor=f,n(7738)(i,p,f)}},2211:function(e,t,n){var i=n(5772);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},3730:function(e,t,n){var i=n(5772),r=n(8113).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},6729:function(e,t,n){var i=n(5772);i(i.S,"Number",{isInteger:n(3917)})},7374:function(e,t,n){var i=n(5772);i(i.S,"Number",{isNaN:function(e){return e!=e}})},2095:function(e,t,n){var i=n(5772),r=n(3917),s=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&s(e)<=9007199254740991}})},6362:function(e,t,n){var i=n(5772);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},6329:function(e,t,n){var i=n(5772);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},7463:function(e,t,n){var i=n(5772),r=n(5575);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},5874:function(e,t,n){var i=n(5772),r=n(929);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},8110:function(e,t,n){"use strict";var i=n(5772),r=n(3338),s=n(1525),o=n(7160),a=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h="0",d=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*c[n],c[n]=i%1e7,i=l(i/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=l(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+o.call(h,7-n.length)+n}return t},m=function(e,t,n){return 0===t?n:t%2==1?m(e,t-1,n*e):m(e*e,t/2,n)};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(8625)((function(){a.call({})}))),"Number",{toFixed:function(e){var t,n,i,a,l=s(this,u),c=r(e),g="",y=h;if(c<0||c>20)throw RangeError(u);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*m(2,69,1))-69)<0?l*m(2,-t,1):l/m(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),i=c;i>=7;)d(1e7,0),i-=7;for(d(m(10,i,1),0),i=t-1;i>=23;)p(1<<23),i-=23;p(1<<i),d(1,1),p(2),y=f()}else d(0,n),d(1<<-t,0),y=f()+o.call(h,c);return c>0?g+((a=y.length)<=c?"0."+o.call(h,c-a)+y:y.slice(0,a-c)+"."+y.slice(a-c)):g+y}})},3689:function(e,t,n){"use strict";var i=n(5772),r=n(8625),s=n(1525),o=1..toPrecision;i(i.P+i.F*(r((function(){return"1"!==o.call(1,void 0)}))||!r((function(){o.call({})}))),"Number",{toPrecision:function(e){var t=s(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},9773:function(e,t,n){var i=n(5772);i(i.S+i.F,"Object",{assign:n(7029)})},9701:function(e,t,n){var i=n(5772);i(i.S,"Object",{create:n(2897)})},8344:function(e,t,n){var i=n(5772);i(i.S+i.F*!n(6628),"Object",{defineProperties:n(7331)})},5843:function(e,t,n){var i=n(5772);i(i.S+i.F*!n(6628),"Object",{defineProperty:n(8558).f})},8338:function(e,t,n){var i=n(7334),r=n(998).onFreeze;n(468)("freeze",(function(e){return function(t){return e&&i(t)?e(r(t)):t}}))},541:function(e,t,n){var i=n(5703),r=n(4662).f;n(468)("getOwnPropertyDescriptor",(function(){return function(e,t){return r(i(e),t)}}))},9770:function(e,t,n){n(468)("getOwnPropertyNames",(function(){return n(5259).f}))},8904:function(e,t,n){var i=n(6033),r=n(9002);n(468)("getPrototypeOf",(function(){return function(e){return r(i(e))}}))},3310:function(e,t,n){var i=n(7334);n(468)("isExtensible",(function(e){return function(t){return!!i(t)&&(!e||e(t))}}))},7070:function(e,t,n){var i=n(7334);n(468)("isFrozen",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},9163:function(e,t,n){var i=n(7334);n(468)("isSealed",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},9020:function(e,t,n){var i=n(5772);i(i.S,"Object",{is:n(339)})},4978:function(e,t,n){var i=n(6033),r=n(2912);n(468)("keys",(function(){return function(e){return r(i(e))}}))},3668:function(e,t,n){var i=n(7334),r=n(998).onFreeze;n(468)("preventExtensions",(function(e){return function(t){return e&&i(t)?e(r(t)):t}}))},7941:function(e,t,n){var i=n(7334),r=n(998).onFreeze;n(468)("seal",(function(e){return function(t){return e&&i(t)?e(r(t)):t}}))},4210:function(e,t,n){var i=n(5772);i(i.S,"Object",{setPrototypeOf:n(6095).set})},6139:function(e,t,n){"use strict";var i=n(106),r={};r[n(2190)("toStringTag")]="z",r+""!="[object z]"&&n(7738)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},5821:function(e,t,n){var i=n(5772),r=n(5575);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},6130:function(e,t,n){var i=n(5772),r=n(929);i(i.G+i.F*(parseInt!=r),{parseInt:r})},2235:function(e,t,n){"use strict";var i,r,s,o,a=n(1422),l=n(8113),c=n(1528),u=n(106),h=n(5772),d=n(7334),p=n(2761),f=n(5824),m=n(1891),g=n(1987),y=n(9124).set,v=n(3492)(),_=n(8577),b=n(9739),w=n(5822),T=n(5151),C="Promise",k=l.TypeError,I=l.process,S=I&&I.versions,E=S&&S.v8||"",P=l.Promise,x="process"==u(I),N=function(){},A=r=_.f,R=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n(2190)("species")]=function(e){e(N,N)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(N)instanceof t&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),O=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;v((function(){for(var i=e._v,r=1==e._s,s=0,o=function(t){var n,s,o,a=r?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{a?(r||(2==e._h&&F(e),e._h=1),!0===a?n=i:(u&&u.enter(),n=a(i),u&&(u.exit(),o=!0)),n===t.promise?c(k("Promise-chain cycle")):(s=O(n))?s.call(n,l,c):l(n)):c(i)}catch(e){u&&!o&&u.exit(),c(e)}};n.length>s;)o(n[s++]);e._c=[],e._n=!1,t&&!e._h&&L(e)}))}},L=function(e){y.call(l,(function(){var t,n,i,r=e._v,s=D(e);if(s&&(t=b((function(){x?I.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)})),e._h=x||D(e)?2:1),e._a=void 0,s&&t.e)throw t.v}))},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){y.call(l,(function(){var t;x?I.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})}))},j=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=O(e))?v((function(){var i={_w:n,_d:!1};try{t.call(e,c(U,i,1),c(j,i,1))}catch(e){j.call(i,e)}})):(n._v=e,n._s=1,M(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};R||(P=function(e){f(this,P,C,"_h"),p(e),i.call(this);try{e(c(U,this,1),c(j,this,1))}catch(e){j.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(2243)(P.prototype,{then:function(e,t){var n=A(g(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?I.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),s=function(){var e=new i;this.promise=e,this.resolve=c(U,e,1),this.reject=c(j,e,1)},_.f=A=function(e){return e===P||e===o?new s(e):r(e)}),h(h.G+h.W+h.F*!R,{Promise:P}),n(5727)(P,C),n(9766)(C),o=n(66).Promise,h(h.S+h.F*!R,C,{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(a||!R),C,{resolve:function(e){return T(a&&this===o?P:this,e)}}),h(h.S+h.F*!(R&&n(3143)((function(e){P.all(e).catch(N)}))),C,{all:function(e){var t=this,n=A(t),i=n.resolve,r=n.reject,s=b((function(){var n=[],s=0,o=1;m(e,!1,(function(e){var a=s++,l=!1;n.push(void 0),o++,t.resolve(e).then((function(e){l||(l=!0,n[a]=e,--o||i(n))}),r)})),--o||i(n)}));return s.e&&r(s.v),n.promise},race:function(e){var t=this,n=A(t),i=n.reject,r=b((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,i)}))}));return r.e&&i(r.v),n.promise}})},1335:function(e,t,n){var i=n(5772),r=n(2761),s=n(6365),o=(n(8113).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!n(8625)((function(){o((function(){}))})),"Reflect",{apply:function(e,t,n){var i=r(e),l=s(n);return o?o(i,t,l):a.call(i,t,l)}})},2603:function(e,t,n){var i=n(5772),r=n(2897),s=n(2761),o=n(6365),a=n(7334),l=n(8625),c=n(9337),u=(n(8113).Reflect||{}).construct,h=l((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),d=!l((function(){u((function(){}))}));i(i.S+i.F*(h||d),"Reflect",{construct:function(e,t){s(e),o(t);var n=arguments.length<3?e:s(arguments[2]);if(d&&!h)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(c.apply(e,i))}var l=n.prototype,p=r(a(l)?l:Object.prototype),f=Function.apply.call(e,p,t);return a(f)?f:p}})},4460:function(e,t,n){var i=n(8558),r=n(5772),s=n(6365),o=n(1382);r(r.S+r.F*n(8625)((function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){s(e),t=o(t,!0),s(n);try{return i.f(e,t,n),!0}catch(e){return!1}}})},5970:function(e,t,n){var i=n(5772),r=n(4662).f,s=n(6365);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(s(e),t);return!(n&&!n.configurable)&&delete e[t]}})},4288:function(e,t,n){"use strict";var i=n(5772),r=n(6365),s=function(e){this._t=r(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(6445)(s,"Object",(function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}})),i(i.S,"Reflect",{enumerate:function(e){return new s(e)}})},4613:function(e,t,n){var i=n(4662),r=n(5772),s=n(6365);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(s(e),t)}})},122:function(e,t,n){var i=n(5772),r=n(9002),s=n(6365);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(s(e))}})},2039:function(e,t,n){var i=n(4662),r=n(9002),s=n(4040),o=n(5772),a=n(7334),l=n(6365);o(o.S,"Reflect",{get:function e(t,n){var o,c,u=arguments.length<3?t:arguments[2];return l(t)===u?t[n]:(o=i.f(t,n))?s(o,"value")?o.value:void 0!==o.get?o.get.call(u):void 0:a(c=r(t))?e(c,n,u):void 0}})},9484:function(e,t,n){var i=n(5772);i(i.S,"Reflect",{has:function(e,t){return t in e}})},1014:function(e,t,n){var i=n(5772),r=n(6365),s=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),!s||s(e)}})},7150:function(e,t,n){var i=n(5772);i(i.S,"Reflect",{ownKeys:n(6831)})},8982:function(e,t,n){var i=n(5772),r=n(6365),s=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return s&&s(e),!0}catch(e){return!1}}})},8633:function(e,t,n){var i=n(5772),r=n(6095);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(e){return!1}}})},8868:function(e,t,n){var i=n(8558),r=n(4662),s=n(9002),o=n(4040),a=n(5772),l=n(6061),c=n(6365),u=n(7334);a(a.S,"Reflect",{set:function e(t,n,a){var h,d,p=arguments.length<4?t:arguments[3],f=r.f(c(t),n);if(!f){if(u(d=s(t)))return e(d,n,a,p);f=l(0)}if(o(f,"value")){if(!1===f.writable||!u(p))return!1;if(h=r.f(p,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=a,i.f(p,n,h)}else i.f(p,n,l(0,a));return!0}return void 0!==f.set&&(f.set.call(p,a),!0)}})},5506:function(e,t,n){var i=n(8113),r=n(8938),s=n(8558).f,o=n(6604).f,a=n(4587),l=n(4859),c=i.RegExp,u=c,h=c.prototype,d=/a/g,p=/a/g,f=new c(d)!==d;if(n(6628)&&(!f||n(8625)((function(){return p[n(2190)("match")]=!1,c(d)!=d||c(p)==p||"/a/i"!=c(d,"i")})))){c=function(e,t){var n=this instanceof c,i=a(e),s=void 0===t;return!n&&i&&e.constructor===c&&s?e:r(f?new u(i&&!s?e.source:e,t):u((i=e instanceof c)?e.source:e,i&&s?l.call(e):t),n?this:h,c)};for(var m=function(e){e in c||s(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},g=o(u),y=0;g.length>y;)m(g[y++]);h.constructor=c,c.prototype=h,n(7738)(i,"RegExp",c)}n(9766)("RegExp")},5846:function(e,t,n){"use strict";var i=n(3288);n(5772)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},751:function(e,t,n){n(6628)&&"g"!=/./g.flags&&n(8558).f(RegExp.prototype,"flags",{configurable:!0,get:n(4859)})},4828:function(e,t,n){"use strict";var i=n(6365),r=n(6078),s=n(8492),o=n(2404);n(8897)("match",1,(function(e,t,n,a){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=a(n,e,this);if(t.done)return t.value;var l=i(e),c=String(this);if(!l.global)return o(l,c);var u=l.unicode;l.lastIndex=0;for(var h,d=[],p=0;null!==(h=o(l,c));){var f=String(h[0]);d[p]=f,""===f&&(l.lastIndex=s(c,r(l.lastIndex),u)),p++}return 0===p?null:d}]}))},4208:function(e,t,n){"use strict";var i=n(6365),r=n(6033),s=n(6078),o=n(3338),a=n(8492),l=n(2404),c=Math.max,u=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(8897)("replace",2,(function(e,t,n,f){return[function(i,r){var s=e(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,s,r):n.call(String(s),i,r)},function(e,t){var r=f(n,e,this,t);if(r.done)return r.value;var h=i(e),d=String(this),p="function"==typeof t;p||(t=String(t));var g=h.global;if(g){var y=h.unicode;h.lastIndex=0}for(var v=[];;){var _=l(h,d);if(null===_)break;if(v.push(_),!g)break;""===String(_[0])&&(h.lastIndex=a(d,s(h.lastIndex),y))}for(var b,w="",T=0,C=0;C<v.length;C++){_=v[C];for(var k=String(_[0]),I=c(u(o(_.index),d.length),0),S=[],E=1;E<_.length;E++)S.push(void 0===(b=_[E])?b:String(b));var P=_.groups;if(p){var x=[k].concat(S,I,d);void 0!==P&&x.push(P);var N=String(t.apply(void 0,x))}else N=m(k,d,I,S,P,t);I>=T&&(w+=d.slice(T,I)+N,T=I+k.length)}return w+d.slice(T)}];function m(e,t,i,s,o,a){var l=i+e.length,c=s.length,u=p;return void 0!==o&&(o=r(o),u=d),n.call(a,u,(function(n,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(l);case"<":a=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return n;if(u>c){var d=h(u/10);return 0===d?n:d<=c?void 0===s[d-1]?r.charAt(1):s[d-1]+r.charAt(1):n}a=s[u-1]}return void 0===a?"":a}))}}))},2679:function(e,t,n){"use strict";var i=n(6365),r=n(339),s=n(2404);n(8897)("search",1,(function(e,t,n,o){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=o(n,e,this);if(t.done)return t.value;var a=i(e),l=String(this),c=a.lastIndex;r(c,0)||(a.lastIndex=0);var u=s(a,l);return r(a.lastIndex,c)||(a.lastIndex=c),null===u?-1:u.index}]}))},9236:function(e,t,n){"use strict";var i=n(4587),r=n(6365),s=n(1987),o=n(8492),a=n(6078),l=n(2404),c=n(3288),u=n(8625),h=Math.min,d=[].push,p=4294967295,f=!u((function(){RegExp(p,"y")}));n(8897)("split",2,(function(e,t,n,u){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(r,e,t);for(var s,o,a,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,f=void 0===t?p:t>>>0,m=new RegExp(e.source,u+"g");(s=c.call(m,r))&&!((o=m.lastIndex)>h&&(l.push(r.slice(h,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),a=s[0].length,h=o,l.length>=f));)m.lastIndex===s.index&&m.lastIndex++;return h===r.length?!a&&m.test("")||l.push(""):l.push(r.slice(h)),l.length>f?l.slice(0,f):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,i){var r=e(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,r,i):m.call(String(r),n,i)},function(e,t){var i=u(m,e,this,t,m!==n);if(i.done)return i.value;var c=r(e),d=String(this),g=s(c,RegExp),y=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(f?"y":"g"),_=new g(f?c:"^(?:"+c.source+")",v),b=void 0===t?p:t>>>0;if(0===b)return[];if(0===d.length)return null===l(_,d)?[d]:[];for(var w=0,T=0,C=[];T<d.length;){_.lastIndex=f?T:0;var k,I=l(_,f?d:d.slice(T));if(null===I||(k=h(a(_.lastIndex+(f?0:T)),d.length))===w)T=o(d,T,y);else{if(C.push(d.slice(w,T)),C.length===b)return C;for(var S=1;S<=I.length-1;S++)if(C.push(I[S]),C.length===b)return C;T=w=k}}return C.push(d.slice(w)),C}]}))},4321:function(e,t,n){"use strict";n(751);var i=n(6365),r=n(4859),s=n(6628),o="toString",a=/./.toString,l=function(e){n(7738)(RegExp.prototype,o,e,!0)};n(8625)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?l((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?r.call(e):void 0)})):a.name!=o&&l((function(){return a.call(this)}))},8392:function(e,t,n){"use strict";var i=n(8156),r=n(9060);e.exports=n(7611)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(r(this,"Set"),e=0===e?0:e,e)}},i)},513:function(e,t,n){"use strict";n(5776)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},4186:function(e,t,n){"use strict";n(5776)("big",(function(e){return function(){return e(this,"big","","")}}))},5502:function(e,t,n){"use strict";n(5776)("blink",(function(e){return function(){return e(this,"blink","","")}}))},6213:function(e,t,n){"use strict";n(5776)("bold",(function(e){return function(){return e(this,"b","","")}}))},516:function(e,t,n){"use strict";var i=n(5772),r=n(2070)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},427:function(e,t,n){"use strict";var i=n(5772),r=n(6078),s=n(465),o="endsWith",a="".endsWith;i(i.P+i.F*n(6570)(o),"String",{endsWith:function(e){var t=s(this,e,o),n=arguments.length>1?arguments[1]:void 0,i=r(t.length),l=void 0===n?i:Math.min(r(n),i),c=String(e);return a?a.call(t,c,l):t.slice(l-c.length,l)===c}})},9457:function(e,t,n){"use strict";n(5776)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},9876:function(e,t,n){"use strict";n(5776)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},9772:function(e,t,n){"use strict";n(5776)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},2763:function(e,t,n){var i=n(5772),r=n(8615),s=String.fromCharCode,o=String.fromCodePoint;i(i.S+i.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,o=0;i>o;){if(t=+arguments[o++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?s(t):s(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},3777:function(e,t,n){"use strict";var i=n(5772),r=n(465),s="includes";i(i.P+i.F*n(6570)(s),"String",{includes:function(e){return!!~r(this,e,s).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},7174:function(e,t,n){"use strict";n(5776)("italics",(function(e){return function(){return e(this,"i","","")}}))},7472:function(e,t,n){"use strict";var i=n(2070)(!0);n(1195)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})}))},5251:function(e,t,n){"use strict";n(5776)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},1711:function(e,t,n){var i=n(5772),r=n(5703),s=n(6078);i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=s(t.length),i=arguments.length,o=[],a=0;n>a;)o.push(String(t[a++])),a<i&&o.push(String(arguments[a]));return o.join("")}})},7238:function(e,t,n){var i=n(5772);i(i.P,"String",{repeat:n(7160)})},7984:function(e,t,n){"use strict";n(5776)("small",(function(e){return function(){return e(this,"small","","")}}))},5942:function(e,t,n){"use strict";var i=n(5772),r=n(6078),s=n(465),o="startsWith",a="".startsWith;i(i.P+i.F*n(6570)(o),"String",{startsWith:function(e){var t=s(this,e,o),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return a?a.call(t,i,n):t.slice(n,n+i.length)===i}})},3359:function(e,t,n){"use strict";n(5776)("strike",(function(e){return function(){return e(this,"strike","","")}}))},195:function(e,t,n){"use strict";n(5776)("sub",(function(e){return function(){return e(this,"sub","","")}}))},8586:function(e,t,n){"use strict";n(5776)("sup",(function(e){return function(){return e(this,"sup","","")}}))},183:function(e,t,n){"use strict";n(8487)("trim",(function(e){return function(){return e(this,3)}}))},9823:function(e,t,n){"use strict";var i=n(8113),r=n(4040),s=n(6628),o=n(5772),a=n(7738),l=n(998).KEY,c=n(8625),u=n(8655),h=n(5727),d=n(5078),p=n(2190),f=n(9669),m=n(5660),g=n(7820),y=n(9141),v=n(6365),_=n(7334),b=n(6033),w=n(5703),T=n(1382),C=n(6061),k=n(2897),I=n(5259),S=n(4662),E=n(7957),P=n(8558),x=n(2912),N=S.f,A=P.f,R=I.f,O=i.Symbol,M=i.JSON,L=M&&M.stringify,D=p("_hidden"),F=p("toPrimitive"),j={}.propertyIsEnumerable,U=u("symbol-registry"),q=u("symbols"),$=u("op-symbols"),V=Object.prototype,H="function"==typeof O&&!!E.f,W=i.QObject,z=!W||!W.prototype||!W.prototype.findChild,B=s&&c((function(){return 7!=k(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=N(V,t);i&&delete V[t],A(e,t,n),i&&e!==V&&A(V,t,i)}:A,G=function(e){var t=q[e]=k(O.prototype);return t._k=e,t},K=H&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Y=function(e,t,n){return e===V&&Y($,t,n),v(e),t=T(t,!0),v(n),r(q,t)?(n.enumerable?(r(e,D)&&e[D][t]&&(e[D][t]=!1),n=k(n,{enumerable:C(0,!1)})):(r(e,D)||A(e,D,C(1,{})),e[D][t]=!0),B(e,t,n)):A(e,t,n)},J=function(e,t){v(e);for(var n,i=g(t=w(t)),r=0,s=i.length;s>r;)Y(e,n=i[r++],t[n]);return e},Q=function(e){var t=j.call(this,e=T(e,!0));return!(this===V&&r(q,e)&&!r($,e))&&(!(t||!r(this,e)||!r(q,e)||r(this,D)&&this[D][e])||t)},X=function(e,t){if(e=w(e),t=T(t,!0),e!==V||!r(q,t)||r($,t)){var n=N(e,t);return!n||!r(q,t)||r(e,D)&&e[D][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=R(w(e)),i=[],s=0;n.length>s;)r(q,t=n[s++])||t==D||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===V,i=R(n?$:w(e)),s=[],o=0;i.length>o;)!r(q,t=i[o++])||n&&!r(V,t)||s.push(q[t]);return s};H||(a((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call($,n),r(this,D)&&r(this[D],e)&&(this[D][e]=!1),B(this,e,C(1,n))};return s&&z&&B(V,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),S.f=X,P.f=Y,n(6604).f=I.f=Z,n(5873).f=Q,E.f=ee,s&&!n(1422)&&a(V,"propertyIsEnumerable",Q,!0),f.f=function(e){return G(p(e))}),o(o.G+o.W+o.F*!H,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var ie=x(p.store),re=0;ie.length>re;)m(ie[re++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return r(U,e+="")?U[e]:U[e]=O(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!H,"Object",{create:function(e,t){return void 0===t?k(e):J(k(e),t)},defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var se=c((function(){E.f(1)}));o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function(e){return E.f(b(e))}}),M&&o(o.S+o.F*(!H||c((function(){var e=O();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(_(t)||void 0!==e)&&!K(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),i[1]=t,L.apply(M,i)}}),O.prototype[F]||n(4216)(O.prototype,F,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},345:function(e,t,n){"use strict";var i=n(5772),r=n(5949),s=n(4972),o=n(6365),a=n(8615),l=n(6078),c=n(7334),u=n(8113).ArrayBuffer,h=n(1987),d=s.ArrayBuffer,p=s.DataView,f=r.ABV&&u.isView,m=d.prototype.slice,g=r.VIEW,y="ArrayBuffer";i(i.G+i.W+i.F*(u!==d),{ArrayBuffer:d}),i(i.S+i.F*!r.CONSTR,y,{isView:function(e){return f&&f(e)||c(e)&&g in e}}),i(i.P+i.U+i.F*n(8625)((function(){return!new d(2).slice(1,void 0).byteLength})),y,{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(o(this),e);for(var n=o(this).byteLength,i=a(e,n),r=a(void 0===t?n:t,n),s=new(h(this,d))(l(r-i)),c=new p(this),u=new p(s),f=0;i<r;)u.setUint8(f++,c.getUint8(i++));return s}}),n(9766)(y)},8460:function(e,t,n){var i=n(5772);i(i.G+i.W+i.F*!n(5949).ABV,{DataView:n(4972).DataView})},3149:function(e,t,n){n(7978)("Float32",4,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},4637:function(e,t,n){n(7978)("Float64",8,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},3958:function(e,t,n){n(7978)("Int16",2,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},5469:function(e,t,n){n(7978)("Int32",4,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},6788:function(e,t,n){n(7978)("Int8",1,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},1592:function(e,t,n){n(7978)("Uint16",2,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},6471:function(e,t,n){n(7978)("Uint32",4,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},6780:function(e,t,n){n(7978)("Uint8",1,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},3620:function(e,t,n){n(7978)("Uint8",1,(function(e){return function(t,n,i){return e(this,t,n,i)}}),!0)},773:function(e,t,n){"use strict";var i,r=n(8113),s=n(8309)(0),o=n(7738),a=n(998),l=n(7029),c=n(6339),u=n(7334),h=n(9060),d=n(9060),p=!r.ActiveXObject&&"ActiveXObject"in r,f="WeakMap",m=a.getWeak,g=Object.isExtensible,y=c.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(e){if(u(e)){var t=m(e);return!0===t?y(h(this,f)).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(h(this,f),e,t)}},b=e.exports=n(7611)(f,v,_,c,!0,!0);d&&p&&(l((i=c.getConstructor(v,f)).prototype,_),a.NEED=!0,s(["delete","has","get","set"],(function(e){var t=b.prototype,n=t[e];o(t,e,(function(t,r){if(u(t)&&!g(t)){this._f||(this._f=new i);var s=this._f[e](t,r);return"set"==e?this:s}return n.call(this,t,r)}))})))},3623:function(e,t,n){"use strict";var i=n(6339),r=n(9060),s="WeakSet";n(7611)(s,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(r(this,s),e,!0)}},i,!1,!0)},7328:function(e,t,n){"use strict";var i=n(5772),r=n(2674),s=n(6033),o=n(6078),a=n(2761),l=n(3531);i(i.P,"Array",{flatMap:function(e){var t,n,i=s(this);return a(e),t=o(i.length),n=l(i,0),r(n,i,i,t,0,1,e,arguments[1]),n}}),n(2094)("flatMap")},8081:function(e,t,n){"use strict";var i=n(5772),r=n(9021)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(2094)("includes")},9716:function(e,t,n){var i=n(5772),r=n(758)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},7453:function(e,t,n){var i=n(5772),r=n(6831),s=n(5703),o=n(4662),a=n(6644);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=s(e),l=o.f,c=r(i),u={},h=0;c.length>h;)void 0!==(n=l(i,t=c[h++]))&&a(u,t,n);return u}})},27:function(e,t,n){var i=n(5772),r=n(758)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},6632:function(e,t,n){"use strict";var i=n(5772),r=n(66),s=n(8113),o=n(1987),a=n(5151);i(i.P+i.R,"Promise",{finally:function(e){var t=o(this,r.Promise||s.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then((function(){return n}))}:e,n?function(n){return a(t,e()).then((function(){throw n}))}:e)}})},8302:function(e,t,n){"use strict";var i=n(5772),r=n(6283),s=n(5822),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s);i(i.P+i.F*o,"String",{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},9447:function(e,t,n){"use strict";var i=n(5772),r=n(6283),s=n(5822),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s);i(i.P+i.F*o,"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},9324:function(e,t,n){"use strict";n(8487)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},152:function(e,t,n){"use strict";n(8487)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},3756:function(e,t,n){n(5660)("asyncIterator")},3085:function(e,t,n){for(var i=n(7680),r=n(2912),s=n(7738),o=n(8113),a=n(4216),l=n(3988),c=n(2190),u=c("iterator"),h=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),m=0;m<f.length;m++){var g,y=f[m],v=p[y],_=o[y],b=_&&_.prototype;if(b&&(b[u]||a(b,u,d),b[h]||a(b,h,y),l[y]=d,v))for(g in i)b[g]||s(b,g,i[g],!0)}},6282:function(e,t,n){var i=n(5772),r=n(9124);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},6252:function(e,t,n){var i=n(8113),r=n(5772),s=n(5822),o=[].slice,a=/MSIE .\./.test(s),l=function(e){return function(t,n){var i=arguments.length>2,r=!!i&&o.call(arguments,2);return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};r(r.G+r.B+r.F*a,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},1497:function(e,t,n){n(6252),n(6282),n(3085),e.exports=n(66)},8052:function(e,t,n){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o={addCSS:!0,thumbWidth:15,watch:!0};function a(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var l=function(e){return null!=e?e.constructor:null},c=function(e,t){return!!(e&&t&&e instanceof t)},u=function(e){return l(e)===String},h=function(e){return Array.isArray(e)},d=function(e){return c(e,NodeList)},p=u,f=h,m=d,g=function(e){return c(e,Element)},y=function(e){return c(e,Event)},v=function(e){return function(e){return null==e}(e)||(u(e)||h(e)||d(e))&&!e.length||function(e){return l(e)===Object}(e)&&!Object.keys(e).length};var _=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),g(t)?this.element=t:p(t)&&(this.element=document.querySelector(t)),g(this.element)&&v(this.element.rangeTouch)&&(this.config=s({},o,{},n),this.init())}return function(e,n,i){n&&t(e.prototype,n),i&&t(e,i)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!y(t))return null;var n,i=t.target,r=t.changedTouches[0],s=parseFloat(i.getAttribute("min"))||0,o=parseFloat(i.getAttribute("max"))||100,a=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(r.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),s+function(e,t){if(1>t){var n=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}(n/100*(o-s),a)}},{key:"set",value:function(t){e.enabled&&y(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(v(t)||p(t)?i=Array.from(document.querySelectorAll(p(t)?t:'input[type="range"]')):g(t)?i=[t]:m(t)?i=Array.from(t):f(t)&&(i=t.filter(g)),v(i))return null;var r=s({},o,{},n);return p(t)&&r.watch&&new MutationObserver((function(n){Array.from(n).forEach((function(n){Array.from(n.addedNodes).forEach((function(n){g(n)&&a(n,t)&&new e(n,r)}))}))})).observe(document.body,{childList:!0,subtree:!0}),i.map((function(t){return new e(t,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const b=e=>null!=e?e.constructor:null,w=(e,t)=>Boolean(e&&t&&e instanceof t),T=e=>null==e,C=e=>b(e)===Object,k=e=>b(e)===String,I=e=>b(e)===Function,S=e=>Array.isArray(e),E=e=>w(e,NodeList),P=e=>T(e)||(k(e)||S(e)||E(e))&&!e.length||C(e)&&!Object.keys(e).length;var x=T,N=C,A=e=>b(e)===Number&&!Number.isNaN(e),R=k,O=e=>b(e)===Boolean,M=I,L=S,D=E,F=e=>null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument,j=e=>w(e,Event),U=e=>w(e,KeyboardEvent),q=e=>w(e,TextTrack)||!T(e)&&k(e.kind),$=e=>{if(w(e,window.URL))return!0;if(!k(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!P(new URL(t).hostname)}catch(e){return!1}},V=P;const H=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(t).find((t=>void 0!==e.style[t]));return!!R(n)&&t[n]})();function W(e,t){setTimeout((()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}const z={isIE:Boolean(window.document.documentMode),isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function B(e,t){return t.split(".").reduce(((e,t)=>e&&e[t]),e)}function G(e={},...t){if(!t.length)return e;const n=t.shift();return N(n)?(Object.keys(n).forEach((t=>{N(n[t])?(Object.keys(e).includes(t)||Object.assign(e,{[t]:{}}),G(e[t],n[t])):Object.assign(e,{[t]:n[t]})})),G(e,...t)):e}function K(e,t){const n=e.length?e:[e];Array.from(n).reverse().forEach(((e,n)=>{const i=n>0?t.cloneNode(!0):t,r=e.parentNode,s=e.nextSibling;i.appendChild(e),s?r.insertBefore(i,s):r.appendChild(i)}))}function Y(e,t){F(e)&&!V(t)&&Object.entries(t).filter((([,e])=>!x(e))).forEach((([t,n])=>e.setAttribute(t,n)))}function J(e,t,n){const i=document.createElement(e);return N(t)&&Y(i,t),R(n)&&(i.innerText=n),i}function Q(e,t,n,i){F(t)&&t.appendChild(J(e,n,i))}function X(e){D(e)||L(e)?Array.from(e).forEach(X):F(e)&&F(e.parentNode)&&e.parentNode.removeChild(e)}function Z(e){if(!F(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function ee(e,t){return F(t)&&F(t.parentNode)&&F(e)?(t.parentNode.replaceChild(e,t),e):null}function te(e,t){if(!R(e)||V(e))return{};const n={},i=G({},t);return e.split(",").forEach((e=>{const t=e.trim(),r=t.replace(".",""),s=t.replace(/[[\]]/g,"").split("="),[o]=s,a=s.length>1?s[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":R(i.class)?n.class=`${i.class} ${r}`:n.class=r;break;case"#":n.id=t.replace("#","");break;case"[":n[o]=a}})),G(i,n)}function ne(e,t){if(!F(e))return;let n=t;O(n)||(n=!e.hidden),e.hidden=n}function ie(e,t,n){if(D(e))return Array.from(e).map((e=>ie(e,t,n)));if(F(e)){let i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return!1}function re(e,t){return F(e)&&e.classList.contains(t)}function se(e,t){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function oe(e){return this.elements.container.querySelectorAll(e)}function ae(e){return this.elements.container.querySelector(e)}function le(e=null,t=!1){F(e)&&(e.focus({preventScroll:!0}),t&&ie(e,this.config.classNames.tabFocus))}const ce={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},ue={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t,n){const i=z.isIPhone&&n&&ue.playsinline,r=ue[e]||"html5"!==t;return{api:r,ui:r&&ue.rangeInput&&("video"!==e||!z.isIPhone||i)}},pip:!(z.isIPhone||!M(J("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||J("video").disablePictureInPicture)),airplay:M(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(V(e))return!1;const[t]=e.split("/");let n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ce).includes(n)&&(n+=`; codecs="${ce[e]}"`);try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range","range"===e.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==H,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},he=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e})();function de(e,t,n,i=!1,r=!0,s=!1){if(!e||!("addEventListener"in e)||V(t)||!M(n))return;const o=t.split(" ");let a=s;he&&(a={passive:r,capture:s}),o.forEach((t=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:e,type:t,callback:n,options:a}),e[i?"addEventListener":"removeEventListener"](t,n,a)}))}function pe(e,t="",n,i=!0,r=!1){de.call(this,e,t,n,!0,i,r)}function fe(e,t="",n,i=!0,r=!1){de.call(this,e,t,n,!1,i,r)}function me(e,t="",n,i=!0,r=!1){const s=(...o)=>{fe(e,t,s,i,r),n.apply(this,o)};de.call(this,e,t,s,!0,i,r)}function ge(e,t="",n=!1,i={}){if(!F(e)||V(t))return;const r=new CustomEvent(t,{bubbles:n,detail:{...i,plyr:this}});e.dispatchEvent(r)}function ye(){this&&this.eventListeners&&(this.eventListeners.forEach((e=>{const{element:t,type:n,callback:i,options:r}=e;t.removeEventListener(n,i,r)})),this.eventListeners=[])}function ve(){return new Promise((e=>this.ready?setTimeout(e,0):pe.call(this,this.elements.container,"ready",e))).then((()=>{}))}function _e(e){(e=>w(e,Promise)&&I(e.then))(e)&&e.then(null,(()=>{}))}function be(e){return L(e)?e.filter(((t,n)=>e.indexOf(t)===n)):e}function we(e,t){return L(e)&&e.length?e.reduce(((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e)):null}function Te(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const Ce=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce(((e,[t,n])=>({...e,[t/n]:[t,n]})),{});function ke(e){return!!(L(e)||R(e)&&e.includes(":"))&&(L(e)?e:e.split(":")).map(Number).every(A)}function Ie(e){if(!L(e)||!e.every(A))return null;const[t,n]=e,i=(e,t)=>0===t?e:i(t,e%t),r=i(t,n);return[t/r,n/r]}function Se(e){const t=e=>ke(e)?e.split(":").map(Number):null;let n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!V(this.embed)&&L(this.embed.ratio)&&({ratio:n}=this.embed),null===n&&this.isHTML5){const{videoWidth:e,videoHeight:t}=this.media;n=[e,t]}return Ie(n)}function Ee(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,n=Se.call(this,e);if(!L(n))return{};const[i,r]=Ie(n),s=100/i*r;if(Te(`aspect-ratio: ${i}/${r}`)?t.style.aspectRatio=`${i}/${r}`:t.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const e=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),n=(e-s)/(e/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${n}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function Pe(e,t,n=.05){const i=e/t,r=we(Object.keys(Ce),i);return Math.abs(r-i)<=n?Ce[r]:[e,t]}const xe={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((e=>{const t=e.getAttribute("type");return!!V(t)||ue.mime.call(this,t)})):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:xe.getSources.call(this).map((e=>Number(e.getAttribute("size")))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,V(this.config.ratio)||Ee.call(e),Object.defineProperty(e.media,"quality",{get(){const t=xe.getSources.call(e).find((t=>t.getAttribute("src")===e.source));return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&M(e.config.quality.onChange))e.config.quality.onChange(t);else{const n=xe.getSources.call(e).find((e=>Number(e.getAttribute("size"))===t));if(!n)return;const{currentTime:i,paused:r,preload:s,readyState:o,playbackRate:a}=e.media;e.media.src=n.getAttribute("src"),("none"!==s||o)&&(e.once("loadedmetadata",(()=>{e.speed=a,e.currentTime=i,r||_e(e.play())})),e.media.load())}ge.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(X(xe.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ne(e,...t){return V(e)?e:e.toString().replace(/{(\d+)}/g,((e,n)=>t[n].toString()))}const Ae=(e="",t="",n="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),Re=(e="")=>e.toString().replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()));function Oe(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const Me={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Le={get(e="",t={}){if(V(e)||V(t))return"";let n=B(t.i18n,e);if(V(n))return Object.keys(Me).includes(e)?Me[e]:"";const i={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(i).forEach((([e,t])=>{n=Ae(n,e,t)})),n}};class De{constructor(t){e(this,"get",(e=>{if(!De.supported||!this.enabled)return null;const t=window.localStorage.getItem(this.key);if(V(t))return null;const n=JSON.parse(t);return R(e)&&e.length?n[e]:n})),e(this,"set",(e=>{if(!De.supported||!this.enabled)return;if(!N(e))return;let t=this.get();V(t)&&(t={}),G(t,e),window.localStorage.setItem(this.key,JSON.stringify(t))})),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}function Fe(e,t="text"){return new Promise(((n,i)=>{try{const i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",(()=>{if("text"===t)try{n(JSON.parse(i.responseText))}catch(e){n(i.responseText)}else n(i.response)})),i.addEventListener("error",(()=>{throw new Error(i.status)})),i.open("GET",e,!0),i.responseType=t,i.send()}catch(e){i(e)}}))}function je(e,t){if(!R(e))return;const n=R(t);let i=!1;const r=()=>null!==document.getElementById(t),s=(e,t)=>{e.innerHTML=t,n&&r()||document.body.insertAdjacentElement("afterbegin",e)};if(!n||!r()){const r=De.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),n&&o.setAttribute("id",t),r){const e=window.localStorage.getItem(`cache-${t}`);if(i=null!==e,i){const t=JSON.parse(e);s(o,t.content)}}Fe(e).then((e=>{V(e)||(r&&window.localStorage.setItem(`cache-${t}`,JSON.stringify({content:e})),s(o,e))})).catch((()=>{}))}}const Ue=e=>Math.trunc(e/60/60%60,10);function qe(e=0,t=!1,n=!1){if(!A(e))return qe(void 0,t,n);const i=e=>`0${e}`.slice(-2);let r=Ue(e);const s=(o=e,Math.trunc(o/60%60,10));var o;const a=(e=>Math.trunc(e%60,10))(e);return r=t||r>0?`${r}:`:"",`${n&&e>0?"-":""}${r}${i(s)}:${i(a)}`}const $e={getIconUrl(){const e=new URL(this.config.iconUrl,window.location).host!==window.location.host||z.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements(){try{return this.elements.controls=ae.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:oe.call(this,this.config.selectors.buttons.play),pause:ae.call(this,this.config.selectors.buttons.pause),restart:ae.call(this,this.config.selectors.buttons.restart),rewind:ae.call(this,this.config.selectors.buttons.rewind),fastForward:ae.call(this,this.config.selectors.buttons.fastForward),mute:ae.call(this,this.config.selectors.buttons.mute),pip:ae.call(this,this.config.selectors.buttons.pip),airplay:ae.call(this,this.config.selectors.buttons.airplay),settings:ae.call(this,this.config.selectors.buttons.settings),captions:ae.call(this,this.config.selectors.buttons.captions),fullscreen:ae.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ae.call(this,this.config.selectors.progress),this.elements.inputs={seek:ae.call(this,this.config.selectors.inputs.seek),volume:ae.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ae.call(this,this.config.selectors.display.buffer),currentTime:ae.call(this,this.config.selectors.display.currentTime),duration:ae.call(this,this.config.selectors.display.duration)},F(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const n="http://www.w3.org/2000/svg",i=$e.getIconUrl.call(this),r=`${i.cors?"":i.url}#${this.config.iconPrefix}`,s=document.createElementNS(n,"svg");Y(s,G(t,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(n,"use"),a=`${r}-${e}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.appendChild(o),s},createLabel(e,t={}){const n=Le.get(e,this.config);return J("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(e){if(V(e))return null;const t=J("span",{class:this.config.classNames.menu.value});return t.appendChild(J("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const n=G({},t);let i=function(e=""){let t=e.toString();return t=function(e=""){let t=e.toString();return t=Ae(t,"-"," "),t=Ae(t,"_"," "),t=Re(t),Ae(t," ","")}(t),t.charAt(0).toLowerCase()+t.slice(1)}(e);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((e=>{Object.keys(n).includes(e)&&(r[e]=n[e],delete n[e])})),"button"!==r.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((e=>e===this.config.classNames.control))||G(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,e){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,i="play",r.label="play",r.icon="play";break;default:V(r.label)&&(r.label=i),V(r.icon)&&(r.icon=e)}const s=J(r.element);return r.toggle?(s.appendChild($e.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild($e.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild($e.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild($e.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild($e.createIcon.call(this,r.icon)),s.appendChild($e.createLabel.call(this,r.label))),G(n,te(this.config.selectors.buttons[i],n)),Y(s,n),"play"===i?(L(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(s)):this.elements.buttons[i]=s,s},createRange(e,t){const n=J("input",G(te(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Le.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,$e.updateRangeFill.call(this,n),_.setup(n),n},createProgress(e,t){const n=J("progress",G(te(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(J("span",null,"0"));const t={played:"played",buffer:"buffered"}[e],i=t?Le.get(t,this.config):"";n.innerText=`% ${i.toLowerCase()}`}return this.elements.display[e]=n,n},createTime(e,t){const n=te(this.config.selectors.display[e],t),i=J("div",G(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Le.get(e,this.config)}),"00:00");return this.elements.display[e]=i,i},bindMenuItemShortcuts(e,t){pe.call(this,e,"keydown keyup",(n=>{if(![32,38,39,40].includes(n.which))return;if(n.preventDefault(),n.stopPropagation(),"keydown"===n.type)return;const i=se(e,'[role="menuitemradio"]');if(!i&&[32,39].includes(n.which))$e.showMenuPanel.call(this,t,!0);else{let t;32!==n.which&&(40===n.which||i&&39===n.which?(t=e.nextElementSibling,F(t)||(t=e.parentNode.firstElementChild)):(t=e.previousElementSibling,F(t)||(t=e.parentNode.lastElementChild)),le.call(this,t,!0))}}),!1),pe.call(this,e,"keyup",(e=>{13===e.which&&$e.focusFirstMenuItem.call(this,null,!0)}))},createMenuItem({value:e,list:t,type:n,title:i,badge:r=null,checked:s=!1}){const o=te(this.config.selectors.inputs[n]),a=J("button",G(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":s,value:e})),l=J("span");l.innerHTML=i,F(r)&&l.appendChild(r),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>"true"===a.getAttribute("aria-checked"),set(e){e&&Array.from(a.parentNode.children).filter((e=>se(e,'[role="menuitemradio"]'))).forEach((e=>e.setAttribute("aria-checked","false"))),a.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(a,"click keyup",(t=>{if(!U(t)||32===t.which){switch(t.preventDefault(),t.stopPropagation(),a.checked=!0,n){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}$e.showMenuPanel.call(this,"home",U(t))}}),n,!1),$e.bindMenuItemShortcuts.call(this,a,n),t.appendChild(a)},formatTime(e=0,t=!1){return A(e)?qe(e,Ue(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,n=!1){F(e)&&A(t)&&(e.innerText=$e.formatTime(t,n))},updateVolume(){this.supported.ui&&(F(this.elements.inputs.volume)&&$e.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),F(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(e,t=0){F(e)&&(e.value=t,$e.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!j(e))return;let t=0;const n=(e,t)=>{const n=A(t)?t:0,i=F(e)?e:this.elements.display.buffer;if(F(i)){i.value=n;const e=i.getElementsByTagName("span")[0];F(e)&&(e.childNodes[0].nodeValue=n)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":i=this.currentTime,r=this.duration,t=0===i||0===r||Number.isNaN(i)||Number.isNaN(r)?0:(i/r*100).toFixed(2),"timeupdate"===e.type&&$e.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}var i,r},updateRangeFill(e){const t=j(e)?e.target:e;if(F(t)&&"range"===t.getAttribute("type")){if(se(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const e=$e.formatTime(this.currentTime),n=$e.formatTime(this.duration),i=Le.get("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",e).replace("{duration}",n))}else if(se(t,this.config.selectors.inputs.volume)){const e=100*t.value;t.setAttribute("aria-valuenow",e),t.setAttribute("aria-valuetext",`${e.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);z.isWebkit&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){if(!this.config.tooltips.seek||!F(this.elements.inputs.seek)||!F(this.elements.display.seekTooltip)||0===this.duration)return;const t=`${this.config.classNames.tooltip}--visible`,n=e=>ie(this.elements.display.seekTooltip,t,e);if(this.touch)return void n(!1);let i=0;const r=this.elements.progress.getBoundingClientRect();if(j(e))i=100/r.width*(e.pageX-r.left);else{if(!re(this.elements.display.seekTooltip,t))return;i=parseFloat(this.elements.display.seekTooltip.style.left,10)}i<0?i=0:i>100&&(i=100),$e.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*i),this.elements.display.seekTooltip.style.left=`${i}%`,j(e)&&["mouseenter","mouseleave"].includes(e.type)&&n("mouseenter"===e.type)},timeUpdate(e){const t=!F(this.elements.display.duration)&&this.config.invertTime;$e.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||$e.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return ne(this.elements.display.currentTime,!0),void ne(this.elements.progress,!0);F(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=F(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&$e.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&$e.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),$e.updateSeekTooltip.call(this)},toggleMenuButton(e,t){ne(this.elements.settings.buttons[e],!t)},updateSetting(e,t,n){const i=this.elements.settings.panels[e];let r=null,s=t;if("captions"===e)r=this.currentTrack;else{if(r=V(n)?this[e]:n,V(r)&&(r=this.config[e].default),!V(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${e}`);if(!this.config[e].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${e}`)}if(F(s)||(s=i&&i.querySelector('[role="menu"]')),!F(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=$e.getLabel.call(this,e,r);const o=s&&s.querySelector(`[value="${r}"]`);F(o)&&(o.checked=!0)},getLabel(e,t){switch(e){case"speed":return 1===t?Le.get("normal",this.config):`${t}&times;`;case"quality":if(A(t)){const e=Le.get(`qualityLabel.${t}`,this.config);return e.length?e:`${t}p`}return Re(t);case"captions":return We.getLabel.call(this);default:return null}},setQualityMenu(e){if(!F(this.elements.settings.panels.quality))return;const t="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');L(e)&&(this.options.quality=be(e).filter((e=>this.config.quality.options.includes(e))));const i=!V(this.options.quality)&&this.options.quality.length>1;if($e.toggleMenuButton.call(this,t,i),Z(n),$e.checkMenu.call(this),!i)return;const r=e=>{const t=Le.get(`qualityBadge.${e}`,this.config);return t.length?$e.createBadge.call(this,t):null};this.options.quality.sort(((e,t)=>{const n=this.config.quality.options;return n.indexOf(e)>n.indexOf(t)?1:-1})).forEach((e=>{$e.createMenuItem.call(this,{value:e,list:n,type:t,title:$e.getLabel.call(this,"quality",e),badge:r(e)})})),$e.updateSetting.call(this,t,n)},setCaptionsMenu(){if(!F(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=We.getTracks.call(this),i=Boolean(n.length);if($e.toggleMenuButton.call(this,e,i),Z(t),$e.checkMenu.call(this),!i)return;const r=n.map(((e,n)=>({value:n,checked:this.captions.toggled&&this.currentTrack===n,title:We.getLabel.call(this,e),badge:e.language&&$e.createBadge.call(this,e.language.toUpperCase()),list:t,type:"language"})));r.unshift({value:-1,checked:!this.captions.toggled,title:Le.get("disabled",this.config),list:t,type:"language"}),r.forEach($e.createMenuItem.bind(this)),$e.updateSetting.call(this,e,t)},setSpeedMenu(){if(!F(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((e=>e>=this.minimumSpeed&&e<=this.maximumSpeed));const n=!V(this.options.speed)&&this.options.speed.length>1;$e.toggleMenuButton.call(this,e,n),Z(t),$e.checkMenu.call(this),n&&(this.options.speed.forEach((n=>{$e.createMenuItem.call(this,{value:n,list:t,type:e,title:$e.getLabel.call(this,"speed",n)})})),$e.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!V(e)&&Object.values(e).some((e=>!e.hidden));ne(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let n=e;F(n)||(n=Object.values(this.elements.settings.panels).find((e=>!e.hidden)));const i=n.querySelector('[role^="menuitem"]');le.call(this,i,t)},toggleMenu(e){const{popup:t}=this.elements.settings,n=this.elements.buttons.settings;if(!F(t)||!F(n))return;const{hidden:i}=t;let r=i;if(O(e))r=e;else if(U(e)&&27===e.which)r=!1;else if(j(e)){const i=M(e.composedPath)?e.composedPath()[0]:e.target,s=t.contains(i);if(s||!s&&e.target!==n&&r)return}n.setAttribute("aria-expanded",r),ne(t,!r),ie(this.elements.container,this.config.classNames.menu.open,r),r&&U(e)?$e.focusFirstMenuItem.call(this,null,!0):r||i||le.call(this,n,U(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const n=t.scrollWidth,i=t.scrollHeight;return X(t),{width:n,height:i}},showMenuPanel(e="",t=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!F(n))return;const i=n.parentNode,r=Array.from(i.children).find((e=>!e.hidden));if(ue.transitions&&!ue.reducedMotion){i.style.width=`${r.scrollWidth}px`,i.style.height=`${r.scrollHeight}px`;const e=$e.getMenuSize.call(this,n),t=e=>{e.target===i&&["width","height"].includes(e.propertyName)&&(i.style.width="",i.style.height="",fe.call(this,i,H,t))};pe.call(this,i,H,t),i.style.width=`${e.width}px`,i.style.height=`${e.height}px`}ne(r,!0),ne(n,!1),$e.focusFirstMenuItem.call(this,n,t)},setDownloadUrl(){const e=this.elements.buttons.download;F(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:n,createProgress:i,createRange:r,createTime:s,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=$e;this.elements.controls=null,L(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const c=J("div",te(this.config.selectors.controls.wrapper));this.elements.controls=c;const u={class:"plyr__controls__item"};return be(L(this.config.controls)?this.config.controls:[]).forEach((o=>{if("restart"===o&&c.appendChild(n.call(this,"restart",u)),"rewind"===o&&c.appendChild(n.call(this,"rewind",u)),"play"===o&&c.appendChild(n.call(this,"play",u)),"fast-forward"===o&&c.appendChild(n.call(this,"fast-forward",u)),"progress"===o){const t=J("div",{class:`${u.class} plyr__progress__container`}),n=J("div",te(this.config.selectors.progress));if(n.appendChild(r.call(this,"seek",{id:`plyr-seek-${e.id}`})),n.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const e=J("span",{class:this.config.classNames.tooltip},"00:00");n.appendChild(e),this.elements.display.seekTooltip=e}this.elements.progress=n,t.appendChild(this.elements.progress),c.appendChild(t)}if("current-time"===o&&c.appendChild(s.call(this,"currentTime",u)),"duration"===o&&c.appendChild(s.call(this,"duration",u)),"mute"===o||"volume"===o){let{volume:t}=this.elements;if(F(t)&&c.contains(t)||(t=J("div",G({},u,{class:`${u.class} plyr__volume`.trim()})),this.elements.volume=t,c.appendChild(t)),"mute"===o&&t.appendChild(n.call(this,"mute")),"volume"===o&&!z.isIos){const n={max:1,step:.05,value:this.config.volume};t.appendChild(r.call(this,"volume",G(n,{id:`plyr-volume-${e.id}`})))}}if("captions"===o&&c.appendChild(n.call(this,"captions",u)),"settings"===o&&!V(this.config.settings)){const i=J("div",G({},u,{class:`${u.class} plyr__menu`.trim(),hidden:""}));i.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const r=J("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),s=J("div"),o=J("div",{id:`plyr-settings-${e.id}-home`}),a=J("div",{role:"menu"});o.appendChild(a),s.appendChild(o),this.elements.settings.panels.home=o,this.config.settings.forEach((n=>{const i=J("button",G(te(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,i,n),pe.call(this,i,"click",(()=>{l.call(this,n,!1)}));const r=J("span",null,Le.get(n,this.config)),o=J("span",{class:this.config.classNames.menu.value});o.innerHTML=e[n],r.appendChild(o),i.appendChild(r),a.appendChild(i);const c=J("div",{id:`plyr-settings-${e.id}-${n}`,hidden:""}),u=J("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});u.appendChild(J("span",{"aria-hidden":!0},Le.get(n,this.config))),u.appendChild(J("span",{class:this.config.classNames.hidden},Le.get("menuBack",this.config))),pe.call(this,c,"keydown",(e=>{37===e.which&&(e.preventDefault(),e.stopPropagation(),l.call(this,"home",!0))}),!1),pe.call(this,u,"click",(()=>{l.call(this,"home",!1)})),c.appendChild(u),c.appendChild(J("div",{role:"menu"})),s.appendChild(c),this.elements.settings.buttons[n]=i,this.elements.settings.panels[n]=c})),r.appendChild(s),i.appendChild(r),c.appendChild(i),this.elements.settings.popup=r,this.elements.settings.menu=i}if("pip"===o&&ue.pip&&c.appendChild(n.call(this,"pip",u)),"airplay"===o&&ue.airplay&&c.appendChild(n.call(this,"airplay",u)),"download"===o){const e=G({},u,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(e.download="");const{download:t}=this.config.urls;!$(t)&&this.isEmbed&&G(e,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(n.call(this,"download",e))}"fullscreen"===o&&c.appendChild(n.call(this,"fullscreen",u))})),this.isHTML5&&o.call(this,xe.getQualityOptions.call(this)),a.call(this),c},inject(){if(this.config.loadSprite){const e=$e.getIconUrl.call(this);e.cors&&je(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n,i=!0;if(M(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),F(this.config.controls)||R(this.config.controls)?e=this.config.controls:(e=$e.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:We.getLabel.call(this)}),i=!1),i&&R(this.config.controls)&&(e=(e=>{let n=e;return Object.entries(t).forEach((([e,t])=>{n=Ae(n,`{${e}}`,t)})),n})(e)),R(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),F(n)||(n=this.elements.container),n[F(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),F(this.elements.controls)||$e.findElements.call(this),!V(this.elements.buttons)){const e=e=>{const t=this.config.classNames.controlPressed;Object.defineProperty(e,"pressed",{enumerable:!0,get:()=>re(e,t),set(n=!1){ie(e,t,n)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((t=>{L(t)||D(t)?Array.from(t).filter(Boolean).forEach(e):e(t)}))}if(z.isEdge&&W(n),this.config.tooltips.controls){const{classNames:e,selectors:t}=this.config,n=`${t.controls.wrapper} ${t.labels} .${e.hidden}`,i=oe.call(this,n);Array.from(i).forEach((e=>{ie(e,this.config.classNames.hidden,!1),ie(e,this.config.classNames.tooltip,!0)}))}}};function Ve(e,t=!0){let n=e;if(t){const e=document.createElement("a");e.href=n,n=e.href}try{return new URL(n)}catch(e){return null}}function He(e){const t=new URLSearchParams;return N(e)&&Object.entries(e).forEach((([e,n])=>{t.set(e,n)})),t}const We={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!ue.textTracks)return void(L(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&$e.setCaptionsMenu.call(this));var e,t;if(F(this.elements.captions)||(this.elements.captions=J("div",te(this.config.selectors.captions)),e=this.elements.captions,t=this.elements.wrapper,F(e)&&F(t)&&t.parentNode.insertBefore(e,t.nextSibling)),z.isIE&&window.URL){const e=this.media.querySelectorAll("track");Array.from(e).forEach((e=>{const t=e.getAttribute("src"),n=Ve(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&Fe(t,"blob").then((t=>{e.setAttribute("src",window.URL.createObjectURL(t))})).catch((()=>{X(e)}))}))}const n=be((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((e=>e.split("-")[0])));let i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&([i]=n);let r=this.storage.get("captions");if(O(r)||({active:r}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:r,language:i,languages:n}),this.isHTML5){const e=this.config.captions.update?"addtrack removetrack":"removetrack";pe.call(this,this.media.textTracks,e,We.update.bind(this))}setTimeout(We.update.bind(this),0)},update(){const e=We.getTracks.call(this,!0),{active:t,language:n,meta:i,currentTrackNode:r}=this.captions,s=Boolean(e.find((e=>e.language===n)));this.isHTML5&&this.isVideo&&e.filter((e=>!i.get(e))).forEach((e=>{this.debug.log("Track added",e),i.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),pe.call(this,e,"cuechange",(()=>We.updateCues.call(this)))})),(s&&this.language!==n||!e.includes(r))&&(We.setLanguage.call(this,n),We.toggle.call(this,t&&s)),ie(this.elements.container,this.config.classNames.captions.enabled,!V(e)),L(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&$e.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,i=this.config.classNames.captions.active,r=x(e)?!n:e;if(r!==n){if(t||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!t){const e=We.getTracks.call(this),t=We.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=t.language,void We.set.call(this,e.indexOf(t))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),ie(this.elements.container,i,r),this.captions.toggled=r,$e.updateSetting.call(this,"captions"),ge.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout((()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")}))},set(e,t=!0){const n=We.getTracks.call(this);if(-1!==e)if(A(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const i=n[e],{language:r}=i||{};this.captions.currentTrackNode=i,$e.updateSetting.call(this,"captions"),t||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),ge.call(this,this.media,"languagechange")}We.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&We.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else We.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!R(e))return void this.debug.warn("Invalid language argument",e);const n=e.toLowerCase();this.captions.language=n;const i=We.getTracks.call(this),r=We.findTrack.call(this,[n]);We.set.call(this,i.indexOf(r),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter((t=>!this.isHTML5||e||this.captions.meta.has(t))).filter((e=>["captions","subtitles"].includes(e.kind)))},findTrack(e,t=!1){const n=We.getTracks.call(this),i=e=>Number((this.captions.meta.get(e)||{}).default),r=Array.from(n).sort(((e,t)=>i(t)-i(e)));let s;return e.every((e=>(s=r.find((t=>t.language===e)),!s))),s||(t?r[0]:void 0)},getCurrentTrack(){return We.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!q(t)&&ue.textTracks&&this.captions.toggled&&(t=We.getCurrentTrack.call(this)),q(t)?V(t.label)?V(t.language)?Le.get("enabled",this.config):e.language.toUpperCase():t.label:Le.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!F(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!x(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const e=We.getCurrentTrack.call(this);t=Array.from((e||{}).activeCues||[]).map((e=>e.getCueAsHTML())).map(Oe)}const n=t.map((e=>e.trim())).join("\n");if(n!==this.elements.captions.innerHTML){Z(this.elements.captions);const e=J("span",te(this.config.selectors.caption));e.innerHTML=n,this.elements.captions.appendChild(e),ge.call(this,this.media,"cuechange")}}},ze={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1}},Be="picture-in-picture",Ge={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ke="video",Ye=()=>{};class Je{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Ye}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ye}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Ye}}class Qe{constructor(t){e(this,"onChange",(()=>{if(!this.enabled)return;const e=this.player.elements.buttons.fullscreen;F(e)&&(e.pressed=this.active);const t=this.target===this.player.media?this.target:this.player.elements.container;ge.call(this.player,t,this.active?"enterfullscreen":"exitfullscreen",!0)})),e(this,"toggleFallback",((e=!1)=>{if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ie(this.target,this.player.config.classNames.fullscreen.fallback,e),z.isIos){let t=document.head.querySelector('meta[name="viewport"]');const n="viewport-fit=cover";t||(t=document.createElement("meta"),t.setAttribute("name","viewport"));const i=R(t.content)&&t.content.includes(n);e?(this.cleanupViewport=!i,i||(t.content+=`,${n}`)):this.cleanupViewport&&(t.content=t.content.split(",").filter((e=>e.trim()!==n)).join(","))}this.onChange()})),e(this,"trapFocus",(e=>{if(z.isIos||!this.active||"Tab"!==e.key||9!==e.keyCode)return;const t=document.activeElement,n=oe.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[i]=n,r=n[n.length-1];t!==r||e.shiftKey?t===i&&e.shiftKey&&(r.focus(),e.preventDefault()):(i.focus(),e.preventDefault())})),e(this,"update",(()=>{if(this.enabled){let e;e=this.forceFallback?"Fallback (forced)":Qe.native?"Native":"Fallback",this.player.debug.log(`${e} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");ie(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)})),e(this,"enter",(()=>{this.enabled&&(z.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Qe.native||this.forceFallback?this.toggleFallback(!0):this.prefix?V(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))})),e(this,"exit",(()=>{if(this.enabled)if(z.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),_e(this.player.play());else if(!Qe.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!V(this.prefix)){const e="moz"===this.prefix?"Cancel":"Exit";document[`${this.prefix}${e}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),e(this,"toggle",(()=>{this.active?this.exit():this.enter()})),this.player=t,this.prefix=Qe.prefix,this.property=Qe.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){const{prototype:n}=Element;return(n.closest||function(){let e=this;do{if(se.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),pe.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":`${this.prefix}fullscreenchange`,(()=>{this.onChange()})),pe.call(this.player,this.player.elements.container,"dblclick",(e=>{F(this.player.elements.controls)&&this.player.elements.controls.contains(e.target)||this.player.listeners.proxy(e,this.toggle,"fullscreen")})),pe.call(this,this.player.elements.container,"keydown",(e=>this.trapFocus(e))),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return Qe.native&&!this.forceFallback}static get prefix(){if(M(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some((t=>!(!M(document[`${t}ExitFullscreen`])&&!M(document[`${t}CancelFullScreen`])||(e=t,0)))),e}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get enabled(){return(Qe.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!Qe.native||this.forceFallback)return re(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?document[`${this.prefix}${this.property}Element`]:document.fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return z.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}function Xe(e,t=1){return new Promise(((n,i)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=t?n:i)(r)};Object.assign(r,{onload:s,onerror:s,src:e})}))}const Ze={addStyleHook(){ie(this.elements.container,this.config.selectors.container.replace(".",""),!0),ie(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Ze.toggleNativeControls.call(this,!0);F(this.elements.controls)||($e.inject.call(this),this.listeners.controls()),Ze.toggleNativeControls.call(this),this.isHTML5&&We.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,$e.updateVolume.call(this),$e.timeUpdate.call(this),Ze.checkPlaying.call(this),ie(this.elements.container,this.config.classNames.pip.supported,ue.pip&&this.isHTML5&&this.isVideo),ie(this.elements.container,this.config.classNames.airplay.supported,ue.airplay&&this.isHTML5),ie(this.elements.container,this.config.classNames.isIos,z.isIos),ie(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((()=>{ge.call(this,this.media,"ready")}),0),Ze.setTitle.call(this),this.poster&&Ze.setPoster.call(this,this.poster,!1).catch((()=>{})),this.config.duration&&$e.durationUpdate.call(this)},setTitle(){let e=Le.get("play",this.config);if(R(this.config.title)&&!V(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach((t=>{t.setAttribute("aria-label",e)})),this.isEmbed){const e=ae.call(this,"iframe");if(!F(e))return;const t=V(this.config.title)?"video":this.config.title,n=Le.get("frameTitle",this.config);e.setAttribute("title",n.replace("{title}",t))}},togglePoster(e){ie(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),ve.call(this).then((()=>Xe(e))).catch((t=>{throw e===this.poster&&Ze.togglePoster.call(this,!1),t})).then((()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),Ze.togglePoster.call(this,!0),e))))},checkPlaying(e){ie(this.elements.container,this.config.classNames.playing,this.playing),ie(this.elements.container,this.config.classNames.paused,this.paused),ie(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",Le.get(this.playing?"pause":"play",this.config))})),j(e)&&"timeupdate"===e.type||Ze.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((()=>{ie(this.elements.container,this.config.classNames.loading,this.loading),Ze.toggleControls.call(this)}),this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter((e=>!V(e)&&R(e)&&e.startsWith("--plyr"))).forEach((e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)})),V(this.media.style)&&this.media.removeAttribute("style")}};class et{constructor(t){e(this,"firstTouch",(()=>{const{player:e}=this,{elements:t}=e;e.touch=!0,ie(t.container,e.config.classNames.isTouch,!0)})),e(this,"setTabFocus",(e=>{const{player:t}=this,{elements:n}=t;if(clearTimeout(this.focusTimer),"keydown"===e.type&&9!==e.which)return;"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);const i=e.timeStamp-this.lastKeyDown<=20;("focus"!==e.type||i)&&((()=>{const e=t.config.classNames.tabFocus;ie(oe.call(t,`.${e}`),e,!1)})(),"focusout"!==e.type&&(this.focusTimer=setTimeout((()=>{const e=document.activeElement;n.container.contains(e)&&ie(document.activeElement,t.config.classNames.tabFocus,!0)}),10)))})),e(this,"global",((e=!0)=>{const{player:t}=this;t.config.keyboard.global&&de.call(t,window,"keydown keyup",this.handleKey,e,!1),de.call(t,document.body,"click",this.toggleMenu,e),me.call(t,document.body,"touchstart",this.firstTouch),de.call(t,document.body,"keydown focus blur focusout",this.setTabFocus,e,!1,!0)})),e(this,"container",(()=>{const{player:e}=this,{config:t,elements:n,timers:i}=e;!t.keyboard.global&&t.keyboard.focused&&pe.call(e,n.container,"keydown keyup",this.handleKey,!1),pe.call(e,n.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(t=>{const{controls:r}=n;r&&"enterfullscreen"===t.type&&(r.pressed=!1,r.hover=!1);let s=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(Ze.toggleControls.call(e,!0),s=e.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout((()=>Ze.toggleControls.call(e,!1)),s)}));const r=()=>{if(!e.isVimeo||e.config.vimeo.premium)return;const t=n.wrapper,{active:i}=e.fullscreen,[r,s]=Se.call(e),o=Te(`aspect-ratio: ${r} / ${s}`);if(!i)return void(o?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null));const[a,l]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],c=a/l>r/s;o?(t.style.width=c?"auto":"100%",t.style.height=c?"100%":"auto"):(t.style.maxWidth=c?l/s*r+"px":null,t.style.margin=c?"0 auto":null)},s=()=>{clearTimeout(i.resized),i.resized=setTimeout(r,50)};pe.call(e,n.container,"enterfullscreen exitfullscreen",(t=>{const{target:i}=e.fullscreen;i===n.container&&(!e.isEmbed&&V(e.config.ratio)||(r(),("enterfullscreen"===t.type?pe:fe).call(e,window,"resize",s)))}))})),e(this,"media",(()=>{const{player:e}=this,{elements:t}=e;if(pe.call(e,e.media,"timeupdate seeking seeked",(t=>$e.timeUpdate.call(e,t))),pe.call(e,e.media,"durationchange loadeddata loadedmetadata",(t=>$e.durationUpdate.call(e,t))),pe.call(e,e.media,"ended",(()=>{e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),pe.call(e,e.media,"progress playing seeking seeked",(t=>$e.updateProgress.call(e,t))),pe.call(e,e.media,"volumechange",(t=>$e.updateVolume.call(e,t))),pe.call(e,e.media,"playing play pause ended emptied timeupdate",(t=>Ze.checkPlaying.call(e,t))),pe.call(e,e.media,"waiting canplay seeked playing",(t=>Ze.checkLoading.call(e,t))),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){const n=ae.call(e,`.${e.config.classNames.video}`);if(!F(n))return;pe.call(e,t.container,"click",(i=>{([t.container,n].includes(i.target)||n.contains(i.target))&&(e.touch&&e.config.hideControls||(e.ended?(this.proxy(i,e.restart,"restart"),this.proxy(i,(()=>{_e(e.play())}),"play")):this.proxy(i,(()=>{_e(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&pe.call(e,t.wrapper,"contextmenu",(e=>{e.preventDefault()}),!1),pe.call(e,e.media,"volumechange",(()=>{e.storage.set({volume:e.volume,muted:e.muted})})),pe.call(e,e.media,"ratechange",(()=>{$e.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),pe.call(e,e.media,"qualitychange",(t=>{$e.updateSetting.call(e,"quality",null,t.detail.quality)})),pe.call(e,e.media,"ready qualitychange",(()=>{$e.setDownloadUrl.call(e)}));const n=e.config.events.concat(["keyup","keydown"]).join(" ");pe.call(e,e.media,n,(n=>{let{detail:i={}}=n;"error"===n.type&&(i=e.media.error),ge.call(e,t.container,n.type,!0,i)}))})),e(this,"proxy",((e,t,n)=>{const{player:i}=this,r=i.config.listeners[n];let s=!0;M(r)&&(s=r.call(i,e)),!1!==s&&M(t)&&t.call(i,e)})),e(this,"bind",((e,t,n,i,r=!0)=>{const{player:s}=this,o=s.config.listeners[i],a=M(o);pe.call(s,e,t,(e=>this.proxy(e,n,i)),r&&!a)})),e(this,"controls",(()=>{const{player:e}=this,{elements:t}=e,n=z.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach((t=>{this.bind(t,"click",(()=>{_e(e.togglePlay())}),"play")})),this.bind(t.buttons.restart,"click",e.restart,"restart"),this.bind(t.buttons.rewind,"click",(()=>{e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),this.bind(t.buttons.fastForward,"click",(()=>{e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),this.bind(t.buttons.mute,"click",(()=>{e.muted=!e.muted}),"mute"),this.bind(t.buttons.captions,"click",(()=>e.toggleCaptions())),this.bind(t.buttons.download,"click",(()=>{ge.call(e,e.media,"download")}),"download"),this.bind(t.buttons.fullscreen,"click",(()=>{e.fullscreen.toggle()}),"fullscreen"),this.bind(t.buttons.pip,"click",(()=>{e.pip="toggle"}),"pip"),this.bind(t.buttons.airplay,"click",e.airplay,"airplay"),this.bind(t.buttons.settings,"click",(t=>{t.stopPropagation(),t.preventDefault(),$e.toggleMenu.call(e,t)}),null,!1),this.bind(t.buttons.settings,"keyup",(t=>{const n=t.which;[13,32].includes(n)&&(13!==n?(t.preventDefault(),t.stopPropagation(),$e.toggleMenu.call(e,t)):$e.focusFirstMenuItem.call(e,null,!0))}),null,!1),this.bind(t.settings.menu,"keydown",(t=>{27===t.which&&$e.toggleMenu.call(e,t)})),this.bind(t.inputs.seek,"mousedown mousemove",(e=>{const n=t.progress.getBoundingClientRect(),i=100/n.width*(e.pageX-n.left);e.currentTarget.setAttribute("seek-value",i)})),this.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(t=>{const n=t.currentTarget,i=t.keyCode?t.keyCode:t.which,r="play-on-seeked";if(U(t)&&39!==i&&37!==i)return;e.lastSeekTime=Date.now();const s=n.hasAttribute(r),o=["mouseup","touchend","keyup"].includes(t.type);s&&o?(n.removeAttribute(r),_e(e.play())):!o&&e.playing&&(n.setAttribute(r,""),e.pause())})),z.isIos){const t=oe.call(e,'input[type="range"]');Array.from(t).forEach((e=>this.bind(e,n,(e=>W(e.target)))))}this.bind(t.inputs.seek,n,(t=>{const n=t.currentTarget;let i=n.getAttribute("seek-value");V(i)&&(i=n.value),n.removeAttribute("seek-value"),e.currentTime=i/n.max*e.duration}),"seek"),this.bind(t.progress,"mouseenter mouseleave mousemove",(t=>$e.updateSeekTooltip.call(e,t))),this.bind(t.progress,"mousemove touchmove",(t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.startMove(t)})),this.bind(t.progress,"mouseleave touchend click",(()=>{const{previewThumbnails:t}=e;t&&t.loaded&&t.endMove(!1,!0)})),this.bind(t.progress,"mousedown touchstart",(t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.startScrubbing(t)})),this.bind(t.progress,"mouseup touchend",(t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.endScrubbing(t)})),z.isWebkit&&Array.from(oe.call(e,'input[type="range"]')).forEach((t=>{this.bind(t,"input",(t=>$e.updateRangeFill.call(e,t.target)))})),e.config.toggleInvert&&!F(t.display.duration)&&this.bind(t.display.currentTime,"click",(()=>{0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,$e.timeUpdate.call(e))})),this.bind(t.inputs.volume,n,(t=>{e.volume=t.target.value}),"volume"),this.bind(t.controls,"mouseenter mouseleave",(n=>{t.controls.hover=!e.touch&&"mouseenter"===n.type})),t.fullscreen&&Array.from(t.fullscreen.children).filter((e=>!e.contains(t.container))).forEach((n=>{this.bind(n,"mouseenter mouseleave",(n=>{t.controls.hover=!e.touch&&"mouseenter"===n.type}))})),this.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",(e=>{t.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(t.controls,"focusin",(()=>{const{config:n,timers:i}=e;ie(t.controls,n.classNames.noTransition,!0),Ze.toggleControls.call(e,!0),setTimeout((()=>{ie(t.controls,n.classNames.noTransition,!1)}),0);const r=this.touch?3e3:4e3;clearTimeout(i.controls),i.controls=setTimeout((()=>Ze.toggleControls.call(e,!1)),r)})),this.bind(t.inputs.volume,"wheel",(t=>{const n=t.webkitDirectionInvertedFromDevice,[i,r]=[t.deltaX,-t.deltaY].map((e=>n?-e:e)),s=Math.sign(Math.abs(i)>Math.abs(r)?i:r);e.increaseVolume(s/50);const{volume:o}=e.media;(1===s&&o<1||-1===s&&o>0)&&t.preventDefault()}),"volume",!1)})),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:n}=t,i=e.keyCode?e.keyCode:e.which,r="keydown"===e.type,s=r&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&A(i))if(r){const r=document.activeElement;if(F(r)){const{editable:i}=t.config.selectors,{seek:s}=n.inputs;if(r!==s&&se(r,i))return;if(32===e.which&&se(r,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:s||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:s||_e(t.togglePlay());break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:s||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:s||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}toggleMenu(e){$e.toggleMenu.call(this.player,e)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var tt=function(e,t){return function(e,t){e.exports=function(){var e=function(){},t={},n={},i={};function r(e,t){e=e.push?e:[e];var r,s,o,a=[],l=e.length,c=l;for(r=function(e,n){n.length&&a.push(e),--c||t(a)};l--;)s=e[l],(o=n[s])?r(s,o):(i[s]=i[s]||[]).push(r)}function s(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function o(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function a(t,n,i,r){var s,o,l=document,c=i.async,u=(i.numRetries||0)+1,h=i.before||e,d=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(d)?((o=l.createElement("link")).rel="stylesheet",o.href=p,(s="hideFocus"in o)&&o.relList&&(s=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(o=l.createElement("img")).src=p:((o=l.createElement("script")).src=t,o.async=void 0===c||c),o.onload=o.onerror=o.onbeforeload=function(e){var l=e.type[0];if(s)try{o.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<u)return a(t,n,i,r)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==h(t,o)&&l.head.appendChild(o)}function l(e,t,n){var i,r,s=(e=e.push?e:[e]).length,o=s,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--s||t(l)},r=0;r<o;r++)a(e[r],i,n)}function c(e,n,i){var r,a;if(n&&n.trim&&(r=n),a=(r?i:n)||{},r){if(r in t)throw"LoadJS";t[r]=!0}function c(t,n){l(e,(function(e){o(a,e),t&&o({success:t,error:n},e),s(r,e)}),a)}if(a.returnPromise)return new Promise(c);c()}return c.ready=function(e,t){return r(e,(function(e){o(t,e)})),c},c.done=function(e){s(e,[])},c.reset=function(){t={},n={},i={}},c.isDefined=function(e){return e in t},c}()}(t={exports:{}}),t.exports}();function nt(e){return new Promise(((t,n)=>{tt(e,{success:t,error:n})}))}function it(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,ge.call(this,this.media,e?"play":"pause"))}const rt={setup(){const e=this;ie(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Ee.call(e),N(window.Vimeo)?rt.ready.call(e):nt(e.config.urls.vimeo.sdk).then((()=>{rt.ready.call(e)})).catch((t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready(){const e=this,t=e.config.vimeo,{premium:n,referrerPolicy:i,...r}=t;n&&Object.assign(r,{controls:!1,sidedock:!1});const s=He({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative,...r});let o=e.media.getAttribute("src");V(o)&&(o=e.media.getAttribute(e.config.attributes.embed.id));const a=V(l=o)?null:A(Number(l))?l:l.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:l;var l;const c=J("iframe"),u=Ne(e.config.urls.vimeo.iframe,a,s);if(c.setAttribute("src",u),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),V(i)||c.setAttribute("referrerPolicy",i),n||!t.customControls)c.setAttribute("data-poster",e.poster),e.media=ee(c,e.media);else{const t=J("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});t.appendChild(c),e.media=ee(t,e.media)}t.customControls||Fe(Ne(e.config.urls.vimeo.api,u)).then((t=>{!V(t)&&t.thumbnail_url&&Ze.setPoster.call(e,t.thumbnail_url).catch((()=>{}))})),e.embed=new window.Vimeo.Player(c,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(it.call(e,!0),e.embed.play()),e.media.pause=()=>(it.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:h}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>h,set(t){const{embed:n,media:i,paused:r,volume:s}=e,o=r&&!n.hasPlayed;i.seeking=!0,ge.call(e,i,"seeking"),Promise.resolve(o&&n.setVolume(0)).then((()=>n.setCurrentTime(t))).then((()=>o&&n.pause())).then((()=>o&&n.setVolume(s))).catch((()=>{}))}});let d=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>d,set(t){e.embed.setPlaybackRate(t).then((()=>{d=t,ge.call(e,e.media,"ratechange")})).catch((()=>{e.options.speed=[1]}))}});let{volume:p}=e.config;Object.defineProperty(e.media,"volume",{get:()=>p,set(t){e.embed.setVolume(t).then((()=>{p=t,ge.call(e,e.media,"volumechange")}))}});let{muted:f}=e.config;Object.defineProperty(e.media,"muted",{get:()=>f,set(t){const n=!!O(t)&&t;e.embed.setVolume(n?0:e.config.volume).then((()=>{f=n,ge.call(e,e.media,"volumechange")}))}});let m,{loop:g}=e.config;Object.defineProperty(e.media,"loop",{get:()=>g,set(t){const n=O(t)?t:e.config.loop.active;e.embed.setLoop(n).then((()=>{g=n}))}}),e.embed.getVideoUrl().then((t=>{m=t,$e.setDownloadUrl.call(e)})).catch((e=>{this.debug.warn(e)})),Object.defineProperty(e.media,"currentSrc",{get:()=>m}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then((t=>{const[n,i]=t;e.embed.ratio=Pe(n,i),Ee.call(this)})),e.embed.setAutopause(e.config.autopause).then((t=>{e.config.autopause=t})),e.embed.getVideoTitle().then((t=>{e.config.title=t,Ze.setTitle.call(this)})),e.embed.getCurrentTime().then((t=>{h=t,ge.call(e,e.media,"timeupdate")})),e.embed.getDuration().then((t=>{e.media.duration=t,ge.call(e,e.media,"durationchange")})),e.embed.getTextTracks().then((t=>{e.media.textTracks=t,We.setup.call(e)})),e.embed.on("cuechange",(({cues:t=[]})=>{const n=t.map((e=>function(e){const t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}(e.text)));We.updateCues.call(e,n)})),e.embed.on("loaded",(()=>{e.embed.getPaused().then((t=>{it.call(e,!t),t||ge.call(e,e.media,"playing")})),F(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)})),e.embed.on("bufferstart",(()=>{ge.call(e,e.media,"waiting")})),e.embed.on("bufferend",(()=>{ge.call(e,e.media,"playing")})),e.embed.on("play",(()=>{it.call(e,!0),ge.call(e,e.media,"playing")})),e.embed.on("pause",(()=>{it.call(e,!1)})),e.embed.on("timeupdate",(t=>{e.media.seeking=!1,h=t.seconds,ge.call(e,e.media,"timeupdate")})),e.embed.on("progress",(t=>{e.media.buffered=t.percent,ge.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&ge.call(e,e.media,"canplaythrough"),e.embed.getDuration().then((t=>{t!==e.media.duration&&(e.media.duration=t,ge.call(e,e.media,"durationchange"))}))})),e.embed.on("seeked",(()=>{e.media.seeking=!1,ge.call(e,e.media,"seeked")})),e.embed.on("ended",(()=>{e.media.paused=!0,ge.call(e,e.media,"ended")})),e.embed.on("error",(t=>{e.media.error=t,ge.call(e,e.media,"error")})),t.customControls&&setTimeout((()=>Ze.build.call(e)),0)}};function st(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,ge.call(this,this.media,e?"play":"pause"))}function ot(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}const at={setup(){if(ie(this.elements.wrapper,this.config.classNames.embed,!0),N(window.YT)&&M(window.YT.Player))at.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{M(e)&&e(),at.ready.call(this)},nt(this.config.urls.youtube.sdk).catch((e=>{this.debug.warn("YouTube API failed to load",e)}))}},getTitle(e){Fe(Ne(this.config.urls.youtube.api,e)).then((e=>{if(N(e)){const{title:t,height:n,width:i}=e;this.config.title=t,Ze.setTitle.call(this),this.embed.ratio=Pe(i,n)}Ee.call(this)})).catch((()=>{Ee.call(this)}))},ready(){const e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(!V(n)&&n.startsWith("youtube-"))return;let i=e.media.getAttribute("src");V(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));const r=V(s=i)?null:s.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:s;var s;const o=J("div",{id:`${e.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":t.customControls?e.poster:void 0});if(e.media=ee(o,e.media),t.customControls){const t=e=>`https://i.ytimg.com/vi/${r}/${e}default.jpg`;Xe(t("maxres"),121).catch((()=>Xe(t("sd"),121))).catch((()=>Xe(t("hq")))).then((t=>Ze.setPoster.call(e,t.src))).then((t=>{t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((()=>{}))}e.embed=new window.YT.Player(e.media,{videoId:r,host:ot(t),playerVars:G({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(t){if(!e.media.error){const n=t.data,i={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occured";e.media.error={code:n,message:i},ge.call(e,e.media,"error")}},onPlaybackRateChange(t){const n=t.target;e.media.playbackRate=n.getPlaybackRate(),ge.call(e,e.media,"ratechange")},onReady(n){if(M(e.media.play))return;const i=n.target;at.getTitle.call(e,r),e.media.play=()=>{st.call(e,!0),i.playVideo()},e.media.pause=()=>{st.call(e,!1),i.pauseVideo()},e.media.stop=()=>{i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(i.getCurrentTime()),set(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,ge.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>i.getPlaybackRate(),set(e){i.setPlaybackRate(e)}});let{volume:s}=e.config;Object.defineProperty(e.media,"volume",{get:()=>s,set(t){s=t,i.setVolume(100*s),ge.call(e,e.media,"volumechange")}});let{muted:o}=e.config;Object.defineProperty(e.media,"muted",{get:()=>o,set(t){const n=O(t)?t:o;o=n,i[n?"mute":"unMute"](),i.setVolume(100*s),ge.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>i.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const a=i.getAvailablePlaybackRates();e.options.speed=a.filter((t=>e.config.speed.options.includes(t))),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),ge.call(e,e.media,"timeupdate"),ge.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((()=>{e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&ge.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),ge.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((()=>Ze.build.call(e)),50)},onStateChange(n){const i=n.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(n.data)&&(e.media.seeking=!1,ge.call(e,e.media,"seeked")),n.data){case-1:ge.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),ge.call(e,e.media,"progress");break;case 0:st.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):ge.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(st.call(e,!0),ge.call(e,e.media,"playing"),e.timers.playing=setInterval((()=>{ge.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),ge.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),st.call(e,!1);break;case 3:ge.call(e,e.media,"waiting")}ge.call(e,e.elements.container,"statechange",!1,{code:n.data})}}})}},lt={setup(){this.media?(ie(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ie(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ie(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=J("div",{class:this.config.classNames.video}),K(this.media,this.elements.wrapper),this.elements.poster=J("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?xe.setup.call(this):this.isYouTube?at.setup.call(this):this.isVimeo&&rt.setup.call(this)):this.debug.warn("No media element found!")}};class ct{constructor(t){e(this,"load",(()=>{this.enabled&&(N(window.google)&&N(window.google.ima)?this.ready():nt(this.player.config.urls.googleIMA.sdk).then((()=>{this.ready()})).catch((()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))})))})),e(this,"ready",(()=>{var e;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((()=>{this.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()})),e(this,"setupIMA",(()=>{this.elements.container=J("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>this.onAdsManagerLoaded(e)),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError(e)),!1),this.requestAds()})),e(this,"requestAds",(()=>{const{container:e}=this.player.elements;try{const t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}})),e(this,"pollCountdown",((e=!1)=>{if(!e)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval((()=>{const e=qe(Math.max(this.manager.getRemainingTime(),0)),t=`${Le.get("advertisement",this.player.config)} - ${e}`;this.elements.container.setAttribute("data-badge-text",t)}),100)})),e(this,"onAdsManagerLoaded",(e=>{if(!this.enabled)return;const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError(e))),Object.keys(google.ima.AdEvent.Type).forEach((e=>{this.manager.addEventListener(google.ima.AdEvent.Type[e],(e=>this.onAdEvent(e)))})),this.trigger("loaded")})),e(this,"addCuePoints",(()=>{V(this.cuePoints)||this.cuePoints.forEach((e=>{if(0!==e&&-1!==e&&e<this.player.duration){const t=this.player.elements.progress;if(F(t)){const n=100/this.player.duration*e,i=J("span",{class:this.player.config.classNames.cues});i.style.left=`${n.toString()}%`,t.appendChild(i)}}}))})),e(this,"onAdEvent",(e=>{const{container:t}=this.player.elements,n=e.getAd(),i=e.getAdData();switch((e=>{ge.call(this.player,this.player.media,`ads${e.replace(/_/g,"").toLowerCase()}`)})(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),n.isLinear()||(n.width=t.offsetWidth,n.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:i.adError&&this.player.debug.warn(`Non-fatal ad error: ${i.adError.getMessage()}`)}})),e(this,"onAdError",(e=>{this.cancel(),this.player.debug.warn("Ads error",e)})),e(this,"listeners",(()=>{const{container:e}=this.player.elements;let t;this.player.on("canplay",(()=>{this.addCuePoints()})),this.player.on("ended",(()=>{this.loader.contentComplete()})),this.player.on("timeupdate",(()=>{t=this.player.currentTime})),this.player.on("seeked",(()=>{const e=this.player.currentTime;V(this.cuePoints)||this.cuePoints.forEach(((n,i)=>{t<n&&n<e&&(this.manager.discardAdBreak(),this.cuePoints.splice(i,1))}))})),window.addEventListener("resize",(()=>{this.manager&&this.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)}))})),e(this,"play",(()=>{const{container:e}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then((()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(e){this.onAdError(e)}})).catch((()=>{}))})),e(this,"resumeContent",(()=>{this.elements.container.style.zIndex="",this.playing=!1,_e(this.player.media.play())})),e(this,"pauseContent",(()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()})),e(this,"cancel",(()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()})),e(this,"loadAds",(()=>{this.managerPromise.then((()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise((e=>{this.on("loaded",e),this.player.debug.log(this.manager)})),this.initialized=!1,this.requestAds()})).catch((()=>{}))})),e(this,"trigger",((e,...t)=>{const n=this.events[e];L(n)&&n.forEach((e=>{M(e)&&e.apply(this,t)}))})),e(this,"on",((e,t)=>(L(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this))),e(this,"startSafetyTimer",((e,t)=>{this.player.debug.log(`Safety timer invoked from: ${t}`),this.safetyTimer=setTimeout((()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")}),e)})),e(this,"clearSafetyTimer",(e=>{x(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${e}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)})),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(((e,t)=>{this.on("loaded",e),this.on("error",t)})),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!V(e.publisherId)||$(e.tagUrl))}get tagUrl(){const{config:e}=this;return $(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${He({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}const ut=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach((e=>{const n={};e.split(/\r\n|\n|\r/).forEach((e=>{if(A(n.startTime)){if(!V(e.trim())&&V(n.text)){const t=e.trim().split("#xywh=");[n.text]=t,t[1]&&([n.x,n.y,n.w,n.h]=t[1].split(","))}}else{const t=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);t&&(n.startTime=60*Number(t[1]||0)*60+60*Number(t[2])+Number(t[3])+Number(`0.${t[4]}`),n.endTime=60*Number(t[6]||0)*60+60*Number(t[7])+Number(t[8])+Number(`0.${t[9]}`))}})),n.text&&t.push(n)})),t},ht=(e,t)=>{const n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n};class dt{constructor(t){e(this,"load",(()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)}))})),e(this,"getThumbnails",(()=>new Promise((e=>{const{src:t}=this.player.config.previewThumbnails;if(V(t))throw new Error("Missing previewThumbnails.src config attribute");const n=()=>{this.thumbnails.sort(((e,t)=>e.height-t.height)),this.player.debug.log("Preview thumbnails",this.thumbnails),e()};if(M(t))t((e=>{this.thumbnails=e,n()}));else{const e=(R(t)?[t]:t).map((e=>this.getThumbnail(e)));Promise.all(e).then(n)}})))),e(this,"getThumbnail",(e=>new Promise((t=>{Fe(e).then((n=>{const i={frames:ut(n),height:null,urlPrefix:""};i.frames[0].text.startsWith("/")||i.frames[0].text.startsWith("http://")||i.frames[0].text.startsWith("https://")||(i.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));const r=new Image;r.onload=()=>{i.height=r.naturalHeight,i.width=r.naturalWidth,this.thumbnails.push(i),t()},r.src=i.urlPrefix+i.frames[0].text}))})))),e(this,"startMove",(e=>{if(this.loaded&&j(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{const t=this.player.elements.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(n/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=qe(this.seekTime)}this.showImageAtCurrentTime()}})),e(this,"endMove",(()=>{this.toggleThumbContainer(!1,!0)})),e(this,"startScrubbing",(e=>{(x(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))})),e(this,"endScrubbing",(()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):me.call(this.player,this.player.media,"timeupdate",(()=>{this.mouseDown||this.toggleScrubbingContainer(!1)}))})),e(this,"listeners",(()=>{this.player.on("play",(()=>{this.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(()=>{this.toggleThumbContainer(!1)})),this.player.on("timeupdate",(()=>{this.lastTime=this.player.media.currentTime}))})),e(this,"render",(()=>{this.elements.thumb.container=J("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=J("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const e=J("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=J("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),F(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=J("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)})),e(this,"destroy",(()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()})),e(this,"showImageAtCurrentTime",(()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const e=this.thumbnails[0].frames.findIndex((e=>this.seekTime>=e.startTime&&this.seekTime<=e.endTime)),t=e>=0;let n=0;this.mouseDown||this.toggleThumbContainer(t),t&&(this.thumbnails.forEach(((t,i)=>{this.loadedImages.includes(t.frames[e].text)&&(n=i)})),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(n)))})),e(this,"loadImage",((e=0)=>{const t=this.showingThumb,n=this.thumbnails[e],{urlPrefix:i}=n,r=n.frames[t],s=n.frames[t].text,o=i+s;if(this.currentImageElement&&this.currentImageElement.dataset.filename===s)this.showImage(this.currentImageElement,r,e,t,s,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const n=new Image;n.src=o,n.dataset.index=t,n.dataset.filename=s,this.showingThumbFilename=s,this.player.debug.log(`Loading image: ${o}`),n.onload=()=>this.showImage(n,r,e,t,s,!0),this.loadingImage=n,this.removeOldImages(n)}})),e(this,"showImage",((e,t,n,i,r,s=!0)=>{this.player.debug.log(`Showing thumb: ${r}. num: ${i}. qual: ${n}. newimg: ${s}`),this.setImageSizeAndOffset(e,t),s&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,r))})),e(this,"removeOldImages",(e=>{Array.from(this.currentImageContainer.children).forEach((t=>{if("img"!==t.tagName.toLowerCase())return;const n=this.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;const{currentImageContainer:e}=this;setTimeout((()=>{e.removeChild(t),this.player.debug.log(`Removing thumb: ${t.dataset.filename}`)}),n)}}))})),e(this,"preloadNearby",((e,t=!0)=>new Promise((n=>{setTimeout((()=>{const i=this.thumbnails[0].frames[e].text;if(this.showingThumbFilename===i){let r;r=t?this.thumbnails[0].frames.slice(e):this.thumbnails[0].frames.slice(0,e).reverse();let s=!1;r.forEach((e=>{const t=e.text;if(t!==i&&!this.loadedImages.includes(t)){s=!0,this.player.debug.log(`Preloading thumb filename: ${t}`);const{urlPrefix:e}=this.thumbnails[0],i=e+t,r=new Image;r.src=i,r.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${t}`),this.loadedImages.includes(t)||this.loadedImages.push(t),n()}}})),s||n()}}),300)})))),e(this,"getHigherQuality",((e,t,n,i)=>{if(e<this.thumbnails.length-1){let r=t.naturalHeight;this.usingSprites&&(r=n.h),r<this.thumbContainerHeight&&setTimeout((()=>{this.showingThumbFilename===i&&(this.player.debug.log(`Showing higher quality thumb for: ${i}`),this.loadImage(e+1))}),300)}})),e(this,"toggleThumbContainer",((e=!1,t=!1)=>{const n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)})),e(this,"toggleScrubbingContainer",((e=!1)=>{const t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)})),e(this,"determineContainerAutoSizing",(()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)})),e(this,"setThumbContainerSizeAndPos",(()=>{if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){const e=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width=`${e}px`}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){const e=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height=`${e}px`}}else{const e=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height=`${this.thumbContainerHeight}px`,this.elements.thumb.imageContainer.style.width=`${e}px`}this.setThumbContainerPos()})),e(this,"setThumbContainerPos",(()=>{const e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:n}=this.elements.thumb,i=t.left-e.left+10,r=t.right-e.left-n.clientWidth-10;let s=this.mousePosX-e.left-n.clientWidth/2;s<i&&(s=i),s>r&&(s=r),n.style.left=`${s}px`})),e(this,"setScrubbingContainerSize",(()=>{const{width:e,height:t}=ht(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${e}px`,this.elements.scrubbing.container.style.height=`${t}px`})),e(this,"setImageSizeAndOffset",((e,t)=>{if(!this.usingSprites)return;const n=this.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*n+"px",e.style.width=e.naturalWidth*n+"px",e.style.left=`-${t.x*n}px`,e.style.top=`-${t.y*n}px`})),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=ht(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const pt={insertElements(e,t){R(t)?Q(e,this.media,{src:t}):L(t)&&t.forEach((t=>{Q(e,this.media,t)}))},change(e){B(e,"sources.length")?(xe.cancelRequests.call(this),this.destroy.call(this,(()=>{this.options.quality=[],X(this.media),this.media=null,F(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:n}=e,[{provider:i=Ge.html5,src:r}]=t,s="html5"===i?n:"div",o="html5"===i?{}:{src:r};Object.assign(this,{provider:i,type:n,supported:ue.check(n,i,this.config.playsinline),media:J(s,o)}),this.elements.container.appendChild(this.media),O(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),V(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Ze.addStyleHook.call(this),this.isHTML5&&pt.insertElements.call(this,"source",t),this.config.title=e.title,lt.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&pt.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ze.build.call(this),this.isHTML5&&this.media.load(),V(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new dt(this))),this.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};class ft{constructor(t,n){if(e(this,"play",(()=>M(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((()=>this.ads.play())).catch((()=>_e(this.media.play()))),this.media.play()):null)),e(this,"pause",(()=>this.playing&&M(this.media.pause)?this.media.pause():null)),e(this,"togglePlay",(e=>(O(e)?e:!this.playing)?this.play():this.pause())),e(this,"stop",(()=>{this.isHTML5?(this.pause(),this.restart()):M(this.media.stop)&&this.media.stop()})),e(this,"restart",(()=>{this.currentTime=0})),e(this,"rewind",(e=>{this.currentTime-=A(e)?e:this.config.seekTime})),e(this,"forward",(e=>{this.currentTime+=A(e)?e:this.config.seekTime})),e(this,"increaseVolume",(e=>{const t=this.media.muted?0:this.volume;this.volume=t+(A(e)?e:0)})),e(this,"decreaseVolume",(e=>{this.increaseVolume(-e)})),e(this,"airplay",(()=>{ue.airplay&&this.media.webkitShowPlaybackTargetPicker()})),e(this,"toggleControls",(e=>{if(this.supported.ui&&!this.isAudio){const t=re(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,i=ie(this.elements.container,this.config.classNames.hideControls,n);if(i&&L(this.config.controls)&&this.config.controls.includes("settings")&&!V(this.config.settings)&&$e.toggleMenu.call(this,!1),i!==t){const e=i?"controlshidden":"controlsshown";ge.call(this,this.media,e)}return!i}return!1})),e(this,"on",((e,t)=>{pe.call(this,this.elements.container,e,t)})),e(this,"once",((e,t)=>{me.call(this,this.elements.container,e,t)})),e(this,"off",((e,t)=>{fe(this.elements.container,e,t)})),e(this,"destroy",((e,t=!1)=>{if(!this.ready)return;const n=()=>{document.body.style.overflow="",this.embed=null,t?(Object.keys(this.elements).length&&(X(this.elements.buttons.play),X(this.elements.captions),X(this.elements.controls),X(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),M(e)&&e()):(ye.call(this),xe.cancelRequests.call(this),ee(this.elements.original,this.elements.container),ge.call(this,this.elements.original,"destroyed",!0),M(e)&&e.call(this.elements.original),this.ready=!1,setTimeout((()=>{this.elements=null,this.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Ze.toggleNativeControls.call(this,!0),n()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&M(this.embed.destroy)&&this.embed.destroy(),n()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(n),setTimeout(n,200))})),e(this,"supports",(e=>ue.mime.call(this,e))),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=ue.touch,this.media=t,R(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||D(this.media)||L(this.media))&&(this.media=this.media[0]),this.config=G({},ze,ft.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(e){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Je(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",ue),x(this.media)||!F(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!ue.check().api)return void this.debug.error("Setup failed: no support");const i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;const r=this.media.tagName.toLowerCase();let s=null,o=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),F(s)){if(o=Ve(s.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Ge.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Ge.vimeo:null}(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const e=["1","true"];e.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),e.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=e.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(V(this.provider)||!Object.values(Ge).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Ke;break;case"video":case"audio":this.type=r,this.provider=Ge.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=ue.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new et(this),this.storage=new De(this),this.media.plyr=this,F(this.elements.container)||(this.elements.container=J("div",{tabindex:0}),K(this.media,this.elements.container)),Ze.migrateStyles.call(this),Ze.addStyleHook.call(this),lt.setup.call(this),this.config.debug&&pe.call(this,this.elements.container,this.config.events.join(" "),(e=>{this.debug.log(`event: ${e.type}`)})),this.fullscreen=new Qe(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ze.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new ct(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(()=>_e(this.play()))),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new dt(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Ge.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Ge.youtube}get isVimeo(){return this.provider===Ge.vimeo}get isVideo(){return this.type===Ke}get isAudio(){return"audio"===this.type}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(e){if(!this.duration)return;const t=A(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return A(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=A(t)&&t!==1/0?t:0;return e||n}set volume(e){let t=e;R(t)&&(t=Number(t)),A(t)||(t=this.storage.get("volume")),A(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!V(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;O(t)||(t=this.storage.get("muted")),O(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;A(e)&&(t=e),A(t)||(t=this.storage.get("speed")),A(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:i}=this;t=function(e=0,t=0,n=255){return Math.min(Math.max(e,t),n)}(t,n,i),this.config.speed.selected=t,setTimeout((()=>{this.media.playbackRate=t}),0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let i=[!V(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(A),r=!0;if(!n.includes(i)){const e=we(n,i);this.debug.warn(`Unsupported quality option: ${i}, using ${e} instead`),i=e,r=!1}t.selected=i,this.media.quality=i,r&&this.storage.set({quality:i})}get quality(){return this.media.quality}set loop(e){const t=O(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return Boolean(this.media.loop)}set source(e){pt.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return $(e)?e:this.source}set download(e){$(e)&&(this.config.urls.download=e,$e.setDownloadUrl.call(this))}set poster(e){this.isVideo?Ze.setPoster.call(this,e,!1).catch((()=>{})):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Ie(Se.call(this));return L(e)?e.join(":"):e}set ratio(e){this.isVideo?R(e)&&ke(e)?(this.config.ratio=Ie(e),Ee.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){const t=O(e)?e:this.config.autoplay;this.config.autoplay=t}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(e){We.toggle.call(this,e,!1)}set currentTrack(e){We.set.call(this,e,!1)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){We.setLanguage.call(this,e,!1)}get language(){return(We.getCurrentTrack.call(this)||{}).language}set pip(e){if(!ue.pip)return;const t=O(e)?e:!this.pip;M(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Be:"inline"),M(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return ue.pip?V(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Be:null}static supported(e,t,n){return ue.check(e,t,n)}static loadSprite(e,t){return je(e,t)}static setup(e,t={}){let n=null;return R(e)?n=Array.from(document.querySelectorAll(e)):D(e)?n=Array.from(e):L(e)&&(n=e.filter(F)),V(n)?null:n.map((e=>new ft(e,t)))}}var mt;return ft.defaults=(mt=ze,JSON.parse(JSON.stringify(mt))),ft}())},6248:function(e){var t=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var r=t&&t.prototype instanceof g?t:g,s=Object.create(r.prototype),o=new P(i||[]);return s._invoke=function(e,t,n){var i=h;return function(r,s){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw s;return N()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=I(o,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=u(e,t,n);if("normal"===l.type){if(i=n.done?f:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=f,n.method="throw",n.arg=l.arg)}}}(e,n,o),s}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function g(){}function y(){}function v(){}var _={};l(_,s,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(x([])));w&&w!==n&&i.call(w,s)&&(_=w);var T=v.prototype=g.prototype=Object.create(_);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,a)}))}a(l.arg)}var r;this._invoke=function(e,i){function s(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(s,s):s()}}function I(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var s=r.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function x(e){if(e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return y.prototype=v,l(T,"constructor",v),l(v,"constructor",y),y.displayName=l(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,a,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},C(k.prototype),l(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new k(c(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(T),l(T,a,"Generator"),l(T,s,(function(){return this})),l(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=x,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:x(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";n(8391);var e,t=(e=n(1829))&&e.__esModule?e:{default:e};t.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),t.default._babelPolyfill=!0}(),function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};function t(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function s(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create,Object.create;var o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},l=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<e.length;r+=3){var s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,h=(3&s)<<4|a>>4,d=(15&a)<<2|c>>6,p=63&c;l||(p=64,o||(d=64)),i.push(n[u],n[h],n[d],n[p])}return i.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,i=0;n<e.length;){var r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){var s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){var o=((7&r)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<e.length;){var s=n[e.charAt(r++)],o=r<e.length?n[e.charAt(r)]:0,a=++r<e.length?n[e.charAt(r)]:64,l=++r<e.length?n[e.charAt(r)]:64;if(++r,null==s||null==o||null==a||null==l)throw Error();var c=s<<2|o>>4;if(i.push(c),64!==a){var u=o<<4&240|a>>2;if(i.push(u),64!==l){var h=a<<6&192|l;i.push(h)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=d(e[n],t[n]));return e}var p=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,i))}},e}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}var y=function(t){function n(e,i,r){var s=t.call(this,i)||this;return s.code=e,s.customData=r,s.name="FirebaseError",Object.setPrototypeOf(s,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,v.prototype.create),s}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}(n,t),n}(Error),v=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=t[0]||{},r=this.service+"/"+e,s=this.errors[e],o=s?_(s,i):"Error",a=this.serviceName+": "+o+" ("+r+").",l=new y(r,a,i);return l},e}();function _(e,t){return e.replace(b,(function(e,n){var i=t[n];return null!=i?String(i):"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;function w(e){return JSON.parse(e)}function T(e){return JSON.stringify(e)}var C=function(e){var t={},n={},i={},r="";try{var s=e.split(".");t=w(u(s[0])||""),n=w(u(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}};function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function S(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function E(e,t,n){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function P(e,t){if(e===t)return!0;for(var n=Object.keys(e),i=Object.keys(t),r=0,s=n;r<s.length;r++){var o=s[r];if(!i.includes(o))return!1;var a=e[o],l=t[o];if(x(a)&&x(l)){if(!P(a,l))return!1}else if(a!==l)return!1}for(var c=0,u=i;c<u.length;c++)if(o=u[c],!n.includes(o))return!1;return!0}function x(e){return null!==e&&"object"==typeof e}function N(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},i=0,r=Object.entries(e);i<r.length;i++){var s=r[i];n(s[0],s[1])}return t.length?"&"+t.join("&"):""}function A(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),i=n[0],r=n[1];t[decodeURIComponent(i)]=decodeURIComponent(r)}})),t}function R(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var O=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var s,o,a=this.chain_[0],l=this.chain_[1],c=this.chain_[2],u=this.chain_[3],h=this.chain_[4];for(i=0;i<80;i++)i<40?i<20?(s=u^l&(c^u),o=1518500249):(s=l^c^u,o=1859775393):i<60?(s=l&c|u&(l|c),o=2400959708):(s=l^c^u,o=3395469782),r=(a<<5|a>>>27)+s+h+o+n[i]&4294967295,h=u,u=c,c=4294967295&(l<<30|l>>>2),l=a,a=r;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=0,r=this.buf_,s=this.inbuf_;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++i,++s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++i,++s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)e[i]=this.chain_[n]>>r&255,++i;return e},e}(),M=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var i,r=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var r=i[n];if(r in e&&"function"==typeof e[r])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(i.next=L),void 0===i.error&&(i.error=L),void 0===i.complete&&(i.complete=L);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(e){}})),this.observers.push(i),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function L(){}function D(e,t){return e+" failed: "+t+" argument "}var F=function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function j(e){return e&&e._delegate?e._delegate:e}var U,q=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),$="[DEFAULT]",V=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new p;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$})}catch(e){}try{for(var s=i(this.instancesDeferred.entries()),o=s.next();!o.done;o=s.next()){var a=r(o.value,2),l=a[0],c=a[1],u=this.normalizeInstanceIdentifier(l);try{var h=this.getOrInitializeService({instanceIdentifier:u});c.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=$),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return e=this,t=void 0,i=function(){var e;return function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(s(s([],r(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),r(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=$),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=$),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var s=e.options,o=void 0===s?{}:s,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var c=i(this.instancesDeferred.entries()),u=c.next();!u.done;u=c.next()){var h=r(u.value,2),d=h[0],p=h[1];a===this.normalizeInstanceIdentifier(d)&&p.resolve(l)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return l},e.prototype.onInit=function(e,t){var n,i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);var s=this.instances.get(i);return s&&e(s,i),function(){r.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,s=this.onInitCallbacks.get(t);if(s)try{for(var o=i(s),a=o.next();!a.done;a=o.next()){var l=a.value;try{l(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,i=e.options,r=void 0===i?{}:i,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===$?void 0:t),options:r}),this.instances.set(n,s),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(e){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=$),this.component?this.component.multipleInstances?e:$:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),H=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new V(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function W(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i}var z,B=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(z||(z={}));var G={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},K=z.INFO,Y=((U={})[z.DEBUG]="log",U[z.VERBOSE]="log",U[z.INFO]="info",U[z.WARN]="warn",U[z.ERROR]="error",U),J=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var r=(new Date).toISOString(),s=Y[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[s].apply(console,W(["["+r+"]  "+e.name+":"],n))}},Q=function(){function e(e){this.name=e,this._logLevel=K,this._logHandler=J,this._userLogHandler=null,B.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in z))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?G[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,W([this,z.DEBUG],e)),this._logHandler.apply(this,W([this,z.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,W([this,z.VERBOSE],e)),this._logHandler.apply(this,W([this,z.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,W([this,z.INFO],e)),this._logHandler.apply(this,W([this,z.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,W([this,z.WARN],e)),this._logHandler.apply(this,W([this,z.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,W([this,z.ERROR],e)),this._logHandler.apply(this,W([this,z.ERROR],e))},e}();class X{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Z="@firebase/app",ee=new Q("@firebase/app"),te={[Z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ne=new Map,ie=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){ee.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function se(e){const t=e.name;if(ie.has(t))return ee.debug(`There were multiple attempts to register component ${t}.`),!1;ie.set(t,e);for(const t of ne.values())re(t,e);return!0}function oe(e,t){return e.container.getProvider(t)}const ae=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class le{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new q("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ae.create("app-deleted",{appName:this._name})}}const ce="9.0.0";function ue(e="[DEFAULT]"){const t=ne.get(e);if(!t)throw ae.create("no-app",{appName:e});return t}function he(e,t,n){var i;let r=null!==(i=te[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ee.warn(e.join(" "))}se(new q(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}se(new q("platform-logger",(e=>new X(e)),"PRIVATE")),he(Z,"0.7.0",undefined),he("fire-js",""),he("firebase","9.0.0","app");let de="";class pe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),T(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:w(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class fe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return k(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const me=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new pe(t)}}catch(e){}return new fe},ge=me("localStorage"),ye=me("sessionStorage"),ve=new Q("@firebase/database"),_e=function(){let e=1;return function(){return e++}}(),be=function(e){const t=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(r>=55296&&r<=56319){var s=r-55296;i++,o(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new O;n.update(t);const i=n.digest();return c.encodeByteArray(i)},we=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=we.apply(null,i):t+="object"==typeof i?T(i):i,t+=" "}return t};let Te=null,Ce=!0;const ke=function(...e){if(!0===Ce&&(Ce=!1,null===Te&&!0===ye.get("logging_enabled")&&(t=!0,o(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ve.logLevel=z.VERBOSE,Te=ve.log.bind(ve),n&&ye.set("logging_enabled",!0)):"function"==typeof t?Te=t:(Te=null,ye.remove("logging_enabled")))),Te){const t=we.apply(null,e);Te(t)}var t,n},Ie=function(e){return function(...t){ke(e,...t)}},Se=function(...e){const t="FIREBASE INTERNAL ERROR: "+we(...e);ve.error(t)},Ee=function(...e){const t=`FIREBASE FATAL ERROR: ${we(...e)}`;throw ve.error(t),new Error(t)},Pe=function(...e){const t="FIREBASE WARNING: "+we(...e);ve.warn(t)},xe=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ne="[MIN_NAME]",Ae="[MAX_NAME]",Re=function(e,t){if(e===t)return 0;if(e===Ne||t===Ae)return-1;if(t===Ne||e===Ae)return 1;{const n=qe(e),i=qe(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},Oe=function(e,t){return e===t?0:e<t?-1:1},Me=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+T(t))},Le=function(e){if("object"!=typeof e||null===e)return T(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=T(t[i]),n+=":",n+=Le(e[t[i]]);return n+="}",n},De=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Fe(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const je=function(e){o(!xe(e),"Invalid JSON number");let t,n,i,r,s;0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,i=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()},Ue=new RegExp("^-?(0*)\\d{1,10}$"),qe=function(e){if(Ue.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},$e=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Pe("Exception was thrown by user callback.",t),e}),Math.floor(0))}},Ve=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class He{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Pe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class We{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(ke("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pe(e)}}class ze{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ze.OWNER="owner";const Be=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ge="websocket",Ke="long_polling";class Ye{constructor(e,t,n,i,r=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ge.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ge.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Je(e,t,n){let i;if(o("string"==typeof t,"typeof type must == string"),o("object"==typeof n,"typeof params must == object"),t===Ge)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ke)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return Fe(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class Qe{constructor(){this.counters_={}}incrementCounter(e,t=1){k(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return h(this.counters_)}}const Xe={},Ze={};function et(e){const t=e.toString();return Xe[t]||(Xe[t]=new Qe),Xe[t]}class tt{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&$e((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class nt{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ie(e),this.stats_=et(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),Je(t,Ke,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new tt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new it(((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Be.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nt.forceAllow_=!0}static forceDisallow(){nt.forceDisallow_=!0}static isAvailable(){return!(!nt.forceAllow_&&(nt.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=T(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(r=l(t),c.encodeByteArray(r,!0)),i=De(n,1840);var r;for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=T(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class it{constructor(e,t,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=_e(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=it.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){ke("frame writing exception"),e.stack&&ke(e.stack),ke(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ke("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{ke("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);class st{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ie(this.connId),this.stats_=et(t),this.connURL=st.connectionURL_(t,s,o,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i){const r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Be.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),i&&(r.ac=i),Je(e,Ge,r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ge.set("previous_websocket_failure",!0);try{{const e={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new rt(this.connURL,[],e)}}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){st.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!st.forceDisallow_}static previouslyFailed(){return ge.isInMemoryStorage||!0===ge.get("previous_websocket_failure")}markConnectionHealthy(){ge.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=w(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(o(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=T(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=De(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}st.responsesRequiredToBeHealthy=2,st.healthyTimeout=3e4;class ot{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nt,st]}initTransports_(e){const t=st&&st.isAvailable();let n=t&&!st.previouslyFailed();if(e.webSocketOnly&&(t||Pe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[st];else{const e=this.transports_=[];for(const t of ot.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class at{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ie("c:"+this.id+":"),this.transportManager_=new ot(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ve((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Me("t",e),n=Me("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Me("t",e),n=Me("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Me("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Se("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Se("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&Pe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Ve((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ve((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ge.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lt{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ct{constructor(e){this.allowedEvents_=e,this.listeners_={},o(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context))return void i.splice(e,1)}validateEventType_(e){o(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ut extends ct{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||m()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ut}getInitialEvent(e){return o("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ht{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function dt(){return new ht("")}function pt(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ft(e){return e.pieces_.length-e.pieceNum_}function mt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ht(e.pieces_,t)}function gt(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function yt(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function vt(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ht(t,0)}function _t(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof ht)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ht(n,0)}function bt(e){return e.pieceNum_>=e.pieces_.length}function wt(e,t){const n=pt(e),i=pt(t);if(null===n)return t;if(n===i)return wt(mt(e),mt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Tt(e,t){if(ft(e)!==ft(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Ct(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(ft(e)>ft(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class kt{constructor(e,t){this.errorPrefix_=t,this.parts_=yt(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=F(this.parts_[e]);It(this)}}function It(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+St(e))}function St(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Et extends ct{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Et}getInitialEvent(e){return o("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Pt=1e3;class xt extends lt{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=xt.nextPersistentConnectionId_++,this.log_=Ie("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Et.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ut.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(T(r)),o(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new p,n={p:e._path.toString(),q:e._queryObject},i={action:"g",request:n,onComplete:e=>{const i=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,i,!1,null),t.resolve(i)):t.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const e=this.outstandingGets_[r];void 0!==e&&i===e&&(delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+r+" timed out on connection"),t.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),o(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),o(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,o=r.s;xt.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&k(e,"w")){const n=I(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Pe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){var t;(e&&40===e.length||"object"==typeof(t=C(e).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){var t=C(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),o(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+T(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Se("Unrecognized action received from server: "+T(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){o(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+xt.nextConnectionId_++,r=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(e){o(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?ke("getToken() completed but was canceled"):(ke("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new at(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Pe(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&Pe(e),l())}}}interrupt(e){ke("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ke("Resuming connection for reason: "+e),delete this.interruptReasons_[e],S(this.interruptReasons_)&&(this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Le(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new ht(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){ke("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){ke("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+de.replace(/\./g,"-")]=1,m()?e["framework.cordova"]=1:g()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ut.getInstance().currentlyOnline();return S(this.interruptReasons_)&&e}}xt.nextPersistentConnectionId_=0,xt.nextConnectionId_=0;class Nt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Nt(e,t)}}class At{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Nt(Ne,e),i=new Nt(Ne,t);return 0!==this.compare(n,i)}minPost(){return Nt.MIN}}let Rt;class Ot extends At{static get __EMPTY_NODE(){return Rt}static set __EMPTY_NODE(e){Rt=e}compare(e,t){return Re(e.name,t.name)}isDefinedOn(e){throw a("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Nt.MIN}maxPost(){return new Nt(Ae,Rt)}makePost(e,t){return o("string"==typeof e,"KeyIndex indexValue must always be a string."),new Nt(e,Rt)}toString(){return".key"}}const Mt=new Ot;class Lt{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Dt{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Dt.RED,this.left=null!=i?i:Ft.EMPTY_NODE,this.right=null!=r?r:Ft.EMPTY_NODE}copy(e,t,n,i,r){return new Dt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ft.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ft.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Dt.RED=!0,Dt.BLACK=!1;class Ft{constructor(e,t=Ft.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ft(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(e){return new Ft(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Lt(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Lt(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Lt(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Lt(this.root_,null,this.comparator_,!0,e)}}function jt(e,t){return Re(e.name,t.name)}function Ut(e,t){return Re(e,t)}let qt;Ft.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new Dt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $t=function(e){return"number"==typeof e?"number:"+je(e):"string:"+e},Vt=function(e){if(e.isLeafNode()){const t=e.val();o("string"==typeof t||"number"==typeof t||"object"==typeof t&&k(t,".sv"),"Priority must be a string or number.")}else o(e===qt||e.isEmpty(),"priority of unexpected type.");o(e===qt||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ht,Wt,zt;class Bt{constructor(e,t=Bt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,o(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Vt(this.priorityNode_)}static set __childrenNodeConstructor(e){Ht=e}static get __childrenNodeConstructor(){return Ht}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Bt(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Bt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return bt(e)?this:".priority"===pt(e)?this.priorityNode_:Bt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Bt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=pt(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(o(".priority"!==n||1===ft(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Bt.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$t(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?je(this.value_):this.value_,this.lazyHash_=be(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Bt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Bt.__childrenNodeConstructor?-1:(o(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=Bt.VALUE_TYPE_ORDER.indexOf(t),r=Bt.VALUE_TYPE_ORDER.indexOf(n);return o(i>=0,"Unknown leaf type: "+t),o(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Bt.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Gt=new class extends At{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?Re(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Nt.MIN}maxPost(){return new Nt(Ae,new Bt("[PRIORITY-POST]",zt))}makePost(e,t){const n=Wt(e);return new Nt(t,new Bt("[PRIORITY-POST]",n))}toString(){return".priority"}},Kt=Math.log(2);class Yt{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Kt,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Jt=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Dt(a,o.node,Dt.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return o=e[l],a=n?n(o):o,new Dt(a,o.node,Dt.BLACK,c,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),u=e[s],h=n?n(u):u;l(new Dt(h,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,Dt.BLACK):(a(i,Dt.BLACK),a(i,Dt.RED))}return s}(new Yt(e.length));return new Ft(i||t,s)};let Qt;const Xt={};class Zt{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return o(Xt&&Gt,"ChildrenNode.ts has not been loaded"),Qt=Qt||new Zt({".priority":Xt},{".priority":Gt}),Qt}get(e){const t=I(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ft?t:null}hasIndex(e){return k(this.indexSet_,e.toString())}addIndex(e,t){o(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(Nt.Wrap);let s,a=r.getNext();for(;a;)i=i||e.isDefinedOn(a.node),n.push(a),a=r.getNext();s=i?Jt(n,e.getCompare()):Xt;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=s,new Zt(u,c)}addToIndexes(e,t){const n=E(this.indexes_,((n,i)=>{const r=I(this.indexSet_,i);if(o(r,"Missing index implementation for "+i),n===Xt){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(Nt.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),Jt(n,r.getCompare())}return Xt}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new Nt(e.name,i))),r.insert(e,e.node)}}));return new Zt(n,this.indexSet_)}removeFromIndexes(e,t){const n=E(this.indexes_,(n=>{if(n===Xt)return n;{const i=t.get(e.name);return i?n.remove(new Nt(e.name,i)):n}}));return new Zt(n,this.indexSet_)}}let en;class tn{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Vt(this.priorityNode_),this.children_.isEmpty()&&o(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return en||(en=new tn(new Ft(Ut),null,Zt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||en}updatePriority(e){return this.children_.isEmpty()?this:new tn(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?en:t}}getChild(e){const t=pt(e);return null===t?this:this.getImmediateChild(t).getChild(mt(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(o(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Nt(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?en:this.priorityNode_;return new tn(i,s,r)}}updateChild(e,t){const n=pt(e);if(null===n)return t;{o(".priority"!==pt(e)||1===ft(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(mt(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(Gt,((s,o)=>{t[s]=o.val(e),n++,r&&tn.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Gt,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":be(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Nt(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Nt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Nt(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Nt.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Nt.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===nn?-1:0}withIndex(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new tn(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Mt||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Gt),n=t.getIterator(Gt);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===Mt?null:this.indexMap_.get(e.toString())}}tn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const nn=new class extends tn{constructor(){super(new Ft(Ut),tn.EMPTY_NODE,Zt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tn.EMPTY_NODE}isEmpty(){return!1}};function rn(e,t=null){if(null===e)return tn.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),o(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Bt(e,rn(t));if(e instanceof Array){let n=tn.EMPTY_NODE;return Fe(e,((t,i)=>{if(k(e,t)&&"."!==t.substring(0,1)){const e=rn(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(rn(t))}{const n=[];let i=!1;if(Fe(e,((e,t)=>{if("."!==e.substring(0,1)){const r=rn(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new Nt(e,r)))}})),0===n.length)return tn.EMPTY_NODE;const r=Jt(n,jt,(e=>e.name),Ut);if(i){const e=Jt(n,Gt.getCompare());return new tn(r,rn(t),new Zt({".priority":e},{".priority":Gt}))}return new tn(r,rn(t),Zt.Default)}}Object.defineProperties(Nt,{MIN:{value:new Nt(Ne,tn.EMPTY_NODE)},MAX:{value:new Nt(Ae,nn)}}),Ot.__EMPTY_NODE=tn.EMPTY_NODE,Bt.__childrenNodeConstructor=tn,qt=nn,zt=nn,function(e){Wt=e}(rn);class sn extends At{constructor(e){super(),this.indexPath_=e,o(!bt(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?Re(e.name,t.name):r}makePost(e,t){const n=rn(e),i=tn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Nt(t,i)}maxPost(){const e=tn.EMPTY_NODE.updateChild(this.indexPath_,nn);return new Nt(Ae,e)}toString(){return yt(this.indexPath_,0).join("/")}}const on=new class extends At{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Re(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Nt.MIN}maxPost(){return Nt.MAX}makePost(e,t){const n=rn(e);return new Nt(t,n)}toString(){return".value"}};function an(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class ln{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return o(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return o(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ne}hasEnd(){return this.endSet_}getIndexEndValue(){return o(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return o(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ae}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return o(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gt}copy(){const e=new ln;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cn(e){const t={};if(e.isDefault())return t;let n;return e.index_===Gt?n="$priority":e.index_===on?n="$value":e.index_===Mt?n="$key":(o(e.index_ instanceof sn,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=T(n),e.startSet_&&(t.startAt=T(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+T(e.indexStartName_))),e.endSet_&&(t.endAt=T(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+T(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function un(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Gt&&(t.i=e.index_.toString()),t}class hn extends lt{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=Ie("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(o(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=hn.getListenId_(e,n),o={};this.listens_[s]=o;const a=cn(e._queryParams);this.restRequest_(r+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),I(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=hn.getListenId_(e,t);delete this.listens_[n]}get(e){const t=cn(e._queryParams),n=e._path.toString(),i=new p;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+N(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=w(o.responseText)}catch(e){Pe("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Pe("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class dn{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function pn(){return{value:null,children:new Map}}function fn(e,t,n){if(bt(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=pt(t);e.children.has(i)||e.children.set(i,pn()),fn(e.children.get(i),t=mt(t),n)}}function mn(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{mn(i,new ht(t.toString()+"/"+e),n)}))}class gn{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fe(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class yn{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new gn(e);const n=1e4+2e4*Math.random();Ve(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Fe(e,((e,i)=>{i>0&&k(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),Ve(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var vn;function _n(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(vn||(vn={}));class bn{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=vn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(bt(this.path)){if(null!=this.affectedTree.value)return o(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ht(e));return new bn(dt(),t,this.revert)}}return o(pt(this.path)===e,"operationForChild called for unrelated child."),new bn(mt(this.path),this.affectedTree,this.revert)}}class wn{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=vn.OVERWRITE}operationForChild(e){return bt(this.path)?new wn(this.source,dt(),this.snap.getImmediateChild(e)):new wn(this.source,mt(this.path),this.snap)}}class Tn{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=vn.MERGE}operationForChild(e){if(bt(this.path)){const t=this.children.subtree(new ht(e));return t.isEmpty()?null:t.value?new wn(this.source,dt(),t.value):new Tn(this.source,dt(),t)}return o(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tn(this.source,mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cn{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(bt(e))return this.isFullyInitialized()&&!this.filtered_;const t=pt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function kn(e,t,n,i,r,s){const o=i.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw a("Should only compare child_ events.");const i=new Nt(t.childName,t.snapshotNode),r=new Nt(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),o.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function In(e,t){return{eventCache:e,serverCache:t}}function Sn(e,t,n,i){return In(new Cn(t,n,i),e.serverCache)}function En(e,t,n,i){return In(e.eventCache,new Cn(t,n,i))}function Pn(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function xn(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Nn;class An{constructor(e,t=(()=>(Nn||(Nn=new Ft(Oe)),Nn))()){this.value=e,this.children=t}static fromObject(e){let t=new An(null);return Fe(e,((e,n)=>{t=t.set(new ht(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:dt(),value:this.value};if(bt(e))return null;{const n=pt(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(mt(e),t);return null!=r?{path:_t(new ht(n),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(bt(e))return this;{const t=pt(e),n=this.children.get(t);return null!==n?n.subtree(mt(e)):new An(null)}}set(e,t){if(bt(e))return new An(t,this.children);{const n=pt(e),i=(this.children.get(n)||new An(null)).set(mt(e),t),r=this.children.insert(n,i);return new An(this.value,r)}}remove(e){if(bt(e))return this.children.isEmpty()?new An(null):new An(null,this.children);{const t=pt(e),n=this.children.get(t);if(n){const i=n.remove(mt(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new An(null):new An(this.value,r)}return this}}get(e){if(bt(e))return this.value;{const t=pt(e),n=this.children.get(t);return n?n.get(mt(e)):null}}setTree(e,t){if(bt(e))return t;{const n=pt(e),i=(this.children.get(n)||new An(null)).setTree(mt(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new An(this.value,r)}}fold(e){return this.fold_(dt(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(_t(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,dt(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(bt(e))return null;{const i=pt(e),r=this.children.get(i);return r?r.findOnPath_(mt(e),_t(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,dt(),t)}foreachOnPath_(e,t,n){if(bt(e))return this;{this.value&&n(t,this.value);const i=pt(e),r=this.children.get(i);return r?r.foreachOnPath_(mt(e),_t(t,i),n):new An(null)}}foreach(e){this.foreach_(dt(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(_t(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Rn{constructor(e){this.writeTree_=e}static empty(){return new Rn(new An(null))}}function On(e,t,n){if(bt(t))return new Rn(new An(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=wt(r,t);return s=s.updateChild(o,n),new Rn(e.writeTree_.set(r,s))}{const i=new An(n),r=e.writeTree_.setTree(t,i);return new Rn(r)}}}function Mn(e,t,n){let i=e;return Fe(n,((e,n)=>{i=On(i,_t(t,e),n)})),i}function Ln(e,t){if(bt(t))return Rn.empty();{const n=e.writeTree_.setTree(t,new An(null));return new Rn(n)}}function Dn(e,t){return null!=Fn(e,t)}function Fn(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(wt(n.path,t)):null}function jn(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Gt,((e,n)=>{t.push(new Nt(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Nt(e,n.value))})),t}function Un(e,t){if(bt(t))return e;{const n=Fn(e,t);return new Rn(null!=n?new An(n):e.writeTree_.subtree(t))}}function qn(e){return e.writeTree_.isEmpty()}function $n(e,t){return Vn(dt(),e.writeTree_,t)}function Vn(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?(o(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Vn(_t(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(_t(e,".priority"),i)),n}}function Hn(e,t){return ei(t,e)}function Wn(e,t){if(e.snap)return Ct(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ct(_t(e.path,n),t))return!0;return!1}function zn(e){return e.visible}function Bn(e,t,n){let i=Rn.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)Ct(n,e)?(t=wt(n,e),i=On(i,t,s.snap)):Ct(e,n)&&(t=wt(e,n),i=On(i,dt(),s.snap.getChild(t)));else{if(!s.children)throw a("WriteRecord should have .snap or .children");if(Ct(n,e))t=wt(n,e),i=Mn(i,t,s.children);else if(Ct(e,n))if(t=wt(e,n),bt(t))i=Mn(i,dt(),s.children);else{const e=I(s.children,pt(t));if(e){const n=e.getChild(mt(t));i=On(i,dt(),n)}}}}}return i}function Gn(e,t,n,i,r){if(i||r){const s=Un(e.visibleWrites,t);if(!r&&qn(s))return n;if(r||null!=n||Dn(s,dt())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Ct(e.path,t)||Ct(t,e.path))};return $n(Bn(e.allWrites,s,t),n||tn.EMPTY_NODE)}return null}{const i=Fn(e.visibleWrites,t);if(null!=i)return i;{const i=Un(e.visibleWrites,t);return qn(i)?n:null!=n||Dn(i,dt())?$n(i,n||tn.EMPTY_NODE):null}}}function Kn(e,t,n,i){return Gn(e.writeTree,e.treePath,t,n,i)}function Yn(e,t){return function(e,t,n){let i=tn.EMPTY_NODE;const r=Fn(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Gt,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=Un(e.visibleWrites,t);return n.forEachChild(Gt,((e,t)=>{const n=$n(Un(r,new ht(e)),t);i=i.updateImmediateChild(e,n)})),jn(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return jn(Un(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function Jn(e,t,n,i){return function(e,t,n,i,r){o(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=_t(t,n);if(Dn(e.visibleWrites,s))return null;{const t=Un(e.visibleWrites,s);return qn(t)?r.getChild(n):$n(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Qn(e,t){return function(e,t){return Fn(e.visibleWrites,t)}(e.writeTree,_t(e.treePath,t))}function Xn(e,t,n){return function(e,t,n,i){const r=_t(t,n),s=Fn(e.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?$n(Un(e.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Zn(e,t){return ei(_t(e.treePath,t),e.writeTree)}function ei(e,t){return{treePath:e,writeTree:t}}class ti{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;o("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),o(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(n,an(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(n,(r=n,{type:"child_removed",snapshotNode:i.oldSnap,childName:r}));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(n,function(e,t){return{type:"child_added",snapshotNode:t,childName:e}}(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw a("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,an(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e);var r}getChanges(){return Array.from(this.changeMap.values())}}const ni=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ii{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Cn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xn(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xn(this.viewCache_),r=function(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=Un(e.visibleWrites,t),c=Fn(l,dt());if(null!=c)a=c;else{if(null==n)return[];a=$n(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function ri(e,t,n,i,r,s){const a=t.eventCache;if(null!=Qn(i,n))return t;{let l,c;if(bt(n))if(o(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=xn(t),r=Yn(i,n instanceof tn?n:tn.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=Kn(i,xn(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=pt(n);if(".priority"===u){o(1===ft(n),"Can't have a priority with additional path components");const r=a.getNode();c=t.serverCache.getNode();const s=Jn(i,n,r,c);l=null!=s?e.filter.updatePriority(r,s):a.getNode()}else{const o=mt(n);let h;if(a.isCompleteForChild(u)){c=t.serverCache.getNode();const e=Jn(i,n,a.getNode(),c);h=null!=e?a.getNode().getImmediateChild(u).updateChild(o,e):a.getNode().getImmediateChild(u)}else h=Xn(i,u,t.serverCache);l=null!=h?e.filter.updateChild(a.getNode(),u,h,o,r,s):a.getNode()}}return Sn(t,l,a.isFullyInitialized()||bt(n),e.filter.filtersNodes())}}function si(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(bt(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=pt(n);if(!l.isCompleteForPath(n)&&ft(n)>1)return t;const r=mt(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,ni,null)}const h=En(t,c,l.isFullyInitialized()||bt(n),u.filtersNodes());return ri(e,h,n,r,new ii(r,h,s),a)}function oi(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const u=new ii(r,t,s);if(bt(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=Sn(t,c,!0,e.filter.filtersNodes());else{const r=pt(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Sn(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=mt(n),c=a.getNode().getImmediateChild(r);let h;if(bt(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===gt(s)&&e.getChild(vt(s)).isEmpty()?e:e.updateChild(s,i):tn.EMPTY_NODE}l=c.equals(h)?t:Sn(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function ai(e,t){return e.eventCache.isCompleteForChild(t)}function li(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function ci(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=bt(n)?i:new An(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(u.hasChild(n)){const l=li(0,t.serverCache.getNode().getImmediateChild(n),i);c=si(e,c,new ht(n),l,r,s,o,a)}})),l.children.inorderTraversal(((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===i.value;if(!u.hasChild(n)&&!l){const l=li(0,t.serverCache.getNode().getImmediateChild(n),i);c=si(e,c,new ht(n),l,r,s,o,a)}})),c}function ui(e,t){const n=xn(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!bt(t)&&!n.getImmediateChild(pt(t)).isEmpty())?n.getChild(t):null}function hi(e,t,n,i){t.type===vn.MERGE&&null!==t.source.queryId&&(o(xn(e.viewCache_),"We should always have a full cache before handling merges"),o(Pn(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=function(e,t,n,i,r){const s=new ti;let l,c;if(n.type===vn.OVERWRITE){const a=n;a.source.fromUser?l=oi(e,t,a.path,a.snap,i,r,s):(o(a.source.fromServer,"Unknown source."),c=a.source.tagged||t.serverCache.isFiltered()&&!bt(a.path),l=si(e,t,a.path,a.snap,i,r,c,s))}else if(n.type===vn.MERGE){const a=n;a.source.fromUser?l=function(e,t,n,i,r,s,o){let a=t;return i.foreach(((i,l)=>{const c=_t(n,i);ai(t,pt(c))&&(a=oi(e,a,c,l,r,s,o))})),i.foreach(((i,l)=>{const c=_t(n,i);ai(t,pt(c))||(a=oi(e,a,c,l,r,s,o))})),a}(e,t,a.path,a.children,i,r,s):(o(a.source.fromServer,"Unknown source."),c=a.source.tagged||t.serverCache.isFiltered(),l=ci(e,t,a.path,a.children,i,r,c,s))}else if(n.type===vn.ACK_USER_WRITE){const a=n;l=a.revert?function(e,t,n,i,r,s){let a;if(null!=Qn(i,n))return t;{const l=new ii(i,t,r),c=t.eventCache.getNode();let u;if(bt(n)||".priority"===pt(n)){let n;if(t.serverCache.isFullyInitialized())n=Kn(i,xn(t));else{const e=t.serverCache.getNode();o(e instanceof tn,"serverChildren would be complete if leaf node"),n=Yn(i,e)}n=n,u=e.filter.updateFullNode(c,n,s)}else{const r=pt(n);let o=Xn(i,r,t.serverCache);null==o&&t.serverCache.isCompleteForChild(r)&&(o=c.getImmediateChild(r)),u=null!=o?e.filter.updateChild(c,r,o,mt(n),l,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,tn.EMPTY_NODE,mt(n),l,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Kn(i,xn(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Qn(i,dt()),Sn(t,u,a,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=Qn(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(bt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return si(e,t,n,l.getNode().getChild(n),r,s,a,o);if(bt(n)){let i=new An(null);return l.getNode().forEachChild(Mt,((e,t)=>{i=i.set(new ht(e),t)})),ci(e,t,n,i,r,s,a,o)}return t}{let c=new An(null);return i.foreach(((e,t)=>{const i=_t(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))})),ci(e,t,n,c,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==vn.LISTEN_COMPLETE)throw a("Unknown operation type: "+n.type);l=function(e,t,n,i,r){const s=t.serverCache;return ri(e,En(t,s.getNode(),s.isFullyInitialized()||bt(n),s.isFiltered()),n,i,ni,r)}(e,t,n.path,i,s)}const u=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Pn(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push({type:"value",snapshotNode:Pn(t)})}}(t,l,u),{viewCache:l,changes:u}}(e.processor_,r,t,n,i);var l,c;return l=e.processor_,c=s.viewCache,o(c.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),o(c.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed"),o(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,function(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),kn(e,r,"child_removed",t,i,n),kn(e,r,"child_added",t,i,n),kn(e,r,"child_moved",s,i,n),kn(e,r,"child_changed",t,i,n),kn(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}(e,s.changes,s.viewCache.eventCache.getNode(),null)}let di,pi;function fi(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return o(null!=s,"SyncTree gave us an op for an invalid query."),hi(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(hi(s,t,n,i));return r}}function mi(e,t){let n=null;for(const i of e.views.values())n=n||ui(i,t);return n}class gi{constructor(e){this.listenProvider_=e,this.syncPointTree_=new An(null),this.pendingWriteTree_={visibleWrites:Rn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yi(e,t,n,i,r){return function(e,t,n,i,r){o(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=On(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?wi(e,new wn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function vi(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));o(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,a=e.allWrites.length-1;for(;r&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Wn(t,i.path)?r=!1:Ct(i.path,t.path)&&(s=!0)),a--}return!!r&&(s?(function(e){e.visibleWrites=Bn(e.allWrites,zn,dt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(i.snap?e.visibleWrites=Ln(e.visibleWrites,i.path):Fe(i.children,(t=>{e.visibleWrites=Ln(e.visibleWrites,_t(i.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new An(null);return null!=i.snap?t=t.set(dt(),!0):Fe(i.children,(e=>{t=t.set(new ht(e),!0)})),wi(e,new bn(i.path,t,n))}return[]}function _i(e,t,n){return wi(e,new wn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function bi(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=mi(n,wt(e,t));if(i)return i}));return Gn(i,t,r,n,!0)}function wi(e,t){return Ti(t,e.syncPointTree_,null,Hn(e.pendingWriteTree_,dt()))}function Ti(e,t,n,i){if(bt(e.path))return Ci(e,t,n,i);{const r=t.get(dt());null==n&&null!=r&&(n=mi(r,dt()));let s=[];const o=pt(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Zn(i,o);s=s.concat(Ti(a,l,e,t))}return r&&(s=s.concat(fi(r,e,i,n))),s}}function Ci(e,t,n,i){const r=t.get(dt());null==n&&null!=r&&(n=mi(r,dt()));let s=[];return t.children.inorderTraversal(((t,r)=>{const o=n?n.getImmediateChild(t):null,a=Zn(i,t),l=e.operationForChild(t);l&&(s=s.concat(Ci(l,r,o,a)))})),r&&(s=s.concat(fi(r,e,i,n))),s}function ki(e,t){return e.tagToQueryMap.get(t)}function Ii(e){const t=e.indexOf("$");return o(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ht(e.substr(0,t))}}function Si(e,t,n){const i=e.syncPointTree_.get(t);return o(i,"Missing sync point for query tag that we're tracking"),fi(i,n,Hn(e.pendingWriteTree_,t),null)}class Ei{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ei(t)}node(){return this.node_}}class Pi{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_t(this.path_,e);return new Pi(this.syncTree_,t)}node(){return bi(this.syncTree_,this.path_)}}const xi=function(e,t,n){return e&&"object"==typeof e?(o(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Ni(e[".sv"],t,n):"object"==typeof e[".sv"]?Ai(e[".sv"],t):void o(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ni=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:o(!1,"Unexpected server value: "+e)}},Ai=function(e,t,n){e.hasOwnProperty("increment")||o(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&o(!1,"Unexpected increment value: "+i);const r=t.node();if(o(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},Ri=function(e,t,n){return Oi(e,new Ei(t),n)};function Oi(e,t,n){const i=e.getPriority().val(),r=xi(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=xi(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new Bt(s,rn(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Bt(r))),i.forEachChild(Gt,((e,i)=>{const r=Oi(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class Mi{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Li(e,t){let n=t instanceof ht?t:new ht(t),i=e,r=pt(n);for(;null!==r;){const e=I(i.node.children,r)||{children:{},childCount:0};i=new Mi(r,i,e),n=mt(n),r=pt(n)}return i}function Di(e){return e.node.value}function Fi(e,t){e.node.value=t,Vi(e)}function ji(e){return e.node.childCount>0}function Ui(e,t){Fe(e.node.children,((n,i)=>{t(new Mi(n,e,i))}))}function qi(e,t,n,i){n&&!i&&t(e),Ui(e,(e=>{qi(e,t,!0,i)})),n&&i&&t(e)}function $i(e){return new ht(null===e.parent?e.name:$i(e.parent)+"/"+e.name)}function Vi(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Di(e)&&!ji(e)}(n),r=k(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Vi(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Vi(e))}(e.parent,e.name,e)}const Hi=/[\[\].#$\/\u0000-\u001F\u007F]/,Wi=/[\[\].#$\u0000-\u001F\u007F]/,zi=10485760,Bi=function(e){return"string"==typeof e&&0!==e.length&&!Hi.test(e)},Gi=function(e){return"string"==typeof e&&0!==e.length&&!Wi.test(e)},Ki=function(e,t,n){const i=n instanceof ht?new kt(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+St(i));if("function"==typeof t)throw new Error(e+"contains a function "+St(i)+" with contents = "+t.toString());if(xe(t))throw new Error(e+"contains "+t.toString()+" "+St(i));if("string"==typeof t&&t.length>zi/3&&F(t)>zi)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+St(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(Fe(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Bi(t)))throw new Error(e+" contains an invalid key ("+t+") "+St(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=F(t),It(e)}(i,t),Ki(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=F(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+St(i)+" in addition to actual children.")}},Yi=function(e,t,n,i){if(!(i&&void 0===n||Gi(n)))throw new Error(D(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class Ji{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qi(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Tt(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function Xi(e,t,n){Qi(e,n),function(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];r&&(t(r.path)?(Zi(e.eventLists_[i]),e.eventLists_[i]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}(e,(e=>Ct(e,t)||Ct(t,e)))}function Zi(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();Te&&ke("event: "+n.toString()),$e(i)}}}class er{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ji,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pn(),this.transactionQueueTree_=new Mi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tr(e,t,n){if(e.stats_=et(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new hn(e.repoInfo_,((t,n,i,r)=>{rr(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>sr(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{T(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new xt(e.repoInfo_,t,((t,n,i,r)=>{rr(e,t,n,i,r)}),(t=>{sr(e,t)}),(t=>{!function(e,t){Fe(t,((t,n)=>{or(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const i=t.toString();return Ze[i]||(Ze[i]=new yn(e.stats_,e.server_)),Ze[i]}(e.repoInfo_),e.infoData_=new dn,e.infoSyncTree_=new gi({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=_i(e.infoSyncTree_,t._path,o),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),or(e,"connected",!1),e.serverSyncTree_=new gi({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);Xi(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function nr(e){const t=e.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ir(e){return(t=(t={timestamp:nr(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function rr(e,t,n,i,r){e.dataUpdateCount++;const s=new ht(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=E(n,(e=>rn(e)));o=function(e,t,n,i){const r=ki(e,i);if(r){const i=Ii(r),s=i.path,o=i.queryId,a=wt(s,t),l=An.fromObject(n);return Si(e,s,new Tn(_n(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=rn(n);o=function(e,t,n,i){const r=ki(e,i);if(null!=r){const i=Ii(r),s=i.path,o=i.queryId,a=wt(s,t);return Si(e,s,new wn(_n(o),a,n))}return[]}(e.serverSyncTree_,s,t,r)}else if(i){const t=E(n,(e=>rn(e)));o=function(e,t,n){const i=An.fromObject(n);return wi(e,new Tn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=rn(n);o=_i(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=dr(e,s)),Xi(e.eventQueue_,a,o)}function sr(e,t){or(e,"connected",t),!1===t&&function(e){cr(e,"onDisconnectEvents");const t=ir(e),n=pn();mn(e.onDisconnect_,dt(),((i,r)=>{const s=function(e,t,n,i){return Oi(t,new Pi(n,e),i)}(i,r,e.serverSyncTree_,t);fn(n,i,s)}));let i=[];mn(n,dt(),((t,n)=>{i=i.concat(_i(e.serverSyncTree_,t,n));const r=yr(e,t);dr(e,r)})),e.onDisconnect_=pn(),Xi(e.eventQueue_,dt(),i)}(e)}function or(e,t,n){const i=new ht("/.info/"+t),r=rn(n);e.infoData_.updateSnapshot(i,r);const s=_i(e.infoSyncTree_,i,r);Xi(e.eventQueue_,i,s)}function ar(e){return e.nextWriteId_++}function lr(e,t,n,i,r){cr(e,"set",{path:t.toString(),value:n,priority:i});const s=ir(e),o=rn(n,i),a=bi(e.serverSyncTree_,t),l=Ri(o,a,s),c=ar(e),u=yi(e.serverSyncTree_,t,l,c,!0);Qi(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,i)=>{const s="ok"===n;s||Pe("set at "+t+" failed: "+n);const o=vi(e.serverSyncTree_,c,!s);Xi(e.eventQueue_,t,o),function(e,t,n,i){t&&$e((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}(0,r,n,i)}));const h=yr(e,t);dr(e,h),Xi(e.eventQueue_,h,[])}function cr(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ke(n,...t)}function ur(e,t,n){return bi(e.serverSyncTree_,t,n)||tn.EMPTY_NODE}function hr(e,t=e.transactionQueueTree_){if(t||gr(e,t),Di(t)){const n=fr(e,t);o(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=ur(e,t,i);let s=r;const a=r.hash();for(let e=0;e<n.length;e++){const i=n[e];o(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const r=wt(t,i.path);s=s.updateChild(r,i.currentOutputSnapshotRaw)}const l=s.val(!0),c=t;e.server_.put(c.toString(),l,(i=>{cr(e,"transaction put response",{path:c.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(vi(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();gr(e,Li(e.transactionQueueTree_,t)),hr(e,e.transactionQueueTree_),Xi(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)$e(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Pe("transaction at "+c.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}dr(e,t)}}),a)}(e,$i(t),n)}else ji(t)&&Ui(t,(t=>{hr(e,t)}))}function dr(e,t){const n=pr(e,t),i=$i(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const c=t[l],u=wt(n,c.path);let h,d=!1;if(o(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)d=!0,h=c.abortReason,r=r.concat(vi(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)d=!0,h="maxretry",r=r.concat(vi(e.serverSyncTree_,c.currentWriteId,!0));else{const n=ur(e,c.path,s);c.currentInputSnapshot=n;const i=t[l].update(n.val());if(void 0!==i){Ki("transaction failed: Data returned ",i,c.path);let t=rn(i);"object"==typeof i&&null!=i&&k(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=c.currentWriteId,a=ir(e),l=Ri(t,n,a);c.currentOutputSnapshotRaw=t,c.currentOutputSnapshotResolved=l,c.currentWriteId=ar(e),s.splice(s.indexOf(o),1),r=r.concat(yi(e.serverSyncTree_,c.path,l,c.currentWriteId,c.applyLocally)),r=r.concat(vi(e.serverSyncTree_,o,!0))}else d=!0,h="nodata",r=r.concat(vi(e.serverSyncTree_,c.currentWriteId,!0))}Xi(e.eventQueue_,n,r),r=[],d&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===h?i.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):i.push((()=>t[l].onComplete(new Error(h),!1,null)))))}var a;gr(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)$e(i[e]);hr(e,e.transactionQueueTree_)}(e,fr(e,n),i),i}function pr(e,t){let n,i=e.transactionQueueTree_;for(n=pt(t);null!==n&&void 0===Di(i);)i=Li(i,n),n=pt(t=mt(t));return i}function fr(e,t){const n=[];return mr(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function mr(e,t,n){const i=Di(t);if(i)for(let e=0;e<i.length;e++)n.push(i[e]);Ui(t,(t=>{mr(e,t,n)}))}function gr(e,t){const n=Di(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Fi(t,n.length>0?n:void 0)}Ui(t,(t=>{gr(e,t)}))}function yr(e,t){const n=$i(pr(e,t)),i=Li(e.transactionQueueTree_,t);return function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{vr(e,t)})),vr(e,i),qi(i,(t=>{vr(e,t)})),n}function vr(e,t){const n=Di(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(o(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(o(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(vi(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Fi(t,void 0):n.length=s+1,Xi(e.eventQueue_,$i(t),r);for(let e=0;e<i.length;e++)$e(i[e])}}const _r=function(e,t){const n=br(e),i=n.namespace;"firebase.com"===n.domain&&Ee(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Ee("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Pe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ye(n.host,n.secure,i,t,r,"",i!==n.subdomain),path:new ht(n.pathString)}},br=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Pe(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class wr{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return bt(this._path)?null:gt(this._path)}get ref(){return new Tr(this._repo,this._path)}get _queryIdentifier(){const e=un(this._queryParams),t=Le(e);return"{}"===t?"default":t}get _queryObject(){return un(this._queryParams)}isEqual(e){if(!((e=j(e))instanceof wr))return!1;const t=this._repo===e._repo,n=Tt(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Tr extends wr{constructor(e,t){super(e,t,new ln,!1)}get parent(){const e=vt(this._path);return null===e?null:new Tr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function Cr(e,t){return(e=j(e))._checkNotDeleted("ref"),void 0!==t?function(e,t){var n,i,r,s;return null===pt((e=j(e))._path)?(n="child",i="path",s=!1,(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Yi(n,i,r,s)):Yi("child","path",t,!1),new Tr(e._repo,_t(e._path,t))}(e._root,t):e._root}function kr(e,t){(function(e,t){if(".info"===pt(t))throw new Error(e+" failed = Can't modify data under /.info/")})("set",(e=j(e))._path),function(e,t,n,i){i&&void 0===t||Ki(D(e,"value"),t,n)}("set",t,e._path,!1);const n=new p;return lr(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}!function(e){o(!di,"__referenceConstructor has already been defined"),di=e}(Tr),function(e){o(!pi,"__referenceConstructor has already been defined"),pi=e}(Tr);const Ir={};function Sr(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||Ee("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ke("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=_r(s,r),c=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=_r(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const u=r&&o?new ze(ze.OWNER):new We(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Bi(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Gi(e)}(n))throw new Error(D(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),bt(l.path)||Ee("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=Ir[t.name];r||(r={},Ir[t.name]=r);let s=r[e.toURLString()];return s&&Ee("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new er(e,false,n,i),r[e.toURLString()]=s,s}(c,e,u,new He(e.name,n));return new Er(h,e)}class Er{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(tr(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tr(this._repo,dt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=Ir[t];n&&n[e.key]===e||Ee(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ee("Cannot call "+e+" on a deleted database.")}}xt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},xt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},de="9.0.0",se(new q("database",((e,{instanceIdentifier:t})=>Sr(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),he("@firebase/database","0.12.0",void 0);const Pr=new v("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xr=new Q("@firebase/auth");function Nr(e,...t){xr.logLevel<=z.ERROR&&xr.error(`Auth (9.0.0): ${e}`,...t)}function Ar(e,...t){throw Or(e,...t)}function Rr(e,...t){return Or(e,...t)}function Or(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Pr.create(e,...t)}function Mr(e,t,...n){if(!e)throw Or(t,...n)}function Lr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nr(t),new Error(t)}function Dr(e,t){e||Lr(t)}const Fr=new Map;function jr(e){Dr(e instanceof Function,"Expected a class definition");let t=Fr.get(e);return t?(Dr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fr.set(e,t),t)}function Ur(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qr(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function $r(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||!("http:"===qr()||"https:"===qr())&&("object"!=typeof(e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)||void 0===e.id)&&!("connection"in navigator)||navigator.onLine;var e}class Vr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dr(t>e,"Short delay should be less than long delay!"),this.isMobile=m()||g()}get(){return $r()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hr(e,t){Dr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Wr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},Br=new Vr(3e4,6e4);function Gr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Kr(e,t,n,i,r={}){return Yr(e,r,(()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=N(Object.assign({key:e.config.apiKey},s)).slice(1),a=new(Wr.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&a.set("X-Firebase-Locale",e.languageCode),Wr.fetch()(Qr(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Yr(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},zr),t);try{const t=new Xr(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Zr(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=(r.ok?s.errorMessage:s.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw Zr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw Zr(e,"email-already-in-use",s);Ar(e,i[t]||t.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(t){if(t instanceof y)throw t;Ar(e,"network-request-failed")}}async function Jr(e,t,n,i,r={}){const s=await Kr(e,t,n,i,r);return"mfaPendingCredential"in s&&Ar(e,"multi-factor-auth-required",{serverResponse:s}),s}function Qr(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Hr(e.config,r):`${e.config.apiScheme}://${r}`}class Xr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Rr(this.auth,"timeout"))),Br.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zr(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Rr(e,t,i);return r.customData._tokenResponse=n,r}function es(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function ts(e){return 1e3*Number(e)}function ns(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Nr("JWT malformed, contained fewer than 3 sections"),null;try{const e=u(n);return e?JSON.parse(e):(Nr("Failed to decode base64 JWT payload"),null)}catch(e){return Nr("Caught error parsing JWT payload as JSON",e),null}}async function is(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof y&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class rs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class ss{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=es(this.lastLoginAt),this.creationTime=es(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function os(e){var n;const i=e.auth,r=await e.getIdToken(),s=await is(e,async function(e,t){return Kr(e,"POST","/v1/accounts:lookup",t)}(i,{idToken:r}));Mr(null==s?void 0:s.users.length,i,"internal-error");const o=s.users[0];e._notifyReloadListener(o);const a=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((e=>{var{providerId:n}=e,i=t(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})):[],l=(c=e.providerData,u=a,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const h=e.isAnonymous,d=!(e.email&&o.passwordHash||(null==l?void 0:l.length)),p=!!h&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ss(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(e,f)}class as{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Mr(e.idToken,"internal-error"),Mr(void 0!==e.idToken,"internal-error"),Mr(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=ns(e);return Mr(t,"internal-error"),Mr(void 0!==t.exp,"internal-error"),Mr(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Mr(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Yr(e,{},(()=>{const n=N({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Qr(e,i,"/v1/token",`key=${r}`);return Wr.fetch()(s,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new as;return n&&(Mr("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(Mr("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(Mr("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new as,this.toJSON())}_performRefresh(){return Lr("not implemented")}}function ls(e,t){Mr("string"==typeof e||void 0===e,"internal-error",{appName:t})}class cs{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=t(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new rs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new ss(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await is(this,this.stsTokenManager.getToken(this.auth,e));return Mr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=j(e),i=await n.getIdToken(t),r=ns(i);Mr(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:es(ts(r.auth_time)),issuedAtTime:es(ts(r.iat)),expirationTime:es(ts(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=j(e);await os(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Mr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new cs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Mr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await os(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await is(this,async function(e,t){return Kr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:T}=t;Mr(v&&T,e,"internal-error");const C=as.fromJSON(this.name,T);Mr("string"==typeof v,e,"internal-error"),ls(u,e.name),ls(h,e.name),Mr("boolean"==typeof _,e,"internal-error"),Mr("boolean"==typeof b,e,"internal-error"),ls(d,e.name),ls(p,e.name),ls(f,e.name),ls(m,e.name),ls(g,e.name),ls(y,e.name);const k=new cs({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:C,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(k.providerData=w.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const i=new as;i.updateFromServerResponse(t);const r=new cs({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await os(r),r}}class us{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}us.type="NONE";const hs=us;function ds(e,t,n){return`firebase:${e}:${t}:${n}`}class ps{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ds(this.userKey,i.apiKey,r),this.fullPersistenceKey=ds("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?cs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ps(jr(hs),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||jr(hs);const s=ds(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const i=cs._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new ps(r,e,n)):new ps(r,e,n)}}function fs(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ms(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bs(t))return"Blackberry";if(ws(t))return"Webos";if(gs(t))return"Safari";if((t.includes("chrome/")||ys(t))&&!t.includes("edge/"))return"Chrome";if(_s(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ms(e=f()){return/firefox\//i.test(e)}function gs(e=f()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ys(e=f()){return/crios\//i.test(e)}function vs(e=f()){return/iemobile/i.test(e)}function _s(e=f()){return/android/i.test(e)}function bs(e=f()){return/blackberry/i.test(e)}function ws(e=f()){return/webos/i.test(e)}function Ts(e=f()){return/iphone|ipad|ipod/i.test(e)}function Cs(e=f()){return Ts(e)||_s(e)||ws(e)||bs(e)||/windows phone/i.test(e)||vs(e)}function ks(e,t=[]){let n;switch(e){case"Browser":n=fs(f());break;case"Worker":n=`${fs(f())}-${e}`;break;default:n=e}return`${n}/JsCore/9.0.0/${t.length?t.join(","):"FirebaseCore-web"}`}class Is{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Es(this),this.idTokenSubscription=new Es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await ps.create(this,e),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(t),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);i&&i!==r||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(Mr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await os(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?j(e):null;return t&&Mr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&Mr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(jr(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new v("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jr(e)||this._popupRedirectResolver;Mr(t,this,"argument-error"),this.redirectPersistenceManager=await ps.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Mr(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Mr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ks(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ss(e){return j(e)}class Es{constructor(e){var t;this.auth=e,this.observer=null,this.addObserver=(t=new M((e=>this.observer=e),undefined)).subscribe.bind(t)}get next(){return Mr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Ps{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,t){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}class xs extends Ps{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new xs(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new xs(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return Jr(e,"POST","/v1/accounts:signInWithPassword",Gr(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Jr(e,"POST","/v1/accounts:signInWithEmailLink",Gr(e,t))}(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return Kr(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Jr(e,"POST","/v1/accounts:signInWithEmailLink",Gr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ns(e,t){return Jr(e,"POST","/v1/accounts:signInWithIdp",Gr(e,t))}class As extends Ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=t(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new As(i,r);return Object.assign(o,s),o}_getIdTokenResponse(e){return Ns(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ns(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ns(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=N(t)}return e}}const Rs={USER_NOT_FOUND:"user-not-found"};class Os extends Ps{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Os({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Os({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Jr(e,"POST","/v1/accounts:signInWithPhoneNumber",Gr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Jr(e,"POST","/v1/accounts:signInWithPhoneNumber",Gr(e,t));if(n.temporaryProof)throw Zr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Jr(e,"POST","/v1/accounts:signInWithPhoneNumber",Gr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Rs)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Os({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Ms{constructor(e){var t,n,i,r,s,o;const a=A(R(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Mr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=A(R(e)).link,n=t?A(R(t)).deep_link_id:null,i=A(R(e)).deep_link_id;return(i?A(R(i)).link:null)||i||n||t||e}(e);try{return new Ms(t)}catch(e){return null}}}class Ls{constructor(){this.providerId=Ls.PROVIDER_ID}static credential(e,t){return xs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ms.parseLink(t);return Mr(n,"argument-error"),xs._fromEmailAndCode(e,n.code,n.tenantId)}}Ls.PROVIDER_ID="password",Ls.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ls.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ds{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Fs extends Ds{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class js extends Fs{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch(e){return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com",js.PROVIDER_ID="facebook.com";class Us extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return As._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Us.credential(t,n)}catch(e){return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com",Us.PROVIDER_ID="google.com";class qs extends Fs{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch(e){return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com",qs.PROVIDER_ID="github.com";class $s extends Fs{constructor(){super("twitter.com")}static credential(e,t){return As._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return $s.credential(t,n)}catch(e){return null}}}$s.TWITTER_SIGN_IN_METHOD="twitter.com",$s.PROVIDER_ID="twitter.com";class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await cs._fromIdTokenResponse(e,n,i),s=Hs(n);return new Vs({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Hs(n);return new Vs({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Hs(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ws extends y{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Ws.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(r=e.tenantId)&&void 0!==r?r:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,i){return new Ws(e,t,n,i)}}function zs(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ws._fromErrorAndOperation(e,n,t,i);throw n}))}new WeakMap;const Bs="__sak";class Gs{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}class Ks extends Gs{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=f();return gs(e)||Ts(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Cs(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);var s;((s=f()).indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0)&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ks.type="LOCAL";const Ys=Ks;class Js extends Gs{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Js.type="SESSION";const Qs=Js;class Xs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Xs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Zs(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Xs.receivers=[];class eo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=Zs("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function to(){return window}function no(){return void 0!==to().WorkerGlobalScope&&"function"==typeof to().importScripts}const io="firebaseLocalStorageDb",ro="firebaseLocalStorage",so="fbase_key";class oo{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ao(e,t){return e.transaction([ro],t?"readwrite":"readonly").objectStore(ro)}function lo(){const e=indexedDB.open(io,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ro,{keyPath:so})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ro)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(io);return new oo(e).toPromise()}(),t(await lo()))}))}))}async function co(e,t,n){const i=ao(e,!0).put({[so]:t,value:n});return new oo(i).toPromise()}function uo(e,t){const n=ao(e,!0).delete(t);return new oo(n).toPromise()}class ho{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await lo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return no()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xs._getInstance(no()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new eo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lo();return await co(e,Bs,"1"),await uo(e,Bs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>co(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ao(e,!1).get(t),i=await new oo(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>uo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ao(e,!1).getAll();return new oo(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ho.type="LOCAL";const po=ho;function fo(e){return`__${e}${Math.floor(1e6*Math.random())}`}fo("rcb"),new Vr(3e4,6e4);class mo{constructor(e){this.providerId=mo.PROVIDER_ID,this.auth=Ss(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const r=await n.verify();try{let s;if(Mr("string"==typeof r,e,"argument-error"),Mr("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return Mr("enroll"===t.type,e,"internal-error"),(await function(e,t){return Kr(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{Mr("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;return Mr(n,e,"missing-multi-factor-info"),(await function(e,t){return Kr(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Kr(e,"POST","/v1/accounts:sendVerificationCode",Gr(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}(this.auth,e,j(t))}static credential(e,t){return Os._fromVerification(e,t)}static credentialFromResult(e){const t=e;return mo.credentialFromTaggedObject(t)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Os._fromTokenResponse(t,n):null}}mo.PROVIDER_ID="phone",mo.PHONE_SIGN_IN_METHOD="phone";class go extends Ps{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ns(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ns(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ns(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yo(e){return async function(e,t,n=!1){const i="signIn",r=await zs(e,i,t),s=await Vs._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}(e.auth,new go(e),e.bypassAuthState)}function vo(e){const{auth:t,user:n}=e;return Mr(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await is(e,zs(i,r,t,e),n);Mr(s.idToken,i,"internal-error");const o=ns(s.idToken);Mr(o,i,"internal-error");const{sub:a}=o;return Mr(e.uid===a,i,"user-mismatch"),Vs._forOperation(e,r,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Ar(i,"user-mismatch"),e}}(n,new go(e),e.bypassAuthState)}async function _o(e){const{auth:t,user:n}=e;return Mr(n,t,"internal-error"),async function(e,t,n=!1){const i=await is(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Vs._forOperation(e,"link",i)}(n,new go(e),e.bypassAuthState)}class bo{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yo;case"linkViaPopup":case"linkViaRedirect":return _o;case"reauthViaPopup":case"reauthViaRedirect":return vo;default:Ar(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wo=new Vr(2e3,1e4);class To extends bo{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Mr(e,this.auth,"internal-error"),e}async onExecution(){Dr(1===this.filter.length,"Popup operations only handle one event");const e=Zs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Rr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,wo.get())};e()}}To.currentPopupAction=null;const Co=new Map;class ko extends bo{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Co.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return ds("pendingRedirect",e.config.apiKey,e.name)}(t),i="true"===await Io(e)._get(n);return await Io(e)._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Co.set(this.auth._key(),e)}return e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Io(e){return jr(e._redirectPersistence)}async function So(e,t,n=!1){const i=Ss(e),r=function(e,t){return t?jr(t):(Mr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),s=new ko(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Eo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xo(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Rr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Po(e))}saveEventToCache(e){this.cachedEventUids.add(Po(e)),this.lastProcessedEventTime=Date.now()}}function Po(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function xo({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const No=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ao=/^https?/;function Ro(e){const t=Ur(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Ao.test(n))return!1;if(No.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Oo=new Vr(3e4,6e4);function Mo(){const e=to().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Lo=null;function Do(e){return Lo=Lo||function(e){return new Promise(((t,n)=>{var i,r,s,o;function a(){Mo(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Mo(),n(Rr(e,"network-request-failed"))},timeout:Oo.get()})}if(null===(r=null===(i=to().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=to().gapi)||void 0===s?void 0:s.load)){const t=fo("iframefcb");return to()[t]=()=>{gapi.load?a():n(Rr(e,"network-request-failed"))},o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=Rr("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)}))}a()}})).catch((e=>{throw Lo=null,e}))}(e),Lo}const Fo=new Vr(5e3,15e3),jo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Uo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qo(e){const t=e.config;Mr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:ce},r=Uo.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${N(i).slice(1)}`}const $o={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ho(e,t,n,i,r,s){Mr(e.config.authDomain,e,"auth-domain-config-required"),Mr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ce,eventId:r};if(t instanceof Ds){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",S(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Fs){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?Hr(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${N(a).slice(1)}`}const Wo="webStorageSupport",zo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qs,this._completeRedirectFn=So}async _openPopup(e,t,n,i){var r;return Dr(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$o),{width:i.toString(),height:r.toString(),top:s,left:o}),c=f().toLowerCase();n&&(a=ys(c)?"_blank":n),ms(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=f()){var t;return Ts(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Vo(null);const h=window.open(t||"",a,u);Mr(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Vo(h)}(e,Ho(e,t,n,Ur(),i),Zs())}async _openRedirect(e,t,n,i){var r;return await this._originValidation(e),r=Ho(e,t,n,Ur(),i),to().location.href=r,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Dr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}async initAndGetManager(e){const t=await async function(e){const t=await Do(e),n=to().gapi;return Mr(n,e,"internal-error"),t.open({where:document.body,url:qo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jo,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Rr(e,"network-request-failed"),s=to().setTimeout((()=>{i(r)}),Fo.get());function o(){to().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new Eo(e);return t.register("authEvent",(t=>(Mr(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wo,{type:Wo},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&t(!!r),Ar(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Kr(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Ro(e))return}catch(e){}Ar(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cs()||gs()||Ts()}};var Bo;class Go{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Mr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Bo="Browser",se(new q("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:i,authDomain:r}=n.options;return(e=>{Mr(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),Mr(!(null==r?void 0:r.includes(":")),"argument-error",{appName:e.name});const n={apiKey:i,authDomain:r,clientPlatform:Bo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ks(Bo)},s=new Is(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(jr);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),se(new q("auth-internal",(e=>{return t=Ss(e.getProvider("auth").getImmediate()),new Go(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),he("@firebase/auth","0.17.0",void 0);const Ko="ADD_TO_PLAYLIST",Yo="CREATE_PLAYLIST";const Jo=e=>`on${e.slice(0,1).toUpperCase()}${e.slice(1)}`,Qo=(e,t=document)=>t.querySelector(e),Xo=(e,t)=>{document.body.insertAdjacentHTML("beforeend",'<div class="overlay"></div>'+e);const n=()=>{document.onclick=null,Qo(t).remove(),Qo(".overlay").remove()};return document.onclick=e=>{"overlay"===e.target.className&&n()},new Promise(((e,t)=>e(n)))},Zo=e=>`${String(e/60).split(".")[0]}:${String((e%60).toFixed()).padStart(2,"0")}`;var ea=class extends class{constructor(e){this.listeners=e||[]}initDOMListeners(){this.listeners.forEach((e=>{const t=Jo(e);this.$root.addEventListener(e,this[t].bind(this))}))}removeDOMListeners(){this.listeners.forEach((e=>{const t=Jo(e);this.$root.removeEventListener(e,this[t].bind(this))}))}}{constructor({name:e,emmiter:t,store:n,listeners:i}){super(i),this.name=e,this.emmiter=t,this.store=n}get getHTML(){return""}init(){this.$root=document.querySelector(`.${this.name}`),this.initDOMListeners()}destroy(){this.removeDOMListeners()}subscribe(e,t){this.emmiter.subscribe(e,t)}unsubscribe(e){this.emmiter.unsubscribe(e)}emmit(e,...t){this.emmiter.emmit(e,t)}dispatch(e){this.store.dispatch(e)}observe(e,t){this.store.observe(e,t)}get getState(){return this.store.getState}};const ta=(e,t)=>`  \n <div class="music-card__content">\n          <img class="music-card__img" src="${t.img}" alt="">\n          <div class="music-card__box">\n            <h4 class="music-card__caption">${t.name}</h4>\n            <p class="music-card__author">${t.channel}</p>  \n          </div>\n  </div>\n  <button class="result-item__button">\n          <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n              d="M7 0C5.15042 0.0223147 3.38287 0.766977 2.07493 2.07493C0.766977 3.38287 0.0223147 5.15042 0 7C0.0223147 8.84958 0.766977 10.6171 2.07493 11.9251C3.38287 13.233 5.15042 13.9777 7 14C8.84958 13.9777 10.6171 13.233 11.9251 11.9251C13.233 10.6171 13.9777 8.84958 14 7C13.9777 5.15042 13.233 3.38287 11.9251 2.07493C10.6171 0.766977 8.84958 0.0223147 7 0ZM11 7.5H7.5V11H6.5V7.5H3V6.5H6.5V3H7.5V6.5H11V7.5Z"\n              fill="white" />\n          </svg>\n  </button>`;var na=class extends ea{constructor({emmiter:e,store:t},n){super({name:`result-item-${n.id}`,emmiter:e,store:t,listeners:["click"]}),this.data=n,this.observe(Yo,this.update.bind(this)),this.observe(Ko,this.update.bind(this))}get getHTML(){return`\n    <li class="music-card result-item ${this.name}" data-id="${this.data.id}">\n        ${ta(this.getState,this.data)}\n    </li>`}init(){super.init()}update(e){this.$root.innerHTML=ta(0,this.data)}openContextMenu(){const e=this.getState.playlists.map((e=>e.items.every((e=>e.id!==this.data.id))?`\n        <li class="context-menu-item"><button>${e.name}</button></li>`:"")),t=Xo(`\n      <ul class="active context-menu context-menu-${this.data.id}" style="${(()=>{const e=this.$root.getBoundingClientRect();return`top:${e.top+20}px; right:${e.left+20}px`})()}">\n             ${e.join("")}\n      </ul>`,`.context-menu-${this.data.id}`),n=Qo(`.context-menu-${this.data.id}`),i=e=>{e.preventDefault();const r=e.target;var s;this.dispatch((s={playlistName:r.textContent,item:{...this.data,playlist:r.textContent}},{type:Ko,data:s})),t.then((e=>e())),n.removeEventListener("click",i.bind(this))};n.addEventListener("click",i.bind(this))}onClick(e){const t=e.target;t.closest(".result-item__button")?this.openContextMenu():t.closest(".context-menu-item")}};const ia=(e,t)=>`   <div class="music-card__content">\n    <img class="music-card__img" src="${t.img}" alt="">\n    <div class="music-card__box">\n      <h4 class="music-card__caption">${t.name}</h4>\n      <p class="music-card__author">${t.channel}</p>\n    </div>\n  </div>`;var ra=class extends ea{constructor({emmiter:e,store:t},n){super({name:`playlist-item-${n.id}`,emmiter:e,store:t,listeners:["click"]}),this.data=n,this.subscribe("playlistItem::chose",this.changeActive.bind(this)),this.subscribe("player::next",this.changeActive.bind(this))}get getHTML(){return`\n    <li class="music-card playlist-item ${this.name}" data-id="${this.data.id}">\n           ${ia(this.getState,this.data)}\n    </li>`}init(){super.init()}update(e){this.$root.innerHTML=ia(0,this.data)}changeActive(e){e.id!==this.data.id?this.$root.classList.remove("current"):this.$root.classList.add("current")}onClick(e){e.target,this.emmit("playlistItem::chose",this.data)}};const sa=(e,t,n=[])=>{let i="";const r=[];let s;switch(e||(i='<p class="message">Choose playlist or find something</p>'),e){case"ResultItem":s=na;break;case"PlaylistItem":s=ra}return n.forEach((e=>{const n=new s(t,e);i+=n.getHTML,r.push({init:n.init.bind(n),destroy:n.destroy.bind(n)})})),{html:i,inits:r}};const oa=e=>`\n  <div class="player__passed"></div>\n  <div class="player__content">\n    ${e?.img?`<img class="player__img" src="${e.img}" alt="">`:'<div class="img-placeholder"></div>'}\n    <div class="player__box">\n     ${e?.name?`<h4 class="player__caption">${e.name}</h4>`:'<div class="caption-placeholder"></div>'}\n     ${e?.channel?`<p class="player__author">${e.channel}</p>`:'<div class="author-placeholder"></div>'}\n    </div>\n    <div class="player__controller-box">\n         <div class="player__current-time">0:00</div>\n         <button class="player__button">\n            <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M3.49067 0.650327C3.13569 0.447558 2.73367 0.341611 2.32487 0.343094C1.91606 0.344577 1.51482 0.45344 1.16133 0.658779C0.807831 0.864118 0.514487 1.15873 0.310672 1.5131C0.106857 1.86748 -0.000276476 2.26919 5.35836e-07 2.67799V17.322C-0.000276476 17.7308 0.106857 18.1325 0.310672 18.4869C0.514487 18.8413 0.807831 19.1359 1.16133 19.3412C1.51482 19.5465 1.91606 19.6554 2.32487 19.6569C2.73367 19.6584 3.13569 19.5524 3.49067 19.3497L16.3053 12.0253C16.6622 11.8212 16.9588 11.5263 17.1651 11.1707C17.3714 10.815 17.48 10.4111 17.48 9.99999C17.48 9.58884 17.3714 9.18499 17.1651 8.82932C16.9588 8.47366 16.6622 8.17882 16.3053 7.97466L3.49067 0.650327Z" fill="white"/>\n            </svg>\n         </button>\n         <div class="player__full-time">0:00</div>\n    </div>\n  </div>\n`;var aa=n(8052),la=n.n(aa);const ca=e=>`\n        <div class="playlist__top">\n          <h2 class="playlist__title">Playlists</h2>\n          <button class="playlist__arrow"></button>\n        </div>\n        <ul class="playlist__list">\n            ${(e=e.map((e=>` \n    <li class="playlist__item">\n       <h4  class="playlist__item-caption">${e.name}</h4>\n    </li>`))).join("")}\n          <button class="playlist__item--add"></button>\n        </ul>\n`;new class{constructor(e,t){this.$root=document.querySelector(e),this.components=t}async init(){document.body.style.height=window.innerHeight+"px";const e=new class{constructor(){this.subscribers=[]}subscribe(e,t){this.subscribers.push({event:e,callback:t}),console.log(this.subscribers)}unsubscribe(e){this.subscribers=this.subscribers.filter((t=>t.event!==e))}emmit(e,t){this.subscribers.filter((t=>t.event===e)).forEach((e=>e.callback(...t)))}},t=await(new class{constructor(){this.processor=new class{constructor(){this.key="m-project",this.database,this.userId}async init(){!function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw ae.create("bad-app-name",{appName:String(i)});const r=ne.get(i);if(r){if(P(e,r.options)&&P(n,r.config))return r;throw ae.create("duplicate-app",{appName:i})}const s=new H(i);for(const e of ie.values())s.addComponent(e);const o=new le(e,n,s);ne.set(i,o)}({apiKey:"AIzaSyC-JXJtNzaLbGtm7M-9ftbXt6ah6Cqt12U",authDomain:"m-project-323906.firebaseapp.com",databaseURL:"https://m-project-323906-default-rtdb.europe-west1.firebasedatabase.app/"}),this.database=function(e=ue(),t){return oe(e,"database").getImmediate({identifier:t})}(),localStorage.getItem(this.key)||(this.auth=new class{constructor(){this.name="auth",this.auth=function(e=ue()){const t=oe(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=oe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(P(n.getOptions(),null!=t?t:{}))return e;Ar(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:zo,persistence:[po,Ys,Qs]})}(),this.email}get getHTML(){return'\n        <form class="auth" action="POST">\n          <div class="container auth__container">\n              <h2 class="auth__title">Sign Up</h2>\n              <input  class="auth__input" type="email" placeholder="Email">\n              <input  class="auth__input" type="password" placeholder="Password">\n              <button class="auth__button" type="submit">\n                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <path d="M3.49067 0.650327C3.13569 0.447558 2.73367 0.341611 2.32487 0.343094C1.91606 0.344577 1.51482 0.45344 1.16133 0.658779C0.807831 0.864118 0.514487 1.15873 0.310672 1.5131C0.106857 1.86748 -0.000276476 2.26919 5.35836e-07 2.67799V17.322C-0.000276476 17.7308 0.106857 18.1325 0.310672 18.4869C0.514487 18.8413 0.807831 19.1359 1.16133 19.3412C1.51482 19.5465 1.91606 19.6554 2.32487 19.6569C2.73367 19.6584 3.13569 19.5524 3.49067 19.3497L16.3053 12.0253C16.6622 11.8212 16.9588 11.5263 17.1651 11.1707C17.3714 10.815 17.48 10.4111 17.48 9.99999C17.48 9.58884 17.3714 9.18499 17.1651 8.82932C16.9588 8.47366 16.6622 8.17882 16.3053 7.97466L3.49067 0.650327Z"/>\n                  </svg>\n              </button>\n          </div>\n      </form>\n    '}init(){return document.body.insertAdjacentHTML("afterbegin",this.getHTML),new Promise(((e,t)=>{document.addEventListener("submit",this.signUp.bind(this,e))}))}destroy(){document.querySelector(`.${this.name}`).remove(),document.removeEventListener("submit",this.signUp.bind(this))}signUp(e,t){t.preventDefault(),this.email=t.srcElement[0].value,this.password=t.srcElement[1].value,async function(e,t,n){const i=Ss(e),r=await async function(e,t){return Jr(e,"POST","/v1/accounts:signUp",Gr(e,t))}(i,{returnSecureToken:!0,email:t,password:n}),s=await Vs._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}(this.auth,this.email,this.password).then((n=>{const i=n.user;this.uid=i.uid,e(t)})).catch((e=>{throw new Error(e.message,e.code)})),this.destroy()}},await this.auth.init(),this.userId=this.auth.uid,this.write({uid:this.userId,email:this.auth.email,playlists:[]})),this.userId=this.read().uid}write(e){kr(Cr(this.database,`users/${this.userId}`),e),localStorage.setItem(this.key,JSON.stringify(e))}read(){return JSON.parse(localStorage.getItem(this.key))}},this.observers=[]}async init(){return await this.processor.init(),this}dispatch(e){const t=((e,{type:t,data:n})=>{let i,r;switch(t){case Ko:const{playlistName:t,item:s}=n,o=e.playlists.filter((e=>e.name===t))[0];return console.log(o),o.items.push(s),{...e};case Yo:return r=e.playlists,i={name:n.name,items:[]},{...e,playlists:[...r,i]};default:return e}})(this.getState,e);this.observers.forEach((n=>{n.event===e.type&&n.update(t)})),this.processor.write(t),console.log(t)}observe(e,t){this.observers.push({event:e,update:t})}get getState(){return this.processor.read()}}).init();this.components=this.components.map((n=>{const i=new n(e,t);return this.$root.insertAdjacentHTML("beforeend",i.getHTML),i.init(),i}))}destroy(){this.$root.innerHTML="",this.components.map((e=>{e.destroy()}))}}("#app",[class extends ea{constructor(e,t){super({name:"search-form",emmiter:e,store:t,listeners:["submit"]})}get getHTML(){return' \n    <form class="search-form">\n        \n  <input class="search-form__input" type="text">\n  <button class="search-form__button">\n     <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M7 14C8.763 14 10.37 13.34 11.603 12.261L12.94 15.061C12.94 15.061 13.215 15.285 13.593 15.657C13.98 16.02 14.489 16.511 14.977 17.024L16.335 18.416L16.939 19.062L19.06 16.941L18.414 16.337L17.022 14.979C16.5536 14.5304 16.0978 14.0689 15.655 13.595C15.283 13.217 15.059 12.942 15.059 12.942L12.259 11.605C13.3804 10.333 13.9994 8.69572 14 7C14 3.141 10.859 0 7 0C3.141 0 0 3.141 0 7C0 10.859 3.141 14 7 14Z" />\n      </svg>\n  </button>\n     </form>'}init(){super.init()}update(e){this.$root.innerHTML='\n  <input class="search-form__input" type="text">\n  <button class="search-form__button">\n     <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M7 14C8.763 14 10.37 13.34 11.603 12.261L12.94 15.061C12.94 15.061 13.215 15.285 13.593 15.657C13.98 16.02 14.489 16.511 14.977 17.024L16.335 18.416L16.939 19.062L19.06 16.941L18.414 16.337L17.022 14.979C16.5536 14.5304 16.0978 14.0689 15.655 13.595C15.283 13.217 15.059 12.942 15.059 12.942L12.259 11.605C13.3804 10.333 13.9994 8.69572 14 7C14 3.141 10.859 0 7 0C3.141 0 0 3.141 0 7C0 10.859 3.141 14 7 14Z" />\n      </svg>\n  </button>'}onSubmit(e){e.preventDefault();const t=e.srcElement[1],n=e.srcElement[0];t.disabled=!0,(e=>{const t=e.split(",")[1]||5;return fetch(`https://youtube.googleapis.com/youtube/v3/search?&key=AIzaSyC-JXJtNzaLbGtm7M-9ftbXt6ah6Cqt12U&part=snippet&maxResults=${t}&q="${e}'`).then((e=>e.json())).then((e=>e))})(n.value).then((e=>{const i=e.items.map((e=>({id:e.id.videoId,name:e.snippet.title,channel:e.snippet.channelTitle,img:e.snippet.thumbnails.default.url})));this.emmit("search::result","ResultItem",i),t.disabled=!1,n.value=""}))}},class extends ea{constructor(e,t){super({name:"music-cards",emmiter:e,store:t,listeners:[]}),this.subscribe("search::result",this.update.bind(this)),this.subscribe("playlist::chose",this.update.bind(this))}get getHTML(){const e=sa();return this.cardsInits=e.inits,`\n     <ul class="music-cards">\n        ${e.html}\n     </ul>`}init(){super.init(),this.cardsInits.forEach((({init:e})=>e()))}update(e,t){console.log(t),this.cardsInits.forEach((({destroy:e})=>e()));const n=sa(e,{emmiter:this.emmiter,store:this.store},t);this.$root.innerHTML=n.html,this.cardsInits=n.inits,this.cardsInits.forEach((({init:e})=>e()))}},class extends ea{constructor(e,t){super({name:"player",emmiter:e,store:t,listeners:["click"]}),this.playlist=null,this.prev=null,this.current=null,this.next=null,this.subscribe("playlistItem::chose",this.update.bind(this))}get getHTML(){return`\n    <div class="player">\n        ${oa()} \n    </div>\n    <div class="plyr__video-embed" id="player">\n      <iframe\n        src="https://www.youtube.com/embed/bTqVqk7FSmY?origin=https://plyr.io&amp;iv_load_policy=3&amp;modestbranding=1&amp;playsinline=1&amp;showinfo=0&amp;rel=0&amp;enablejsapi=1"\n        allowtransparency\n        allow="autoplay">\n       </iframe>\n    </div>  \n`}init(){super.init(),this.player=new(la())("#player"),this.player.airplay(),this.player.on("ready",(()=>{this.current&&(this.$fulltime.textContent=Zo(this.player.duration),this.$btn.innerHTML='<svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M3.1875 0C4.03288 0 4.84363 0.335825 5.4414 0.933597C6.03918 1.53137 6.375 2.34212 6.375 3.1875V15.9375C6.375 16.7829 \n        6.03918 17.5936 5.4414 18.1914C4.84363 18.7892 4.03288 19.125 3.1875 19.125C2.34212 19.125 1.53137 18.7892 0.933597 18.1914C0.335825 17.5936 1.7815e-08 16.7829 0 15.9375V3.1875C0 2.34212 0.335825 1.53137 0.933597 0.933597C1.53137 0.335825 2.34212 0 3.1875 0V0ZM13.8125 0C14.6579 0 15.4686 0.335825 16.0664 0.933597C16.6642 1.53137 17 2.34212 17 3.1875V15.9375C17 16.7829 16.6642 17.5936 16.0664 18.1914C15.4686 18.7892 14.6579 19.125 13.8125 19.125C12.9671 19.125 12.1564 18.7892 11.5586 18.1914C10.9608 17.5936 10.625 16.7829 10.625 15.9375V3.1875C10.625 2.34212 10.9608 1.53137 11.5586 0.933597C12.1564 0.335825 12.9671 0 13.8125 0Z" fill="white"/>\n        </svg>',this.player.togglePlay(),this.player.pause(),setTimeout((()=>{console.log("pl"),this.player.play()}),1e3),console.log("ready"))})),this.player.on("pause",(()=>{console.log("paused"),this.$btn.innerHTML='<svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M3.49067 0.650327C3.13569 0.447558 2.73367 0.341611 2.32487 0.343094C1.91606 0.344577 1.51482 0.45344 1.16133 0.658779C0.807831 0.864118 0.514487 1.15873 0.310672 1.5131C0.106857 1.86748 -0.000276476 2.26919 5.35836e-07 2.67799V17.322C-0.000276476 17.7308 0.106857 18.1325 0.310672 18.4869C0.514487 18.8413 0.807831 19.1359 1.16133 19.3412C1.51482 19.5465 1.91606 19.6554 2.32487 19.6569C2.73367 19.6584 3.13569 19.5524 3.49067 19.3497L16.3053 12.0253C16.6622 11.8212 16.9588 11.5263 17.1651 11.1707C17.3714 10.815 17.48 10.4111 17.48 9.99999C17.48 9.58884 17.3714 9.18499 17.1651 8.82932C16.9588 8.47366 16.6622 8.17882 16.3053 7.97466L3.49067 0.650327Z" fill="white"/>\n      </svg>'})),this.player.on("play",(()=>{this.$btn.innerHTML='<svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M3.1875 0C4.03288 0 4.84363 0.335825 5.4414 0.933597C6.03918 1.53137 6.375 2.34212 6.375 3.1875V15.9375C6.375 16.7829 6.03918 17.5936 5.4414 18.1914C4.84363 18.7892 4.03288 19.125 3.1875 19.125C2.34212 19.125 1.53137 18.7892 0.933597 18.1914C0.335825 17.5936 1.7815e-08 16.7829 0 15.9375V3.1875C0 2.34212 0.335825 1.53137 0.933597 0.933597C1.53137 0.335825 2.34212 0 3.1875 0V0ZM13.8125 0C14.6579 0 15.4686 0.335825 16.0664 0.933597C16.6642 1.53137 17 2.34212 17 3.1875V15.9375C17 16.7829 16.6642 17.5936 16.0664 18.1914C15.4686 18.7892 14.6579 19.125 13.8125 19.125C12.9671 19.125 12.1564 18.7892 11.5586 18.1914C10.9608 17.5936 10.625 16.7829 10.625 15.9375V3.1875C10.625 2.34212 10.9608 1.53137 11.5586 0.933597C12.1564 0.335825 12.9671 0 13.8125 0Z" fill="white"/>\n      </svg>'})),this.player.on("timeupdate",this.onPlay.bind(this)),this.player.on("ended",this.playNext.bind(this))}update(e){this.$root.innerHTML=oa(e),this.playlist=this.getState.playlists.find((t=>t.name===e.playlist)),this.current=e,this.playlist.items.forEach(((e,t,n)=>{e.id===this.current.id&&(this.prev=0===t?n[n.length-1]:n[t-1],t===n.length-1?this.next=n[0]:this.next=n[t+1])})),this.$timer=Qo(".player__current-time",this.$root),this.$btn=Qo(".player__button",this.$root),this.$fulltime=Qo(".player__full-time",this.$root),this.$progress=Qo(".player__passed",this.$root),this.player.source={type:"video",sources:[{src:e.id,provider:"youtube"}]},console.log("clicked")}onPlay(e){const t=this.player.currentTime.toFixed(2),n=this.player.duration;this.$timer.textContent=Zo(this.player.currentTime),this.$progress.style.width=100*t/n+"%"}playNext(){this.update(this.next),this.emmit("player::next",this.current)}onClick(e){e.target.closest(".player__button")&&this.current&&this.player.togglePlay()}},class extends ea{constructor(e,t){super({name:"playlist",emmiter:e,store:t,listeners:["click"]}),this.isOpen=!1,this.observe(Ko,this.update.bind(this)),this.observe(Yo,this.update.bind(this))}get getHTML(){return`\n    <div class="playlist">\n        ${ca(this.getState.playlists)}\n    </div>`}init(){super.init()}update(e){this.$root.innerHTML=ca(e.playlists)}addPlaylist(){const e=Xo('\n   <form class="playlist__form" action="POST">\n           <input class="playlist__input" placeholder="Enter name" type="text">\n           <button class="playlist__input-button"></button>\n    </form>',".playlist__form"),t=Qo(".playlist__input-button");this.getPlaylistName=n=>{n.preventDefault();const i=Qo(".playlist__input").value;this.dispatch({type:Yo,data:{name:i}}),e.then((e=>e())),t.removeEventListener("click",this.getPlaylistName.bind(this))},t.addEventListener("click",this.getPlaylistName.bind(this))}togglePlaylists(e){const t=Qo("#app");e.classList.toggle("active"),this.isOpen?(this.isOpen=!this.isOpen,t.style.transform="translateY(0)"):(this.isOpen=!this.isOpen,t.style.transform=`translateY(-${this.$root.clientHeight}px)`)}openPlaylist(e){const t=this.getState.playlists.filter((t=>t.name===e))[0];this.emmit("playlist::chose","PlaylistItem",t.items)}onClick(e){const t=e.target;t.classList.contains("playlist__arrow")&&this.togglePlaylists(t),t.classList.contains("playlist__item--add")&&this.addPlaylist(),t.classList.contains("playlist__item")&&this.openPlaylist(t.textContent.trim())}}]).init()}()}();