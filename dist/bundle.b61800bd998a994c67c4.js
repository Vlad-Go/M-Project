/*! For license information please see bundle.b61800bd998a994c67c4.js.LICENSE.txt */
!function(){var t={8391:function(t,e,n){"use strict";n(3048),n(9247),n(8128),n(241),n(4918),n(9839),n(8878),n(3090),n(4184),n(1587),n(338),n(49),n(1497),n(6248)},3048:function(t,e,n){n(9823),n(9701),n(5843),n(8344),n(541),n(8904),n(4978),n(9770),n(8338),n(7941),n(3668),n(7070),n(9163),n(3310),n(9773),n(9020),n(4210),n(6139),n(8629),n(9745),n(5694),n(6130),n(5821),n(6349),n(8110),n(3689),n(2211),n(3730),n(6729),n(7374),n(2095),n(6362),n(6329),n(7463),n(5874),n(5886),n(91),n(6799),n(1570),n(6006),n(8377),n(108),n(905),n(8103),n(5937),n(9979),n(3601),n(4226),n(9750),n(1462),n(4773),n(2421),n(2763),n(1711),n(183),n(7472),n(516),n(427),n(3777),n(7238),n(5942),n(513),n(4186),n(5502),n(6213),n(9457),n(9876),n(9772),n(7174),n(5251),n(7984),n(3359),n(195),n(8586),n(817),n(5337),n(5079),n(5105),n(4163),n(5867),n(9606),n(9174),n(8466),n(7209),n(1796),n(7772),n(286),n(4434),n(3231),n(46),n(9399),n(8312),n(5155),n(3133),n(1601),n(453),n(1954),n(8703),n(652),n(7680),n(5506),n(5846),n(4321),n(751),n(4828),n(4208),n(2679),n(9236),n(2235),n(1239),n(8392),n(773),n(3623),n(345),n(8460),n(6788),n(6780),n(3620),n(3958),n(1592),n(5469),n(6471),n(3149),n(4637),n(1335),n(2603),n(4460),n(5970),n(4288),n(2039),n(4613),n(122),n(9484),n(1014),n(7150),n(8982),n(8868),n(8633),t.exports=n(66)},8128:function(t,e,n){n(7328),t.exports=n(66).Array.flatMap},9247:function(t,e,n){n(8081),t.exports=n(66).Array.includes},338:function(t,e,n){n(9716),t.exports=n(66).Object.entries},4184:function(t,e,n){n(7453),t.exports=n(66).Object.getOwnPropertyDescriptors},1587:function(t,e,n){n(27),t.exports=n(66).Object.values},49:function(t,e,n){"use strict";n(2235),n(6632),t.exports=n(66).Promise.finally},4918:function(t,e,n){n(8302),t.exports=n(66).String.padEnd},241:function(t,e,n){n(9447),t.exports=n(66).String.padStart},8878:function(t,e,n){n(152),t.exports=n(66).String.trimRight},9839:function(t,e,n){n(9324),t.exports=n(66).String.trimLeft},3090:function(t,e,n){n(3756),t.exports=n(9669).f("asyncIterator")},1829:function(t,e,n){n(1739),t.exports=n(7208).global},6610:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},498:function(t,e,n){var r=n(9632);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},7208:function(t){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},1725:function(t,e,n){var r=n(6610);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},5179:function(t,e,n){t.exports=!n(472)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},8765:function(t,e,n){var r=n(9632),i=n(3280).document,s=r(i)&&r(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},8310:function(t,e,n){var r=n(3280),i=n(7208),s=n(1725),o=n(2292),a=n(657),c=function(t,e,n){var u,l,h,d=t&c.F,f=t&c.G,p=t&c.S,g=t&c.P,v=t&c.B,_=t&c.W,m=f?i:i[e]||(i[e]={}),y=m.prototype,w=f?r:p?r[e]:(r[e]||{}).prototype;for(u in f&&(n=e),n)(l=!d&&w&&void 0!==w[u])&&a(m,u)||(h=l?w[u]:n[u],m[u]=f&&"function"!=typeof w[u]?n[u]:v&&l?s(h,r):_&&w[u]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):g&&"function"==typeof h?s(Function.call,h):h,g&&((m.virtual||(m.virtual={}))[u]=h,t&c.R&&y&&!y[u]&&o(y,u,h)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},472:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},3280:function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},657:function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},2292:function(t,e,n){var r=n(510),i=n(8439);t.exports=n(5179)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},4457:function(t,e,n){t.exports=!n(5179)&&!n(472)((function(){return 7!=Object.defineProperty(n(8765)("div"),"a",{get:function(){return 7}}).a}))},9632:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},510:function(t,e,n){var r=n(498),i=n(4457),s=n(2737),o=Object.defineProperty;e.f=n(5179)?Object.defineProperty:function(t,e,n){if(r(t),e=s(e,!0),r(n),i)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},8439:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2737:function(t,e,n){var r=n(9632);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},1739:function(t,e,n){var r=n(8310);r(r.G,{global:n(3280)})},2761:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},1525:function(t,e,n){var r=n(6688);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},2094:function(t,e,n){var r=n(2190)("unscopables"),i=Array.prototype;null==i[r]&&n(4216)(i,r,{}),t.exports=function(t){i[r][t]=!0}},8492:function(t,e,n){"use strict";var r=n(2070)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},5824:function(t){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},6365:function(t,e,n){var r=n(7334);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},6257:function(t,e,n){"use strict";var r=n(6033),i=n(8615),s=n(6078);t.exports=[].copyWithin||function(t,e){var n=r(this),o=s(n.length),a=i(t,o),c=i(e,o),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?o:i(u,o))-c,o-a),h=1;for(c<a&&a<c+l&&(h=-1,c+=l-1,a+=l-1);l-- >0;)c in n?n[a]=n[c]:delete n[a],a+=h,c+=h;return n}},3195:function(t,e,n){"use strict";var r=n(6033),i=n(8615),s=n(6078);t.exports=function(t){for(var e=r(this),n=s(e.length),o=arguments.length,a=i(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>a;)e[a++]=t;return e}},9021:function(t,e,n){var r=n(5703),i=n(6078),s=n(8615);t.exports=function(t){return function(e,n,o){var a,c=r(e),u=i(c.length),l=s(o,u);if(t&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},8309:function(t,e,n){var r=n(1528),i=n(8467),s=n(6033),o=n(6078),a=n(3531);t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,l=4==t,h=6==t,d=5==t||h,f=e||a;return function(e,a,p){for(var g,v,_=s(e),m=i(_),y=r(a,p,3),w=o(m.length),b=0,I=n?f(e,w):c?f(e,0):void 0;w>b;b++)if((d||b in m)&&(v=y(g=m[b],b,_),t))if(n)I[b]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return b;case 2:I.push(g)}else if(l)return!1;return h?-1:u||l?l:I}}},9291:function(t,e,n){var r=n(2761),i=n(6033),s=n(8467),o=n(6078);t.exports=function(t,e,n,a,c){r(e);var u=i(t),l=s(u),h=o(u.length),d=c?h-1:0,f=c?-1:1;if(n<2)for(;;){if(d in l){a=l[d],d+=f;break}if(d+=f,c?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;c?d>=0:h>d;d+=f)d in l&&(a=e(a,l[d],d,u));return a}},1071:function(t,e,n){var r=n(7334),i=n(9141),s=n(2190)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[s])&&(e=void 0)),void 0===e?Array:e}},3531:function(t,e,n){var r=n(1071);t.exports=function(t,e){return new(r(t))(e)}},9337:function(t,e,n){"use strict";var r=n(2761),i=n(7334),s=n(7757),o=[].slice,a={},c=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?c(e,r.length,r):s(e,r,t)};return i(e.prototype)&&(a.prototype=e.prototype),a}},106:function(t,e,n){var r=n(6688),i=n(2190)("toStringTag"),s="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:s?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},6688:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},8156:function(t,e,n){"use strict";var r=n(8558).f,i=n(2897),s=n(2243),o=n(1528),a=n(5824),c=n(1891),u=n(1195),l=n(5038),h=n(9766),d=n(6628),f=n(998).fastKey,p=n(9060),g=d?"_s":"size",v=function(t,e){var n,r=f(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){a(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[g]=0,null!=r&&c(r,n,t[u],t)}));return s(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=p(this,e),r=v(n,t);if(r){var i=r.n,s=r.p;delete n._i[r.i],r.r=!0,s&&(s.n=i),i&&(i.p=s),n._f==r&&(n._f=i),n._l==r&&(n._l=s),n[g]--}return!!r},forEach:function(t){p(this,e);for(var n,r=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(p(this,e),t)}}),d&&r(l.prototype,"size",{get:function(){return p(this,e)[g]}}),l},def:function(t,e,n){var r,i,s=v(t,e);return s?s.v=n:(t._l=s={i:i=f(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=s),r&&(r.n=s),t[g]++,"F"!==i&&(t._i[i]=s)),t},getEntry:v,setStrong:function(t,e,n){u(t,e,(function(t,n){this._t=p(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?l(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,l(1))}),n?"entries":"values",!n,!0),h(e)}}},6339:function(t,e,n){"use strict";var r=n(2243),i=n(998).getWeak,s=n(6365),o=n(7334),a=n(5824),c=n(1891),u=n(8309),l=n(4040),h=n(9060),d=u(5),f=u(6),p=0,g=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},_=function(t,e){return d(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,s){var u=t((function(t,r){a(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=r&&c(r,n,t[s],t)}));return r(u.prototype,{delete:function(t){if(!o(t))return!1;var n=i(t);return!0===n?g(h(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=i(t);return!0===n?g(h(this,e)).has(t):n&&l(n,this._i)}}),u},def:function(t,e,n){var r=i(s(e),!0);return!0===r?g(t).set(e,n):r[t._i]=n,t},ufstore:g}},7611:function(t,e,n){"use strict";var r=n(8113),i=n(5772),s=n(7738),o=n(2243),a=n(998),c=n(1891),u=n(5824),l=n(7334),h=n(8625),d=n(3143),f=n(5727),p=n(8938);t.exports=function(t,e,n,g,v,_){var m=r[t],y=m,w=v?"set":"add",b=y&&y.prototype,I={},C=function(t){var e=b[t];s(b,t,"delete"==t||"has"==t?function(t){return!(_&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(_||b.forEach&&!h((function(){(new y).entries().next()})))){var S=new y,T=S[w](_?{}:-0,1)!=S,E=h((function(){S.has(1)})),k=d((function(t){new y(t)})),x=!_&&h((function(){for(var t=new y,e=5;e--;)t[w](e,e);return!t.has(-0)}));k||((y=e((function(e,n){u(e,y,t);var r=p(new m,e,y);return null!=n&&c(n,v,r[w],r),r}))).prototype=b,b.constructor=y),(E||x)&&(C("delete"),C("has"),v&&C("get")),(x||T)&&C(w),_&&b.clear&&delete b.clear}else y=g.getConstructor(e,t,v,w),o(y.prototype,n),a.NEED=!0;return f(y,t),I[t]=y,i(i.G+i.W+i.F*(y!=m),I),_||g.setStrong(y,t,v),y}},66:function(t){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},6644:function(t,e,n){"use strict";var r=n(8558),i=n(6061);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},1528:function(t,e,n){var r=n(2761);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},2626:function(t,e,n){"use strict";var r=n(8625),i=Date.prototype.getTime,s=Date.prototype.toISOString,o=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=s.call(new Date(-50000000000001))}))||!r((function(){s.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}:s},9296:function(t,e,n){"use strict";var r=n(6365),i=n(1382),s="number";t.exports=function(t){if("string"!==t&&t!==s&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),t!=s)}},1622:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},6628:function(t,e,n){t.exports=!n(8625)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},5050:function(t,e,n){var r=n(7334),i=n(8113).document,s=r(i)&&r(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},3603:function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},7820:function(t,e,n){var r=n(2912),i=n(7957),s=n(5873);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var o,a=n(t),c=s.f,u=0;a.length>u;)c.call(t,o=a[u++])&&e.push(o);return e}},5772:function(t,e,n){var r=n(8113),i=n(66),s=n(4216),o=n(7738),a=n(1528),c=function(t,e,n){var u,l,h,d,f=t&c.F,p=t&c.G,g=t&c.S,v=t&c.P,_=t&c.B,m=p?r:g?r[e]||(r[e]={}):(r[e]||{}).prototype,y=p?i:i[e]||(i[e]={}),w=y.prototype||(y.prototype={});for(u in p&&(n=e),n)h=((l=!f&&m&&void 0!==m[u])?m:n)[u],d=_&&l?a(h,r):v&&"function"==typeof h?a(Function.call,h):h,m&&o(m,u,h,t&c.U),y[u]!=h&&s(y,u,d),v&&w[u]!=h&&(w[u]=h)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},6570:function(t,e,n){var r=n(2190)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},8625:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},8897:function(t,e,n){"use strict";n(5846);var r=n(7738),i=n(4216),s=n(8625),o=n(1622),a=n(2190),c=n(3288),u=a("species"),l=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=a(t),f=!s((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),p=f?!s((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!e})):void 0;if(!f||!p||"replace"===t&&!l||"split"===t&&!h){var g=/./[d],v=n(o,d,""[t],(function(t,e,n,r,i){return e.exec===c?f&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),_=v[0],m=v[1];r(String.prototype,t,_),i(RegExp.prototype,d,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},4859:function(t,e,n){"use strict";var r=n(6365);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},2674:function(t,e,n){"use strict";var r=n(9141),i=n(7334),s=n(6078),o=n(1528),a=n(2190)("isConcatSpreadable");t.exports=function t(e,n,c,u,l,h,d,f){for(var p,g,v=l,_=0,m=!!d&&o(d,f,3);_<u;){if(_ in c){if(p=m?m(c[_],_,n):c[_],g=!1,i(p)&&(g=void 0!==(g=p[a])?!!g:r(p)),g&&h>0)v=t(e,n,p,s(p.length),v,h-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=p}v++}_++}return v}},1891:function(t,e,n){var r=n(1528),i=n(3221),s=n(8908),o=n(6365),a=n(6078),c=n(7107),u={},l={},h=t.exports=function(t,e,n,h,d){var f,p,g,v,_=d?function(){return t}:c(t),m=r(n,h,e?2:1),y=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(s(_)){for(f=a(t.length);f>y;y++)if((v=e?m(o(p=t[y])[0],p[1]):m(t[y]))===u||v===l)return v}else for(g=_.call(t);!(p=g.next()).done;)if((v=i(g,m,p.value,e))===u||v===l)return v};h.BREAK=u,h.RETURN=l},646:function(t,e,n){t.exports=n(8655)("native-function-to-string",Function.toString)},8113:function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},4040:function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},4216:function(t,e,n){var r=n(8558),i=n(6061);t.exports=n(6628)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},8954:function(t,e,n){var r=n(8113).document;t.exports=r&&r.documentElement},5100:function(t,e,n){t.exports=!n(6628)&&!n(8625)((function(){return 7!=Object.defineProperty(n(5050)("div"),"a",{get:function(){return 7}}).a}))},8938:function(t,e,n){var r=n(7334),i=n(6095).set;t.exports=function(t,e,n){var s,o=e.constructor;return o!==n&&"function"==typeof o&&(s=o.prototype)!==n.prototype&&r(s)&&i&&i(t,s),t}},7757:function(t){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},8467:function(t,e,n){var r=n(6688);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},8908:function(t,e,n){var r=n(3988),i=n(2190)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[i]===t)}},9141:function(t,e,n){var r=n(6688);t.exports=Array.isArray||function(t){return"Array"==r(t)}},3917:function(t,e,n){var r=n(7334),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},7334:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},4587:function(t,e,n){var r=n(7334),i=n(6688),s=n(2190)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},3221:function(t,e,n){var r=n(6365);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var s=t.return;throw void 0!==s&&r(s.call(t)),e}}},6445:function(t,e,n){"use strict";var r=n(2897),i=n(6061),s=n(5727),o={};n(4216)(o,n(2190)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(o,{next:i(1,n)}),s(t,e+" Iterator")}},1195:function(t,e,n){"use strict";var r=n(1422),i=n(5772),s=n(7738),o=n(4216),a=n(3988),c=n(6445),u=n(5727),l=n(9002),h=n(2190)("iterator"),d=!([].keys&&"next"in[].keys()),f="keys",p="values",g=function(){return this};t.exports=function(t,e,n,v,_,m,y){c(n,e,v);var w,b,I,C=function(t){if(!d&&t in k)return k[t];switch(t){case f:case p:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",T=_==p,E=!1,k=t.prototype,x=k[h]||k["@@iterator"]||_&&k[_],N=x||C(_),R=_?T?C("entries"):N:void 0,P="Array"==e&&k.entries||x;if(P&&(I=l(P.call(new t)))!==Object.prototype&&I.next&&(u(I,S,!0),r||"function"==typeof I[h]||o(I,h,g)),T&&x&&x.name!==p&&(E=!0,N=function(){return x.call(this)}),r&&!y||!d&&!E&&k[h]||o(k,h,N),a[e]=N,a[S]=g,_)if(w={values:T?N:C(p),keys:m?N:C(f),entries:R},y)for(b in w)b in k||s(k,b,w[b]);else i(i.P+i.F*(d||E),e,w);return w}},3143:function(t,e,n){var r=n(2190)("iterator"),i=!1;try{var s=[7][r]();s.return=function(){i=!0},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var s=[7],o=s[r]();o.next=function(){return{done:n=!0}},s[r]=function(){return o},t(s)}catch(t){}return n}},5038:function(t){t.exports=function(t,e){return{value:e,done:!!t}}},3988:function(t){t.exports={}},1422:function(t){t.exports=!1},9489:function(t){var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},4519:function(t,e,n){var r=n(2697),i=Math.pow,s=i(2,-52),o=i(2,-23),a=i(2,127)*(2-o),c=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),u=r(t);return i<c?u*(i/c/o+1/s-1/s)*c*o:(n=(e=(1+o/s)*i)-(e-i))>a||n!=n?u*(1/0):u*n}},922:function(t){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},2697:function(t){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},998:function(t,e,n){var r=n(5078)("meta"),i=n(7334),s=n(4040),o=n(8558).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(8625)((function(){return c(Object.preventExtensions({}))})),l=function(t){o(t,r,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!s(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return u&&h.NEED&&c(t)&&!s(t,r)&&l(t),t}}},3492:function(t,e,n){var r=n(8113),i=n(9124).set,s=r.MutationObserver||r.WebKitMutationObserver,o=r.process,a=r.Promise,c="process"==n(6688)(o);t.exports=function(){var t,e,n,u=function(){var r,i;for(c&&(r=o.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){o.nextTick(u)};else if(!s||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var h=!0,d=document.createTextNode("");new s(u).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},8577:function(t,e,n){"use strict";var r=n(2761);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},7029:function(t,e,n){"use strict";var r=n(6628),i=n(2912),s=n(7957),o=n(5873),a=n(6033),c=n(8467),u=Object.assign;t.exports=!u||n(8625)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r}))?function(t,e){for(var n=a(t),u=arguments.length,l=1,h=s.f,d=o.f;u>l;)for(var f,p=c(arguments[l++]),g=h?i(p).concat(h(p)):i(p),v=g.length,_=0;v>_;)f=g[_++],r&&!d.call(p,f)||(n[f]=p[f]);return n}:u},2897:function(t,e,n){var r=n(6365),i=n(7331),s=n(3603),o=n(8034)("IE_PROTO"),a=function(){},c=function(){var t,e=n(5050)("iframe"),r=s.length;for(e.style.display="none",n(8954).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[s[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[o]=t):n=c(),void 0===e?n:i(n,e)}},8558:function(t,e,n){var r=n(6365),i=n(5100),s=n(1382),o=Object.defineProperty;e.f=n(6628)?Object.defineProperty:function(t,e,n){if(r(t),e=s(e,!0),r(n),i)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},7331:function(t,e,n){var r=n(8558),i=n(6365),s=n(2912);t.exports=n(6628)?Object.defineProperties:function(t,e){i(t);for(var n,o=s(e),a=o.length,c=0;a>c;)r.f(t,n=o[c++],e[n]);return t}},4662:function(t,e,n){var r=n(5873),i=n(6061),s=n(5703),o=n(1382),a=n(4040),c=n(5100),u=Object.getOwnPropertyDescriptor;e.f=n(6628)?u:function(t,e){if(t=s(t),e=o(e,!0),c)try{return u(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},5259:function(t,e,n){var r=n(5703),i=n(6604).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==s.call(t)?function(t){try{return i(t)}catch(t){return o.slice()}}(t):i(r(t))}},6604:function(t,e,n){var r=n(5547),i=n(3603).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},7957:function(t,e){e.f=Object.getOwnPropertySymbols},9002:function(t,e,n){var r=n(4040),i=n(6033),s=n(8034)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},5547:function(t,e,n){var r=n(4040),i=n(5703),s=n(9021)(!1),o=n(8034)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),c=0,u=[];for(n in a)n!=o&&r(a,n)&&u.push(n);for(;e.length>c;)r(a,n=e[c++])&&(~s(u,n)||u.push(n));return u}},2912:function(t,e,n){var r=n(5547),i=n(3603);t.exports=Object.keys||function(t){return r(t,i)}},5873:function(t,e){e.f={}.propertyIsEnumerable},468:function(t,e,n){var r=n(5772),i=n(66),s=n(8625);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*s((function(){n(1)})),"Object",o)}},758:function(t,e,n){var r=n(6628),i=n(2912),s=n(5703),o=n(5873).f;t.exports=function(t){return function(e){for(var n,a=s(e),c=i(a),u=c.length,l=0,h=[];u>l;)n=c[l++],r&&!o.call(a,n)||h.push(t?[n,a[n]]:a[n]);return h}}},6831:function(t,e,n){var r=n(6604),i=n(7957),s=n(6365),o=n(8113).Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(s(t)),n=i.f;return n?e.concat(n(t)):e}},5575:function(t,e,n){var r=n(8113).parseFloat,i=n(8487).trim;t.exports=1/r(n(8021)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},929:function(t,e,n){var r=n(8113).parseInt,i=n(8487).trim,s=n(8021),o=/^[-+]?0[xX]/;t.exports=8!==r(s+"08")||22!==r(s+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(o.test(n)?16:10))}:r},9739:function(t){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},5151:function(t,e,n){var r=n(6365),i=n(7334),s=n(8577);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=s.f(t);return(0,n.resolve)(e),n.promise}},6061:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2243:function(t,e,n){var r=n(7738);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},7738:function(t,e,n){var r=n(8113),i=n(4216),s=n(4040),o=n(5078)("src"),a=n(646),c="toString",u=(""+a).split(c);n(66).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(s(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(s(n,o)||i(n,o,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[o]||a.call(this)}))},2404:function(t,e,n){"use strict";var r=n(106),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var s=n.call(t,e);if("object"!=typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},3288:function(t,e,n){"use strict";var r,i,s=n(4859),o=RegExp.prototype.exec,a=String.prototype.replace,c=o,u=(r=/a/,i=/b*/g,o.call(r,"a"),o.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(t){var e,n,r,i,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",s.call(c))),u&&(e=c.lastIndex),r=o.call(c,t),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),l&&r&&r.length>1&&a.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},339:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},6095:function(t,e,n){var r=n(7334),i=n(6365),s=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(1528)(Function.call,n(4662).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:s}},9766:function(t,e,n){"use strict";var r=n(8113),i=n(8558),s=n(6628),o=n(2190)("species");t.exports=function(t){var e=r[t];s&&e&&!e[o]&&i.f(e,o,{configurable:!0,get:function(){return this}})}},5727:function(t,e,n){var r=n(8558).f,i=n(4040),s=n(2190)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,s)&&r(t,s,{configurable:!0,value:e})}},8034:function(t,e,n){var r=n(8655)("keys"),i=n(5078);t.exports=function(t){return r[t]||(r[t]=i(t))}},8655:function(t,e,n){var r=n(66),i=n(8113),s="__core-js_shared__",o=i[s]||(i[s]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(1422)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},1987:function(t,e,n){var r=n(6365),i=n(2761),s=n(2190)("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||null==(n=r(o)[s])?e:i(n)}},225:function(t,e,n){"use strict";var r=n(8625);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},2070:function(t,e,n){var r=n(3338),i=n(1622);t.exports=function(t){return function(e,n){var s,o,a=String(i(e)),c=r(n),u=a.length;return c<0||c>=u?t?"":void 0:(s=a.charCodeAt(c))<55296||s>56319||c+1===u||(o=a.charCodeAt(c+1))<56320||o>57343?t?a.charAt(c):s:t?a.slice(c,c+2):o-56320+(s-55296<<10)+65536}}},465:function(t,e,n){var r=n(4587),i=n(1622);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},5776:function(t,e,n){var r=n(5772),i=n(8625),s=n(1622),o=/"/g,a=function(t,e,n,r){var i=String(s(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(r).replace(o,"&quot;")+'"'),a+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},6283:function(t,e,n){var r=n(6078),i=n(7160),s=n(1622);t.exports=function(t,e,n,o){var a=String(s(t)),c=a.length,u=void 0===n?" ":String(n),l=r(e);if(l<=c||""==u)return a;var h=l-c,d=i.call(u,Math.ceil(h/u.length));return d.length>h&&(d=d.slice(0,h)),o?d+a:a+d}},7160:function(t,e,n){"use strict";var r=n(3338),i=n(1622);t.exports=function(t){var e=String(i(this)),n="",s=r(t);if(s<0||s==1/0)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},8487:function(t,e,n){var r=n(5772),i=n(1622),s=n(8625),o=n(8021),a="["+o+"]",c=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),l=function(t,e,n){var i={},a=s((function(){return!!o[t]()||"​"!="​"[t]()})),c=i[t]=a?e(h):o[t];n&&(i[n]=c),r(r.P+r.F*a,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},8021:function(t){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},9124:function(t,e,n){var r,i,s,o=n(1528),a=n(7757),c=n(8954),u=n(5050),l=n(8113),h=l.process,d=l.setImmediate,f=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,v=0,_={},m=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){m.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++v]=function(){a("function"==typeof t?t:Function(t),e)},r(v),v},f=function(t){delete _[t]},"process"==n(6688)(h)?r=function(t){h.nextTick(o(m,t,1))}:g&&g.now?r=function(t){g.now(o(m,t,1))}:p?(s=(i=new p).port2,i.port1.onmessage=y,r=o(s.postMessage,s,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",y,!1)):r="onreadystatechange"in u("script")?function(t){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),m.call(t)}}:function(t){setTimeout(o(m,t,1),0)}),t.exports={set:d,clear:f}},8615:function(t,e,n){var r=n(3338),i=Math.max,s=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):s(t,e)}},1982:function(t,e,n){var r=n(3338),i=n(6078);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},3338:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},5703:function(t,e,n){var r=n(8467),i=n(1622);t.exports=function(t){return r(i(t))}},6078:function(t,e,n){var r=n(3338),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},6033:function(t,e,n){var r=n(1622);t.exports=function(t){return Object(r(t))}},1382:function(t,e,n){var r=n(7334);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},7978:function(t,e,n){"use strict";if(n(6628)){var r=n(1422),i=n(8113),s=n(8625),o=n(5772),a=n(5949),c=n(4972),u=n(1528),l=n(5824),h=n(6061),d=n(4216),f=n(2243),p=n(3338),g=n(6078),v=n(1982),_=n(8615),m=n(1382),y=n(4040),w=n(106),b=n(7334),I=n(6033),C=n(8908),S=n(2897),T=n(9002),E=n(6604).f,k=n(7107),x=n(5078),N=n(2190),R=n(8309),P=n(9021),O=n(1987),A=n(7680),M=n(3988),L=n(3143),D=n(9766),F=n(3195),j=n(6257),U=n(8558),W=n(4662),V=U.f,q=W.f,H=i.RangeError,z=i.TypeError,$=i.Uint8Array,B="ArrayBuffer",G="SharedArrayBuffer",K="BYTES_PER_ELEMENT",Y=Array.prototype,J=c.ArrayBuffer,Q=c.DataView,X=R(0),Z=R(2),tt=R(3),et=R(4),nt=R(5),rt=R(6),it=P(!0),st=P(!1),ot=A.values,at=A.keys,ct=A.entries,ut=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,dt=Y.join,ft=Y.sort,pt=Y.slice,gt=Y.toString,vt=Y.toLocaleString,_t=N("iterator"),mt=N("toStringTag"),yt=x("typed_constructor"),wt=x("def_constructor"),bt=a.CONSTR,It=a.TYPED,Ct=a.VIEW,St="Wrong length!",Tt=R(1,(function(t,e){return Rt(O(t,t[wt]),e)})),Et=s((function(){return 1===new $(new Uint16Array([1]).buffer)[0]})),kt=!!$&&!!$.prototype.set&&s((function(){new $(1).set({})})),xt=function(t,e){var n=p(t);if(n<0||n%e)throw H("Wrong offset!");return n},Nt=function(t){if(b(t)&&It in t)return t;throw z(t+" is not a typed array!")},Rt=function(t,e){if(!b(t)||!(yt in t))throw z("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Ot(O(t,t[wt]),e)},Ot=function(t,e){for(var n=0,r=e.length,i=Rt(t,r);r>n;)i[n]=e[n++];return i},At=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},Mt=function(t){var e,n,r,i,s,o,a=I(t),c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,d=k(a);if(null!=d&&!C(d)){for(o=d.call(a),r=[],e=0;!(s=o.next()).done;e++)r.push(s.value);a=r}for(h&&c>2&&(l=u(l,arguments[2],2)),e=0,n=g(a.length),i=Rt(this,n);n>e;e++)i[e]=h?l(a[e],e):a[e];return i},Lt=function(){for(var t=0,e=arguments.length,n=Rt(this,e);e>t;)n[t]=arguments[t++];return n},Dt=!!$&&s((function(){vt.call(new $(1))})),Ft=function(){return vt.apply(Dt?pt.call(Nt(this)):Nt(this),arguments)},jt={copyWithin:function(t,e){return j.call(Nt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return F.apply(Nt(this),arguments)},filter:function(t){return Pt(this,Z(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){X(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return dt.apply(Nt(this),arguments)},lastIndexOf:function(t){return ut.apply(Nt(this),arguments)},map:function(t){return Tt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,e=this,n=Nt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return tt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ft.call(Nt(this),t)},subarray:function(t,e){var n=Nt(this),r=n.length,i=_(t,r);return new(O(n,n[wt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===e?r:_(e,r))-i))}},Ut=function(t,e){return Pt(this,pt.call(Nt(this),t,e))},Wt=function(t){Nt(this);var e=xt(arguments[1],1),n=this.length,r=I(t),i=g(r.length),s=0;if(i+e>n)throw H(St);for(;s<i;)this[e+s]=r[s++]},Vt={entries:function(){return ct.call(Nt(this))},keys:function(){return at.call(Nt(this))},values:function(){return ot.call(Nt(this))}},qt=function(t,e){return b(t)&&t[It]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return qt(t,e=m(e,!0))?h(2,t[e]):q(t,e)},zt=function(t,e,n){return!(qt(t,e=m(e,!0))&&b(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};bt||(W.f=Ht,U.f=zt),o(o.S+o.F*!bt,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:zt}),s((function(){gt.call({})}))&&(gt=vt=function(){return dt.call(this)});var $t=f({},jt);f($t,Vt),d($t,_t,Vt.values),f($t,{slice:Ut,set:Wt,constructor:function(){},toString:gt,toLocaleString:Ft}),At($t,"buffer","b"),At($t,"byteOffset","o"),At($t,"byteLength","l"),At($t,"length","e"),V($t,mt,{get:function(){return this[It]}}),t.exports=function(t,e,n,c){var u=t+((c=!!c)?"Clamped":"")+"Array",h="get"+t,f="set"+t,p=i[u],_=p||{},m=p&&T(p),y=!p||!a.ABV,I={},C=p&&p.prototype,k=function(t,n){V(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[h](n*e+r.o,Et)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[f](n*e+i.o,r,Et)}(this,n,t)},enumerable:!0})};y?(p=n((function(t,n,r,i){l(t,p,u,"_d");var s,o,a,c,h=0,f=0;if(b(n)){if(!(n instanceof J||(c=w(n))==B||c==G))return It in n?Ot(p,n):Mt.call(p,n);s=n,f=xt(r,e);var _=n.byteLength;if(void 0===i){if(_%e)throw H(St);if((o=_-f)<0)throw H(St)}else if((o=g(i)*e)+f>_)throw H(St);a=o/e}else a=v(n),s=new J(o=a*e);for(d(t,"_d",{b:s,o:f,l:o,e:a,v:new Q(s)});h<a;)k(t,h++)})),C=p.prototype=S($t),d(C,"constructor",p)):s((function(){p(1)}))&&s((function(){new p(-1)}))&&L((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=n((function(t,n,r,i){var s;return l(t,p,u),b(n)?n instanceof J||(s=w(n))==B||s==G?void 0!==i?new _(n,xt(r,e),i):void 0!==r?new _(n,xt(r,e)):new _(n):It in n?Ot(p,n):Mt.call(p,n):new _(v(n))})),X(m!==Function.prototype?E(_).concat(E(m)):E(_),(function(t){t in p||d(p,t,_[t])})),p.prototype=C,r||(C.constructor=p));var x=C[_t],N=!!x&&("values"==x.name||null==x.name),R=Vt.values;d(p,yt,!0),d(C,It,u),d(C,Ct,!0),d(C,wt,p),(c?new p(1)[mt]==u:mt in C)||V(C,mt,{get:function(){return u}}),I[u]=p,o(o.G+o.W+o.F*(p!=_),I),o(o.S,u,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*s((function(){_.of.call(p,1)})),u,{from:Mt,of:Lt}),K in C||d(C,K,e),o(o.P,u,jt),D(u),o(o.P+o.F*kt,u,{set:Wt}),o(o.P+o.F*!N,u,Vt),r||C.toString==gt||(C.toString=gt),o(o.P+o.F*s((function(){new p(1).slice()})),u,{slice:Ut}),o(o.P+o.F*(s((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!s((function(){C.toLocaleString.call([1,2])}))),u,{toLocaleString:Ft}),M[u]=N?x:R,r||N||d(C,_t,R)}}else t.exports=function(){}},4972:function(t,e,n){"use strict";var r=n(8113),i=n(6628),s=n(1422),o=n(5949),a=n(4216),c=n(2243),u=n(8625),l=n(5824),h=n(3338),d=n(6078),f=n(1982),p=n(6604).f,g=n(8558).f,v=n(3195),_=n(5727),m="ArrayBuffer",y="DataView",w="Wrong index!",b=r.ArrayBuffer,I=r.DataView,C=r.Math,S=r.RangeError,T=r.Infinity,E=b,k=C.abs,x=C.pow,N=C.floor,R=C.log,P=C.LN2,O="buffer",A="byteLength",M="byteOffset",L=i?"_b":O,D=i?"_l":A,F=i?"_o":M;function j(t,e,n){var r,i,s,o=new Array(n),a=8*n-e-1,c=(1<<a)-1,u=c>>1,l=23===e?x(2,-24)-x(2,-77):0,h=0,d=t<0||0===t&&1/t<0?1:0;for((t=k(t))!=t||t===T?(i=t!=t?1:0,r=c):(r=N(R(t)/P),t*(s=x(2,-r))<1&&(r--,s*=2),(t+=r+u>=1?l/s:l*x(2,1-u))*s>=2&&(r++,s/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(t*s-1)*x(2,e),r+=u):(i=t*x(2,u-1)*x(2,e),r=0));e>=8;o[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,a+=e;a>0;o[h++]=255&r,r/=256,a-=8);return o[--h]|=128*d,o}function U(t,e,n){var r,i=8*n-e-1,s=(1<<i)-1,o=s>>1,a=i-7,c=n-1,u=t[c--],l=127&u;for(u>>=7;a>0;l=256*l+t[c],c--,a-=8);for(r=l&(1<<-a)-1,l>>=-a,a+=e;a>0;r=256*r+t[c],c--,a-=8);if(0===l)l=1-o;else{if(l===s)return r?NaN:u?-T:T;r+=x(2,e),l-=o}return(u?-1:1)*r*x(2,l-e)}function W(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function V(t){return[255&t]}function q(t){return[255&t,t>>8&255]}function H(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return j(t,52,8)}function $(t){return j(t,23,4)}function B(t,e,n){g(t.prototype,e,{get:function(){return this[n]}})}function G(t,e,n,r){var i=f(+n);if(i+e>t[D])throw S(w);var s=t[L]._b,o=i+t[F],a=s.slice(o,o+e);return r?a:a.reverse()}function K(t,e,n,r,i,s){var o=f(+n);if(o+e>t[D])throw S(w);for(var a=t[L]._b,c=o+t[F],u=r(+i),l=0;l<e;l++)a[c+l]=u[s?l:e-l-1]}if(o.ABV){if(!u((function(){b(1)}))||!u((function(){new b(-1)}))||u((function(){return new b,new b(1.5),new b(NaN),b.name!=m}))){for(var Y,J=(b=function(t){return l(this,b),new E(f(t))}).prototype=E.prototype,Q=p(E),X=0;Q.length>X;)(Y=Q[X++])in b||a(b,Y,E[Y]);s||(J.constructor=b)}var Z=new I(new b(2)),tt=I.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||c(I.prototype,{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else b=function(t){l(this,b,m);var e=f(t);this._b=v.call(new Array(e),0),this[D]=e},I=function(t,e,n){l(this,I,y),l(t,b,y);var r=t[D],i=h(e);if(i<0||i>r)throw S("Wrong offset!");if(i+(n=void 0===n?r-i:d(n))>r)throw S("Wrong length!");this[L]=t,this[F]=i,this[D]=n},i&&(B(b,A,"_l"),B(I,O,"_b"),B(I,A,"_l"),B(I,M,"_o")),c(I.prototype,{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return W(G(this,4,t,arguments[1]))},getUint32:function(t){return W(G(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return U(G(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return U(G(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){K(this,1,t,V,e)},setUint8:function(t,e){K(this,1,t,V,e)},setInt16:function(t,e){K(this,2,t,q,e,arguments[2])},setUint16:function(t,e){K(this,2,t,q,e,arguments[2])},setInt32:function(t,e){K(this,4,t,H,e,arguments[2])},setUint32:function(t,e){K(this,4,t,H,e,arguments[2])},setFloat32:function(t,e){K(this,4,t,$,e,arguments[2])},setFloat64:function(t,e){K(this,8,t,z,e,arguments[2])}});_(b,m),_(I,y),a(I.prototype,o.VIEW,!0),e.ArrayBuffer=b,e.DataView=I},5949:function(t,e,n){for(var r,i=n(8113),s=n(4216),o=n(5078),a=o("typed_array"),c=o("view"),u=!(!i.ArrayBuffer||!i.DataView),l=u,h=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[d[h++]])?(s(r.prototype,a,!0),s(r.prototype,c,!0)):l=!1;t.exports={ABV:u,CONSTR:l,TYPED:a,VIEW:c}},5078:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},5822:function(t,e,n){var r=n(8113).navigator;t.exports=r&&r.userAgent||""},9060:function(t,e,n){var r=n(7334);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},5660:function(t,e,n){var r=n(8113),i=n(66),s=n(1422),o=n(9669),a=n(8558).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=s?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:o.f(t)})}},9669:function(t,e,n){e.f=n(2190)},2190:function(t,e,n){var r=n(8655)("wks"),i=n(5078),s=n(8113).Symbol,o="function"==typeof s;(t.exports=function(t){return r[t]||(r[t]=o&&s[t]||(o?s:i)("Symbol."+t))}).store=r},7107:function(t,e,n){var r=n(106),i=n(2190)("iterator"),s=n(3988);t.exports=n(66).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||s[r(t)]}},1601:function(t,e,n){var r=n(5772);r(r.P,"Array",{copyWithin:n(6257)}),n(2094)("copyWithin")},46:function(t,e,n){"use strict";var r=n(5772),i=n(8309)(4);r(r.P+r.F*!n(225)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},453:function(t,e,n){var r=n(5772);r(r.P,"Array",{fill:n(3195)}),n(2094)("fill")},4434:function(t,e,n){"use strict";var r=n(5772),i=n(8309)(2);r(r.P+r.F*!n(225)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},8703:function(t,e,n){"use strict";var r=n(5772),i=n(8309)(6),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r(r.P+r.F*o,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(2094)(s)},1954:function(t,e,n){"use strict";var r=n(5772),i=n(8309)(5),s="find",o=!0;s in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(2094)(s)},7772:function(t,e,n){"use strict";var r=n(5772),i=n(8309)(0),s=n(225)([].forEach,!0);r(r.P+r.F*!s,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},9606:function(t,e,n){"use strict";var r=n(1528),i=n(5772),s=n(6033),o=n(3221),a=n(8908),c=n(6078),u=n(6644),l=n(7107);i(i.S+i.F*!n(3143)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,h,d=s(t),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,_=0,m=l(d);if(v&&(g=r(g,p>2?arguments[2]:void 0,2)),null==m||f==Array&&a(m))for(n=new f(e=c(d.length));e>_;_++)u(n,_,v?g(d[_],_):d[_]);else for(h=m.call(d),n=new f;!(i=h.next()).done;_++)u(n,_,v?o(h,g,[i.value,_],!0):i.value);return n.length=_,n}})},5155:function(t,e,n){"use strict";var r=n(5772),i=n(9021)(!1),s=[].indexOf,o=!!s&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!n(225)(s)),"Array",{indexOf:function(t){return o?s.apply(this,arguments)||0:i(this,t,arguments[1])}})},5867:function(t,e,n){var r=n(5772);r(r.S,"Array",{isArray:n(9141)})},7680:function(t,e,n){"use strict";var r=n(2094),i=n(5038),s=n(3988),o=n(5703);t.exports=n(1195)(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},8466:function(t,e,n){"use strict";var r=n(5772),i=n(5703),s=[].join;r(r.P+r.F*(n(8467)!=Object||!n(225)(s)),"Array",{join:function(t){return s.call(i(this),void 0===t?",":t)}})},3133:function(t,e,n){"use strict";var r=n(5772),i=n(5703),s=n(3338),o=n(6078),a=[].lastIndexOf,c=!!a&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(225)(a)),"Array",{lastIndexOf:function(t){if(c)return a.apply(this,arguments)||0;var e=i(this),n=o(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,s(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},286:function(t,e,n){"use strict";var r=n(5772),i=n(8309)(1);r(r.P+r.F*!n(225)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},9174:function(t,e,n){"use strict";var r=n(5772),i=n(6644);r(r.S+r.F*n(8625)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},8312:function(t,e,n){"use strict";var r=n(5772),i=n(9291);r(r.P+r.F*!n(225)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},9399:function(t,e,n){"use strict";var r=n(5772),i=n(9291);r(r.P+r.F*!n(225)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},7209:function(t,e,n){"use strict";var r=n(5772),i=n(8954),s=n(6688),o=n(8615),a=n(6078),c=[].slice;r(r.P+r.F*n(8625)((function(){i&&c.call(i)})),"Array",{slice:function(t,e){var n=a(this.length),r=s(this);if(e=void 0===e?n:e,"Array"==r)return c.call(this,t,e);for(var i=o(t,n),u=o(e,n),l=a(u-i),h=new Array(l),d=0;d<l;d++)h[d]="String"==r?this.charAt(i+d):this[i+d];return h}})},3231:function(t,e,n){"use strict";var r=n(5772),i=n(8309)(3);r(r.P+r.F*!n(225)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},1796:function(t,e,n){"use strict";var r=n(5772),i=n(2761),s=n(6033),o=n(8625),a=[].sort,c=[1,2,3];r(r.P+r.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!n(225)(a)),"Array",{sort:function(t){return void 0===t?a.call(s(this)):a.call(s(this),i(t))}})},652:function(t,e,n){n(9766)("Array")},817:function(t,e,n){var r=n(5772);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},5079:function(t,e,n){var r=n(5772),i=n(2626);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},5337:function(t,e,n){"use strict";var r=n(5772),i=n(6033),s=n(1382);r(r.P+r.F*n(8625)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=s(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},4163:function(t,e,n){var r=n(2190)("toPrimitive"),i=Date.prototype;r in i||n(4216)(i,r,n(9296))},5105:function(t,e,n){var r=Date.prototype,i="Invalid Date",s=r.toString,o=r.getTime;new Date(NaN)+""!=i&&n(7738)(r,"toString",(function(){var t=o.call(this);return t==t?s.call(this):i}))},8629:function(t,e,n){var r=n(5772);r(r.P,"Function",{bind:n(9337)})},5694:function(t,e,n){"use strict";var r=n(7334),i=n(9002),s=n(2190)("hasInstance"),o=Function.prototype;s in o||n(8558).f(o,s,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},9745:function(t,e,n){var r=n(8558).f,i=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in i||n(6628)&&r(i,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},1239:function(t,e,n){"use strict";var r=n(8156),i=n(9060),s="Map";t.exports=n(7611)(s,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,s),t);return e&&e.v},set:function(t,e){return r.def(i(this,s),0===t?0:t,e)}},r,!0)},5886:function(t,e,n){var r=n(5772),i=n(922),s=Math.sqrt,o=Math.acosh;r(r.S+r.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+s(t-1)*s(t+1))}})},91:function(t,e,n){var r=n(5772),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},6799:function(t,e,n){var r=n(5772),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},1570:function(t,e,n){var r=n(5772),i=n(2697);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},6006:function(t,e,n){var r=n(5772);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},8377:function(t,e,n){var r=n(5772),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},108:function(t,e,n){var r=n(5772),i=n(9489);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},905:function(t,e,n){var r=n(5772);r(r.S,"Math",{fround:n(4519)})},8103:function(t,e,n){var r=n(5772),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,s=0,o=0,a=arguments.length,c=0;o<a;)c<(n=i(arguments[o++]))?(s=s*(r=c/n)*r+1,c=n):s+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(s)}})},5937:function(t,e,n){var r=n(5772),i=Math.imul;r(r.S+r.F*n(8625)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,s=n&r,o=n&i;return 0|s*o+((n&r>>>16)*o+s*(n&i>>>16)<<16>>>0)}})},9979:function(t,e,n){var r=n(5772);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},3601:function(t,e,n){var r=n(5772);r(r.S,"Math",{log1p:n(922)})},4226:function(t,e,n){var r=n(5772);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},9750:function(t,e,n){var r=n(5772);r(r.S,"Math",{sign:n(2697)})},1462:function(t,e,n){var r=n(5772),i=n(9489),s=Math.exp;r(r.S+r.F*n(8625)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(s(t-1)-s(-t-1))*(Math.E/2)}})},4773:function(t,e,n){var r=n(5772),i=n(9489),s=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(s(t)+s(-t))}})},2421:function(t,e,n){var r=n(5772);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},6349:function(t,e,n){"use strict";var r=n(8113),i=n(4040),s=n(6688),o=n(8938),a=n(1382),c=n(8625),u=n(6604).f,l=n(4662).f,h=n(8558).f,d=n(8487).trim,f="Number",p=r.Number,g=p,v=p.prototype,_=s(n(2897)(v))==f,m="trim"in String.prototype,y=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,s=(e=m?e.trim():d(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var o,c=e.slice(2),u=0,l=c.length;u<l;u++)if((o=c.charCodeAt(u))<48||o>i)return NaN;return parseInt(c,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(_?c((function(){v.valueOf.call(n)})):s(n)!=f)?o(new g(y(e)),n,p):y(e)};for(var w,b=n(6628)?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;b.length>I;I++)i(g,w=b[I])&&!i(p,w)&&h(p,w,l(g,w));p.prototype=v,v.constructor=p,n(7738)(r,f,p)}},2211:function(t,e,n){var r=n(5772);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},3730:function(t,e,n){var r=n(5772),i=n(8113).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},6729:function(t,e,n){var r=n(5772);r(r.S,"Number",{isInteger:n(3917)})},7374:function(t,e,n){var r=n(5772);r(r.S,"Number",{isNaN:function(t){return t!=t}})},2095:function(t,e,n){var r=n(5772),i=n(3917),s=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&s(t)<=9007199254740991}})},6362:function(t,e,n){var r=n(5772);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},6329:function(t,e,n){var r=n(5772);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},7463:function(t,e,n){var r=n(5772),i=n(5575);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},5874:function(t,e,n){var r=n(5772),i=n(929);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},8110:function(t,e,n){"use strict";var r=n(5772),i=n(3338),s=n(1525),o=n(7160),a=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",h="0",d=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*u[n],u[n]=r%1e7,r=c(r/1e7)},f=function(t){for(var e=6,n=0;--e>=0;)n+=u[e],u[e]=c(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var n=String(u[t]);e=""===e?n:e+o.call(h,7-n.length)+n}return e},g=function(t,e,n){return 0===e?n:e%2==1?g(t,e-1,n*t):g(t*t,e/2,n)};r(r.P+r.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(8625)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,n,r,a,c=s(this,l),u=i(t),v="",_=h;if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(c*g(2,69,1))-69)<0?c*g(2,-e,1):c/g(2,e,1),n*=4503599627370496,(e=52-e)>0){for(d(0,n),r=u;r>=7;)d(1e7,0),r-=7;for(d(g(10,r,1),0),r=e-1;r>=23;)f(1<<23),r-=23;f(1<<r),d(1,1),f(2),_=p()}else d(0,n),d(1<<-e,0),_=p()+o.call(h,u);return u>0?v+((a=_.length)<=u?"0."+o.call(h,u-a)+_:_.slice(0,a-u)+"."+_.slice(a-u)):v+_}})},3689:function(t,e,n){"use strict";var r=n(5772),i=n(8625),s=n(1525),o=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==o.call(1,void 0)}))||!i((function(){o.call({})}))),"Number",{toPrecision:function(t){var e=s(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(e):o.call(e,t)}})},9773:function(t,e,n){var r=n(5772);r(r.S+r.F,"Object",{assign:n(7029)})},9701:function(t,e,n){var r=n(5772);r(r.S,"Object",{create:n(2897)})},8344:function(t,e,n){var r=n(5772);r(r.S+r.F*!n(6628),"Object",{defineProperties:n(7331)})},5843:function(t,e,n){var r=n(5772);r(r.S+r.F*!n(6628),"Object",{defineProperty:n(8558).f})},8338:function(t,e,n){var r=n(7334),i=n(998).onFreeze;n(468)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},541:function(t,e,n){var r=n(5703),i=n(4662).f;n(468)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},9770:function(t,e,n){n(468)("getOwnPropertyNames",(function(){return n(5259).f}))},8904:function(t,e,n){var r=n(6033),i=n(9002);n(468)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},3310:function(t,e,n){var r=n(7334);n(468)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},7070:function(t,e,n){var r=n(7334);n(468)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},9163:function(t,e,n){var r=n(7334);n(468)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},9020:function(t,e,n){var r=n(5772);r(r.S,"Object",{is:n(339)})},4978:function(t,e,n){var r=n(6033),i=n(2912);n(468)("keys",(function(){return function(t){return i(r(t))}}))},3668:function(t,e,n){var r=n(7334),i=n(998).onFreeze;n(468)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},7941:function(t,e,n){var r=n(7334),i=n(998).onFreeze;n(468)("seal",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},4210:function(t,e,n){var r=n(5772);r(r.S,"Object",{setPrototypeOf:n(6095).set})},6139:function(t,e,n){"use strict";var r=n(106),i={};i[n(2190)("toStringTag")]="z",i+""!="[object z]"&&n(7738)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},5821:function(t,e,n){var r=n(5772),i=n(5575);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},6130:function(t,e,n){var r=n(5772),i=n(929);r(r.G+r.F*(parseInt!=i),{parseInt:i})},2235:function(t,e,n){"use strict";var r,i,s,o,a=n(1422),c=n(8113),u=n(1528),l=n(106),h=n(5772),d=n(7334),f=n(2761),p=n(5824),g=n(1891),v=n(1987),_=n(9124).set,m=n(3492)(),y=n(8577),w=n(9739),b=n(5822),I=n(5151),C="Promise",S=c.TypeError,T=c.process,E=T&&T.versions,k=E&&E.v8||"",x=c.Promise,N="process"==l(T),R=function(){},P=i=y.f,O=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[n(2190)("species")]=function(t){t(R,R)};return(N||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==k.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),A=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,i=1==t._s,s=0,o=function(e){var n,s,o,a=i?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{a?(i||(2==t._h&&F(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),o=!0)),n===e.promise?u(S("Promise-chain cycle")):(s=A(n))?s.call(n,c,u):c(n)):u(r)}catch(t){l&&!o&&l.exit(),u(t)}};n.length>s;)o(n[s++]);t._c=[],t._n=!1,e&&!t._h&&L(t)}))}},L=function(t){_.call(c,(function(){var e,n,r,i=t._v,s=D(t);if(s&&(e=w((function(){N?T.emit("unhandledRejection",i,t):(n=c.onunhandledrejection)?n({promise:t,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=N||D(t)?2:1),t._a=void 0,s&&e.e)throw e.v}))},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){_.call(c,(function(){var e;N?T.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})}))},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},U=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=A(t))?m((function(){var r={_w:n,_d:!1};try{e.call(t,u(U,r,1),u(j,r,1))}catch(t){j.call(r,t)}})):(n._v=t,n._s=1,M(n,!1))}catch(t){j.call({_w:n,_d:!1},t)}}};O||(x=function(t){p(this,x,C,"_h"),f(t),r.call(this);try{t(u(U,this,1),u(j,this,1))}catch(t){j.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(2243)(x.prototype,{then:function(t,e){var n=P(v(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=N?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new r;this.promise=t,this.resolve=u(U,t,1),this.reject=u(j,t,1)},y.f=P=function(t){return t===x||t===o?new s(t):i(t)}),h(h.G+h.W+h.F*!O,{Promise:x}),n(5727)(x,C),n(9766)(C),o=n(66).Promise,h(h.S+h.F*!O,C,{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!O),C,{resolve:function(t){return I(a&&this===o?x:this,t)}}),h(h.S+h.F*!(O&&n(3143)((function(t){x.all(t).catch(R)}))),C,{all:function(t){var e=this,n=P(e),r=n.resolve,i=n.reject,s=w((function(){var n=[],s=0,o=1;g(t,!1,(function(t){var a=s++,c=!1;n.push(void 0),o++,e.resolve(t).then((function(t){c||(c=!0,n[a]=t,--o||r(n))}),i)})),--o||r(n)}));return s.e&&i(s.v),n.promise},race:function(t){var e=this,n=P(e),r=n.reject,i=w((function(){g(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},1335:function(t,e,n){var r=n(5772),i=n(2761),s=n(6365),o=(n(8113).Reflect||{}).apply,a=Function.apply;r(r.S+r.F*!n(8625)((function(){o((function(){}))})),"Reflect",{apply:function(t,e,n){var r=i(t),c=s(n);return o?o(r,e,c):a.call(r,e,c)}})},2603:function(t,e,n){var r=n(5772),i=n(2897),s=n(2761),o=n(6365),a=n(7334),c=n(8625),u=n(9337),l=(n(8113).Reflect||{}).construct,h=c((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),d=!c((function(){l((function(){}))}));r(r.S+r.F*(h||d),"Reflect",{construct:function(t,e){s(t),o(e);var n=arguments.length<3?t:s(arguments[2]);if(d&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var c=n.prototype,f=i(a(c)?c:Object.prototype),p=Function.apply.call(t,f,e);return a(p)?p:f}})},4460:function(t,e,n){var r=n(8558),i=n(5772),s=n(6365),o=n(1382);i(i.S+i.F*n(8625)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){s(t),e=o(e,!0),s(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},5970:function(t,e,n){var r=n(5772),i=n(4662).f,s=n(6365);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(s(t),e);return!(n&&!n.configurable)&&delete t[e]}})},4288:function(t,e,n){"use strict";var r=n(5772),i=n(6365),s=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(6445)(s,"Object",(function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new s(t)}})},4613:function(t,e,n){var r=n(4662),i=n(5772),s=n(6365);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(s(t),e)}})},122:function(t,e,n){var r=n(5772),i=n(9002),s=n(6365);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(s(t))}})},2039:function(t,e,n){var r=n(4662),i=n(9002),s=n(4040),o=n(5772),a=n(7334),c=n(6365);o(o.S,"Reflect",{get:function t(e,n){var o,u,l=arguments.length<3?e:arguments[2];return c(e)===l?e[n]:(o=r.f(e,n))?s(o,"value")?o.value:void 0!==o.get?o.get.call(l):void 0:a(u=i(e))?t(u,n,l):void 0}})},9484:function(t,e,n){var r=n(5772);r(r.S,"Reflect",{has:function(t,e){return e in t}})},1014:function(t,e,n){var r=n(5772),i=n(6365),s=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!s||s(t)}})},7150:function(t,e,n){var r=n(5772);r(r.S,"Reflect",{ownKeys:n(6831)})},8982:function(t,e,n){var r=n(5772),i=n(6365),s=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return s&&s(t),!0}catch(t){return!1}}})},8633:function(t,e,n){var r=n(5772),i=n(6095);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},8868:function(t,e,n){var r=n(8558),i=n(4662),s=n(9002),o=n(4040),a=n(5772),c=n(6061),u=n(6365),l=n(7334);a(a.S,"Reflect",{set:function t(e,n,a){var h,d,f=arguments.length<4?e:arguments[3],p=i.f(u(e),n);if(!p){if(l(d=s(e)))return t(d,n,a,f);p=c(0)}if(o(p,"value")){if(!1===p.writable||!l(f))return!1;if(h=i.f(f,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=a,r.f(f,n,h)}else r.f(f,n,c(0,a));return!0}return void 0!==p.set&&(p.set.call(f,a),!0)}})},5506:function(t,e,n){var r=n(8113),i=n(8938),s=n(8558).f,o=n(6604).f,a=n(4587),c=n(4859),u=r.RegExp,l=u,h=u.prototype,d=/a/g,f=/a/g,p=new u(d)!==d;if(n(6628)&&(!p||n(8625)((function(){return f[n(2190)("match")]=!1,u(d)!=d||u(f)==f||"/a/i"!=u(d,"i")})))){u=function(t,e){var n=this instanceof u,r=a(t),s=void 0===e;return!n&&r&&t.constructor===u&&s?t:i(p?new l(r&&!s?t.source:t,e):l((r=t instanceof u)?t.source:t,r&&s?c.call(t):e),n?this:h,u)};for(var g=function(t){t in u||s(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=o(l),_=0;v.length>_;)g(v[_++]);h.constructor=u,u.prototype=h,n(7738)(r,"RegExp",u)}n(9766)("RegExp")},5846:function(t,e,n){"use strict";var r=n(3288);n(5772)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},751:function(t,e,n){n(6628)&&"g"!=/./g.flags&&n(8558).f(RegExp.prototype,"flags",{configurable:!0,get:n(4859)})},4828:function(t,e,n){"use strict";var r=n(6365),i=n(6078),s=n(8492),o=n(2404);n(8897)("match",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var c=r(t),u=String(this);if(!c.global)return o(c,u);var l=c.unicode;c.lastIndex=0;for(var h,d=[],f=0;null!==(h=o(c,u));){var p=String(h[0]);d[f]=p,""===p&&(c.lastIndex=s(u,i(c.lastIndex),l)),f++}return 0===f?null:d}]}))},4208:function(t,e,n){"use strict";var r=n(6365),i=n(6033),s=n(6078),o=n(3338),a=n(8492),c=n(2404),u=Math.max,l=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;n(8897)("replace",2,(function(t,e,n,p){return[function(r,i){var s=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,s,i):n.call(String(s),r,i)},function(t,e){var i=p(n,t,this,e);if(i.done)return i.value;var h=r(t),d=String(this),f="function"==typeof e;f||(e=String(e));var v=h.global;if(v){var _=h.unicode;h.lastIndex=0}for(var m=[];;){var y=c(h,d);if(null===y)break;if(m.push(y),!v)break;""===String(y[0])&&(h.lastIndex=a(d,s(h.lastIndex),_))}for(var w,b="",I=0,C=0;C<m.length;C++){y=m[C];for(var S=String(y[0]),T=u(l(o(y.index),d.length),0),E=[],k=1;k<y.length;k++)E.push(void 0===(w=y[k])?w:String(w));var x=y.groups;if(f){var N=[S].concat(E,T,d);void 0!==x&&N.push(x);var R=String(e.apply(void 0,N))}else R=g(S,d,T,E,x,e);T>=I&&(b+=d.slice(I,T)+R,I=T+S.length)}return b+d.slice(I)}];function g(t,e,r,s,o,a){var c=r+t.length,u=s.length,l=f;return void 0!==o&&(o=i(o),l=d),n.call(a,l,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":a=o[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>u){var d=h(l/10);return 0===d?n:d<=u?void 0===s[d-1]?i.charAt(1):s[d-1]+i.charAt(1):n}a=s[l-1]}return void 0===a?"":a}))}}))},2679:function(t,e,n){"use strict";var r=n(6365),i=n(339),s=n(2404);n(8897)("search",1,(function(t,e,n,o){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=o(n,t,this);if(e.done)return e.value;var a=r(t),c=String(this),u=a.lastIndex;i(u,0)||(a.lastIndex=0);var l=s(a,c);return i(a.lastIndex,u)||(a.lastIndex=u),null===l?-1:l.index}]}))},9236:function(t,e,n){"use strict";var r=n(4587),i=n(6365),s=n(1987),o=n(8492),a=n(6078),c=n(2404),u=n(3288),l=n(8625),h=Math.min,d=[].push,f=4294967295,p=!l((function(){RegExp(f,"y")}));n(8897)("split",2,(function(t,e,n,l){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var s,o,a,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,p=void 0===e?f:e>>>0,g=new RegExp(t.source,l+"g");(s=u.call(g,i))&&!((o=g.lastIndex)>h&&(c.push(i.slice(h,s.index)),s.length>1&&s.index<i.length&&d.apply(c,s.slice(1)),a=s[0].length,h=o,c.length>=p));)g.lastIndex===s.index&&g.lastIndex++;return h===i.length?!a&&g.test("")||c.push(""):c.push(i.slice(h)),c.length>p?c.slice(0,p):c}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,i,r):g.call(String(i),n,r)},function(t,e){var r=l(g,t,this,e,g!==n);if(r.done)return r.value;var u=i(t),d=String(this),v=s(u,RegExp),_=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),y=new v(p?u:"^(?:"+u.source+")",m),w=void 0===e?f:e>>>0;if(0===w)return[];if(0===d.length)return null===c(y,d)?[d]:[];for(var b=0,I=0,C=[];I<d.length;){y.lastIndex=p?I:0;var S,T=c(y,p?d:d.slice(I));if(null===T||(S=h(a(y.lastIndex+(p?0:I)),d.length))===b)I=o(d,I,_);else{if(C.push(d.slice(b,I)),C.length===w)return C;for(var E=1;E<=T.length-1;E++)if(C.push(T[E]),C.length===w)return C;I=b=S}}return C.push(d.slice(b)),C}]}))},4321:function(t,e,n){"use strict";n(751);var r=n(6365),i=n(4859),s=n(6628),o="toString",a=/./.toString,c=function(t){n(7738)(RegExp.prototype,o,t,!0)};n(8625)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?c((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?i.call(t):void 0)})):a.name!=o&&c((function(){return a.call(this)}))},8392:function(t,e,n){"use strict";var r=n(8156),i=n(9060);t.exports=n(7611)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},513:function(t,e,n){"use strict";n(5776)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},4186:function(t,e,n){"use strict";n(5776)("big",(function(t){return function(){return t(this,"big","","")}}))},5502:function(t,e,n){"use strict";n(5776)("blink",(function(t){return function(){return t(this,"blink","","")}}))},6213:function(t,e,n){"use strict";n(5776)("bold",(function(t){return function(){return t(this,"b","","")}}))},516:function(t,e,n){"use strict";var r=n(5772),i=n(2070)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},427:function(t,e,n){"use strict";var r=n(5772),i=n(6078),s=n(465),o="endsWith",a="".endsWith;r(r.P+r.F*n(6570)(o),"String",{endsWith:function(t){var e=s(this,t,o),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),c=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,c):e.slice(c-u.length,c)===u}})},9457:function(t,e,n){"use strict";n(5776)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},9876:function(t,e,n){"use strict";n(5776)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},9772:function(t,e,n){"use strict";n(5776)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},2763:function(t,e,n){var r=n(5772),i=n(8615),s=String.fromCharCode,o=String.fromCodePoint;r(r.S+r.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,o=0;r>o;){if(e=+arguments[o++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?s(e):s(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},3777:function(t,e,n){"use strict";var r=n(5772),i=n(465),s="includes";r(r.P+r.F*n(6570)(s),"String",{includes:function(t){return!!~i(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},7174:function(t,e,n){"use strict";n(5776)("italics",(function(t){return function(){return t(this,"i","","")}}))},7472:function(t,e,n){"use strict";var r=n(2070)(!0);n(1195)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},5251:function(t,e,n){"use strict";n(5776)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},1711:function(t,e,n){var r=n(5772),i=n(5703),s=n(6078);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=s(e.length),r=arguments.length,o=[],a=0;n>a;)o.push(String(e[a++])),a<r&&o.push(String(arguments[a]));return o.join("")}})},7238:function(t,e,n){var r=n(5772);r(r.P,"String",{repeat:n(7160)})},7984:function(t,e,n){"use strict";n(5776)("small",(function(t){return function(){return t(this,"small","","")}}))},5942:function(t,e,n){"use strict";var r=n(5772),i=n(6078),s=n(465),o="startsWith",a="".startsWith;r(r.P+r.F*n(6570)(o),"String",{startsWith:function(t){var e=s(this,t,o),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},3359:function(t,e,n){"use strict";n(5776)("strike",(function(t){return function(){return t(this,"strike","","")}}))},195:function(t,e,n){"use strict";n(5776)("sub",(function(t){return function(){return t(this,"sub","","")}}))},8586:function(t,e,n){"use strict";n(5776)("sup",(function(t){return function(){return t(this,"sup","","")}}))},183:function(t,e,n){"use strict";n(8487)("trim",(function(t){return function(){return t(this,3)}}))},9823:function(t,e,n){"use strict";var r=n(8113),i=n(4040),s=n(6628),o=n(5772),a=n(7738),c=n(998).KEY,u=n(8625),l=n(8655),h=n(5727),d=n(5078),f=n(2190),p=n(9669),g=n(5660),v=n(7820),_=n(9141),m=n(6365),y=n(7334),w=n(6033),b=n(5703),I=n(1382),C=n(6061),S=n(2897),T=n(5259),E=n(4662),k=n(7957),x=n(8558),N=n(2912),R=E.f,P=x.f,O=T.f,A=r.Symbol,M=r.JSON,L=M&&M.stringify,D=f("_hidden"),F=f("toPrimitive"),j={}.propertyIsEnumerable,U=l("symbol-registry"),W=l("symbols"),V=l("op-symbols"),q=Object.prototype,H="function"==typeof A&&!!k.f,z=r.QObject,$=!z||!z.prototype||!z.prototype.findChild,B=s&&u((function(){return 7!=S(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=R(q,e);r&&delete q[e],P(t,e,n),r&&t!==q&&P(q,e,r)}:P,G=function(t){var e=W[t]=S(A.prototype);return e._k=t,e},K=H&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},Y=function(t,e,n){return t===q&&Y(V,e,n),m(t),e=I(e,!0),m(n),i(W,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=S(n,{enumerable:C(0,!1)})):(i(t,D)||P(t,D,C(1,{})),t[D][e]=!0),B(t,e,n)):P(t,e,n)},J=function(t,e){m(t);for(var n,r=v(e=b(e)),i=0,s=r.length;s>i;)Y(t,n=r[i++],e[n]);return t},Q=function(t){var e=j.call(this,t=I(t,!0));return!(this===q&&i(W,t)&&!i(V,t))&&(!(e||!i(this,t)||!i(W,t)||i(this,D)&&this[D][t])||e)},X=function(t,e){if(t=b(t),e=I(e,!0),t!==q||!i(W,e)||i(V,e)){var n=R(t,e);return!n||!i(W,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=O(b(t)),r=[],s=0;n.length>s;)i(W,e=n[s++])||e==D||e==c||r.push(e);return r},tt=function(t){for(var e,n=t===q,r=O(n?V:b(t)),s=[],o=0;r.length>o;)!i(W,e=r[o++])||n&&!i(q,e)||s.push(W[e]);return s};H||(a((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===q&&e.call(V,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),B(this,t,C(1,n))};return s&&$&&B(q,t,{configurable:!0,set:e}),G(t)}).prototype,"toString",(function(){return this._k})),E.f=X,x.f=Y,n(6604).f=T.f=Z,n(5873).f=Q,k.f=tt,s&&!n(1422)&&a(q,"propertyIsEnumerable",Q,!0),p.f=function(t){return G(f(t))}),o(o.G+o.W+o.F*!H,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)f(et[nt++]);for(var rt=N(f.store),it=0;rt.length>it;)g(rt[it++]);o(o.S+o.F*!H,"Symbol",{for:function(t){return i(U,t+="")?U[t]:U[t]=A(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),o(o.S+o.F*!H,"Object",{create:function(t,e){return void 0===e?S(t):J(S(t),e)},defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var st=u((function(){k.f(1)}));o(o.S+o.F*st,"Object",{getOwnPropertySymbols:function(t){return k.f(w(t))}}),M&&o(o.S+o.F*(!H||u((function(){var t=A();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(y(e)||void 0!==t)&&!K(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,L.apply(M,r)}}),A.prototype[F]||n(4216)(A.prototype,F,A.prototype.valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},345:function(t,e,n){"use strict";var r=n(5772),i=n(5949),s=n(4972),o=n(6365),a=n(8615),c=n(6078),u=n(7334),l=n(8113).ArrayBuffer,h=n(1987),d=s.ArrayBuffer,f=s.DataView,p=i.ABV&&l.isView,g=d.prototype.slice,v=i.VIEW,_="ArrayBuffer";r(r.G+r.W+r.F*(l!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,_,{isView:function(t){return p&&p(t)||u(t)&&v in t}}),r(r.P+r.U+r.F*n(8625)((function(){return!new d(2).slice(1,void 0).byteLength})),_,{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(o(this),t);for(var n=o(this).byteLength,r=a(t,n),i=a(void 0===e?n:e,n),s=new(h(this,d))(c(i-r)),u=new f(this),l=new f(s),p=0;r<i;)l.setUint8(p++,u.getUint8(r++));return s}}),n(9766)(_)},8460:function(t,e,n){var r=n(5772);r(r.G+r.W+r.F*!n(5949).ABV,{DataView:n(4972).DataView})},3149:function(t,e,n){n(7978)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},4637:function(t,e,n){n(7978)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},3958:function(t,e,n){n(7978)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},5469:function(t,e,n){n(7978)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},6788:function(t,e,n){n(7978)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},1592:function(t,e,n){n(7978)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},6471:function(t,e,n){n(7978)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},6780:function(t,e,n){n(7978)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},3620:function(t,e,n){n(7978)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},773:function(t,e,n){"use strict";var r,i=n(8113),s=n(8309)(0),o=n(7738),a=n(998),c=n(7029),u=n(6339),l=n(7334),h=n(9060),d=n(9060),f=!i.ActiveXObject&&"ActiveXObject"in i,p="WeakMap",g=a.getWeak,v=Object.isExtensible,_=u.ufstore,m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(l(t)){var e=g(t);return!0===e?_(h(this,p)).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(h(this,p),t,e)}},w=t.exports=n(7611)(p,m,y,u,!0,!0);d&&f&&(c((r=u.getConstructor(m,p)).prototype,y),a.NEED=!0,s(["delete","has","get","set"],(function(t){var e=w.prototype,n=e[t];o(e,t,(function(e,i){if(l(e)&&!v(e)){this._f||(this._f=new r);var s=this._f[t](e,i);return"set"==t?this:s}return n.call(this,e,i)}))})))},3623:function(t,e,n){"use strict";var r=n(6339),i=n(9060),s="WeakSet";n(7611)(s,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,s),t,!0)}},r,!1,!0)},7328:function(t,e,n){"use strict";var r=n(5772),i=n(2674),s=n(6033),o=n(6078),a=n(2761),c=n(3531);r(r.P,"Array",{flatMap:function(t){var e,n,r=s(this);return a(t),e=o(r.length),n=c(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(2094)("flatMap")},8081:function(t,e,n){"use strict";var r=n(5772),i=n(9021)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(2094)("includes")},9716:function(t,e,n){var r=n(5772),i=n(758)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},7453:function(t,e,n){var r=n(5772),i=n(6831),s=n(5703),o=n(4662),a=n(6644);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=s(t),c=o.f,u=i(r),l={},h=0;u.length>h;)void 0!==(n=c(r,e=u[h++]))&&a(l,e,n);return l}})},27:function(t,e,n){var r=n(5772),i=n(758)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},6632:function(t,e,n){"use strict";var r=n(5772),i=n(66),s=n(8113),o=n(1987),a=n(5151);r(r.P+r.R,"Promise",{finally:function(t){var e=o(this,i.Promise||s.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},8302:function(t,e,n){"use strict";var r=n(5772),i=n(6283),s=n(5822),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s);r(r.P+r.F*o,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},9447:function(t,e,n){"use strict";var r=n(5772),i=n(6283),s=n(5822),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s);r(r.P+r.F*o,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},9324:function(t,e,n){"use strict";n(8487)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},152:function(t,e,n){"use strict";n(8487)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},3756:function(t,e,n){n(5660)("asyncIterator")},3085:function(t,e,n){for(var r=n(7680),i=n(2912),s=n(7738),o=n(8113),a=n(4216),c=n(3988),u=n(2190),l=u("iterator"),h=u("toStringTag"),d=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(f),g=0;g<p.length;g++){var v,_=p[g],m=f[_],y=o[_],w=y&&y.prototype;if(w&&(w[l]||a(w,l,d),w[h]||a(w,h,_),c[_]=d,m))for(v in r)w[v]||s(w,v,r[v],!0)}},6282:function(t,e,n){var r=n(5772),i=n(9124);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},6252:function(t,e,n){var r=n(8113),i=n(5772),s=n(5822),o=[].slice,a=/MSIE .\./.test(s),c=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&o.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*a,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},1497:function(t,e,n){n(6252),n(6282),n(3085),t.exports=n(66)},6248:function(t){var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,s=Object.create(i.prototype),o=new x(r||[]);return s._invoke=function(t,e,n){var r=h;return function(i,s){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw s;return R()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=T(o,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,o),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function v(){}function _(){}function m(){}var y={};c(y,s,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,s)&&(y=b);var I=m.prototype=v.prototype=Object.create(y);function C(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,s,o,a){var c=l(t[i],t,s);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(h).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,a)}))}a(c.arg)}var i;this._invoke=function(t,r){function s(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(s,s):s()}}function T(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function N(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:e,done:!0}}return _.prototype=m,c(I,"constructor",m),c(m,"constructor",_),_.displayName=c(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,a,"GeneratorFunction")),t.prototype=Object.create(I),t},t.awrap=function(t){return{__await:t}},C(S.prototype),c(S.prototype,o,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new S(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(I),c(I,a,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";n(8391);var t,e=(t=n(1829))&&t.__esModule?t:{default:t};e.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),e.default._babelPolyfill=!0}(),function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};function e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function n(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function i(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create;var s=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,h=(3&s)<<4|a>>4,d=(15&a)<<2|u>>6,f=63&u;c||(f=64,o||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==c)throw Error();var u=s<<2|o>>4;if(r.push(u),64!==a){var l=o<<4&240|a>>2;if(r.push(l),64!==c){var h=a<<6&192|c;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return c.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}var v=function(e){function n(t,r,i){var s=e.call(this,r)||this;return s.code=t,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,_.prototype.create),s}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n}(Error),_=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?m(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",c=new v(i,a,r);return c},t}();function m(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function w(t){return JSON.parse(t)}function b(t){return JSON.stringify(t)}var I=function(t){var e={},n={},r={},i="";try{var s=t.split(".");e=w(u(s[0])||""),n=w(u(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function T(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function E(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function k(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,s=n;i<s.length;i++){var o=s[i];if(!r.includes(o))return!1;var a=t[o],c=e[o];if(x(a)&&x(c)){if(!k(a,c))return!1}else if(a!==c)return!1}for(var u=0,l=r;u<l.length;u++)if(o=l[u],!n.includes(o))return!1;return!0}function x(t){return null!==t&&"object"==typeof t}function N(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r];n(s[0],s[1])}return e.length?"&"+e.join("&"):""}function R(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function P(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var O=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var s,o,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(s=l^c&(u^l),o=1518500249):(s=c^u^l,o=1859775393):r<60?(s=c&u|l&(c|u),o=2400959708):(s=c^u^l,o=3395469782),i=(a<<5|a>>>27)+s+h+o+n[r]&4294967295,h=l,l=u,u=4294967295&(c<<30|c>>>2),c=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),A=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function M(){}function L(t,e){return t+" failed: "+e+" argument "}var D=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function F(t){return t&&t._delegate?t._delegate:t}var j,U=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),W="[DEFAULT]",V=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new d;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,i;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:W})}catch(t){}try{for(var s=n(this.instancesDeferred.entries()),o=s.next();!o.done;o=s.next()){var a=r(o.value,2),c=a[0],u=a[1],l=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService({instanceIdentifier:l});u.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=W),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,e=void 0,s=function(){var t;return function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(i(i([],r(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),r(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function o(t){try{c(s.next(t))}catch(t){i(t)}}function a(t){try{c(s.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((s=s.apply(t,e||[])).next())}));var t,e,n,s},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=W),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=W),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,i;void 0===t&&(t={});var s=t.options,o=void 0===s?{}:s,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=n(this.instancesDeferred.entries()),l=u.next();!l.done;l=u.next()){var h=r(l.value,2),d=h[0],f=h[1];a===this.normalizeInstanceIdentifier(d)&&f.resolve(c)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return c},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var r,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=n(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(t,e)}catch(t){}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===W?void 0:e),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(t){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=W),this.component?this.component.multipleInstances?t:W:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),q=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new V(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function H(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var z,$=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(z||(z={}));var B={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},G=z.INFO,K=((j={})[z.DEBUG]="log",j[z.VERBOSE]="log",j[z.INFO]="info",j[z.WARN]="warn",j[z.ERROR]="error",j),Y=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),s=K[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,H(["["+i+"]  "+t.name+":"],n))}},J=function(){function t(t){this.name=t,this._logLevel=G,this._logHandler=Y,this._userLogHandler=null,$.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in z))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?B[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,H([this,z.DEBUG],t)),this._logHandler.apply(this,H([this,z.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,H([this,z.VERBOSE],t)),this._logHandler.apply(this,H([this,z.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,H([this,z.INFO],t)),this._logHandler.apply(this,H([this,z.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,H([this,z.WARN],t)),this._logHandler.apply(this,H([this,z.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,H([this,z.ERROR],t)),this._logHandler.apply(this,H([this,z.ERROR],t))},t}();class Q{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const X="@firebase/app",Z=new J("@firebase/app"),tt={[X]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,nt=new Map;function rt(t,e){try{t.container.addComponent(e)}catch(n){Z.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function it(t){const e=t.name;if(nt.has(e))return Z.debug(`There were multiple attempts to register component ${e}.`),!1;nt.set(e,t);for(const e of et.values())rt(e,t);return!0}function st(t,e){return t.container.getProvider(e)}const ot=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class at{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new U("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ot.create("app-deleted",{appName:this._name})}}const ct="9.0.0";function ut(t="[DEFAULT]"){const e=et.get(t);if(!e)throw ot.create("no-app",{appName:t});return e}function lt(t,e,n){var r;let i=null!==(r=tt[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Z.warn(t.join(" "))}it(new U(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}it(new U("platform-logger",(t=>new Q(t)),"PRIVATE")),lt(X,"0.7.0",undefined),lt("fire-js",""),lt("firebase","9.0.0","app");let ht="";class dt{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),b(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:w(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class ft{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return C(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const pt=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dt(e)}}catch(t){}return new ft},gt=pt("localStorage"),vt=pt("sessionStorage"),_t=new J("@firebase/database"),mt=function(){let t=1;return function(){return t++}}(),yt=function(t){const e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new O;n.update(e);const r=n.digest();return c.encodeByteArray(r)},wt=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=wt.apply(null,r):e+="object"==typeof r?b(r):r,e+=" "}return e};let bt=null,It=!0;const Ct=function(...t){if(!0===It&&(It=!1,null===bt&&!0===vt.get("logging_enabled")&&(e=!0,s(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(_t.logLevel=z.VERBOSE,bt=_t.log.bind(_t),n&&vt.set("logging_enabled",!0)):"function"==typeof e?bt=e:(bt=null,vt.remove("logging_enabled")))),bt){const e=wt.apply(null,t);bt(e)}var e,n},St=function(t){return function(...e){Ct(t,...e)}},Tt=function(...t){const e="FIREBASE INTERNAL ERROR: "+wt(...t);_t.error(e)},Et=function(...t){const e=`FIREBASE FATAL ERROR: ${wt(...t)}`;throw _t.error(e),new Error(e)},kt=function(...t){const e="FIREBASE WARNING: "+wt(...t);_t.warn(e)},xt=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Nt="[MIN_NAME]",Rt="[MAX_NAME]",Pt=function(t,e){if(t===e)return 0;if(t===Nt||e===Rt)return-1;if(e===Nt||t===Rt)return 1;{const n=Ut(t),r=Ut(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},Ot=function(t,e){return t===e?0:t<e?-1:1},At=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+b(e))},Mt=function(t){if("object"!=typeof t||null===t)return b(t);const e=[];for(const n in t)e.push(n);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=b(e[r]),n+=":",n+=Mt(t[e[r]]);return n+="}",n},Lt=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Dt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Ft=function(t){s(!xt(t),"Invalid JSON number");let e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),n=i+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();const c=a.join("");let u="";for(o=0;o<64;o+=8){let t=parseInt(c.substr(o,8),2).toString(16);1===t.length&&(t="0"+t),u+=t}return u.toLowerCase()},jt=new RegExp("^-?(0*)\\d{1,10}$"),Ut=function(t){if(jt.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Wt=function(t){try{t()}catch(t){setTimeout((()=>{const e=t.stack||"";throw kt("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Vt=function(t,e){const n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n};class qt{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((e,n)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){kt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ht{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(Ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,n)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kt(t)}}class zt{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}zt.OWNER="owner";const $t=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Bt="websocket",Gt="long_polling";class Kt{constructor(t,e,n,r,i=!1,s="",o=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gt.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&gt.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function Yt(t,e,n){let r;if(s("string"==typeof e,"typeof type must == string"),s("object"==typeof n,"typeof params must == object"),e===Bt)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Gt)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return Dt(n,((t,e)=>{i.push(t+"="+e)})),r+i.join("&")}class Jt{constructor(){this.counters_={}}incrementCounter(t,e=1){C(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return l(this.counters_)}}const Qt={},Xt={};function Zt(t){const e=t.toString();return Qt[e]||(Qt[e]=new Jt),Qt[e]}class te{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&Wt((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ee{constructor(t,e,n,r,i,s,o){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=St(t),this.stats_=Zt(e),this.urlFn=t=>(this.appCheckToken&&(t.ac=this.appCheckToken),Yt(e,Gt,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new te(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new ne(((...t)=>{const[e,n,r,i,s]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===e)this.id=n,this.password=r;else{if("close"!==e)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)}),(()=>{this.onClosed_()}),this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&$t.test(location.hostname)&&(t.r="f");const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ee.forceAllow_=!0}static forceDisallow(){ee.forceDisallow_=!0}static isAvailable(){return!(!ee.forceAllow_&&(ee.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=b(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(i=a(e),c.encodeByteArray(i,!0)),r=Lt(n,1840);var i;for(let t=0;t<r.length;t++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[t]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=b(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class ne{constructor(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=ne.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(t){Ct("frame writing exception"),t.stack&&Ct(t.stack),Ct(t)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ct("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const t=this.pendingSegs.shift();n=n+"&seg"+r+"="+t.seg+"&ts"+r+"="+t.ts+"&d"+r+"="+t.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(t,(()=>{clearTimeout(r),n()}))}addTag(t,e){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{Ct("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(t){}}),Math.floor(1))}}let re=null;"undefined"!=typeof MozWebSocket?re=MozWebSocket:"undefined"!=typeof WebSocket&&(re=WebSocket);class ie{constructor(t,e,n,r,i,s,o){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=St(this.connId),this.stats_=Zt(e),this.connURL=ie.connectionURL_(e,s,o,r),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,r){const i={v:"5"};return"undefined"!=typeof location&&location.hostname&&$t.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Yt(t,Bt,i)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gt.set("previous_websocket_failure",!0);try{{const t={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new re(this.connURL,[],t)}}catch(t){this.log_("Error instantiating WebSocket.");const e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){ie.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(e);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==re&&!ie.forceDisallow_}static previouslyFailed(){return gt.isInMemoryStorage||!0===gt.get("previous_websocket_failure")}markConnectionHealthy(){gt.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=w(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(s(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=b(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=Lt(e,16384);n.length>1&&this.sendString_(String(n.length));for(let t=0;t<n.length;t++)this.sendString_(n[t])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ie.responsesRequiredToBeHealthy=2,ie.healthyTimeout=3e4;class se{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ee,ie]}initTransports_(t){const e=ie&&ie.isAvailable();let n=e&&!ie.previouslyFailed();if(t.webSocketOnly&&(e||kt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ie];else{const t=this.transports_=[];for(const e of se.ALL_TRANSPORTS)e&&e.isAvailable()&&t.push(e)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class oe{constructor(t,e,n,r,i,s,o,a,c,u){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=St("c:"+this.id+":"),this.transportManager_=new se(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,n)}),Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Vt((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=At("t",t),n=At("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=At("t",t),n=At("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=At("t",t);if("d"in t){const n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Tt("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Tt("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&kt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),Vt((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vt((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ae{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}class ce{constructor(t){this.allowedEvents_=t,this.listeners_={},s(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let t=0;t<r.length;t++)if(r[t].callback===e&&(!n||n===r[t].context))return void r.splice(t,1)}validateEventType_(t){s(this.allowedEvents_.find((e=>e===t)),"Unknown event: "+t)}}class ue extends ce{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||p()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ue}getInitialEvent(t){return s("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class le{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function he(){return new le("")}function de(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function fe(t){return t.pieces_.length-t.pieceNum_}function pe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function ge(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ve(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _e(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function me(t,e){const n=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);if(e instanceof le)for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new le(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function we(t,e){const n=de(t),r=de(e);if(null===n)return e;if(n===r)return we(pe(t),pe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function be(t,e){if(fe(t)!==fe(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ie(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(fe(t)>fe(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Ce{constructor(t,e){this.errorPrefix_=e,this.parts_=ve(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=D(this.parts_[t]);Se(this)}}function Se(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Te(t))}function Te(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class Ee extends ce{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}static getInstance(){return new Ee}getInitialEvent(t){return s("visible"===t,"Unknown event type: "+t),[this.visible_]}}const ke=1e3;class xe extends ae{constructor(t,e,n,r,i,s,o,a){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=xe.nextPersistentConnectionId_++,this.log_=St("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ke,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ee.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ue.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){const r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(b(i)),s(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(t){this.initConnection_();const e=new d,n={p:t._path.toString(),q:t._queryObject},r={action:"g",request:n,onComplete:t=>{const r=t.d;"ok"===t.s?(this.onDataUpdate_(n.p,r,!1,null),e.resolve(r)):e.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const t=this.outstandingGets_[i];void 0!==t&&r===t&&(delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+i+" timed out on connection"),e.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(i),e.promise}listen(t,e,n,r){this.initConnection_();const i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),s(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),s(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)}))}sendListen_(t){const e=t.query,n=e._path.toString(),r=e._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};t.tag&&(i.q=e._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;xe.warnOnListenWarnings_(s,e),(this.listens.get(n)&&this.listens.get(n).get(r))===t&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),t.onComplete&&t.onComplete(o,s))}))}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&C(t,"w")){const n=S(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();kt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){var e;(t&&40===t.length||"object"==typeof(e=I(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=function(t){var e=I(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(e=>{const n=e.s,r=e.d||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t.s,n=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)}))}unlisten(t,e){const n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),s(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)}sendUnlisten_(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);const i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,r){const i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(t=>{r&&setTimeout((()=>{r(t.s,t.d)}),Math.floor(0))}))}put(t,e,n,r){this.putInternal("p",t,e,n,r)}merge(t,e,n,r){this.putInternal("m",t,e,n,r)}putInternal(t,e,n,r,i){this.initConnection_();const s={p:e,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:t,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,(n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{if("ok"!==t.s){const e=t.d;this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+b(t));const e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Tt("Unrecognized action received from server: "+b(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){s(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ke,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ke,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ke),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+xe.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,n())},u=function(t){s(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)};this.realtime_={close:c,sendRequest:u};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?Ct("getToken() completed but was canceled"):(Ct("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=c&&c.token,a=new oe(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,(t=>{kt(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(t){this.log_("Failed to get token: "+t),o||(this.repoInfo_.nodeAdmin&&kt(t),c())}}}interrupt(t){Ct("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ct("Resuming connection for reason: "+t),delete this.interruptReasons_[t],T(this.interruptReasons_)&&(this.reconnectDelay_=ke,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map((t=>Mt(t))).join("$"):"default";const r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,e){const n=new le(t).toString();let r;if(this.listens.has(n)){const t=this.listens.get(n);r=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(t,e){Ct("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){Ct("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+ht.replace(/\./g,"-")]=1,p()?t["framework.cordova"]=1:g()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ue.getInstance().currentlyOnline();return T(this.interruptReasons_)&&t}}xe.nextPersistentConnectionId_=0,xe.nextConnectionId_=0;class Ne{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ne(t,e)}}class Re{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new Ne(Nt,t),r=new Ne(Nt,e);return 0!==this.compare(n,r)}minPost(){return Ne.MIN}}let Pe;class Oe extends Re{static get __EMPTY_NODE(){return Pe}static set __EMPTY_NODE(t){Pe=t}compare(t,e){return Pt(t.name,e.name)}isDefinedOn(t){throw o("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne(Rt,Pe)}makePost(t,e){return s("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ne(t,Pe)}toString(){return".key"}}const Ae=new Oe;class Me{constructor(t,e,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=e?n(t.key,e):1,r&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Le{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Le.RED,this.left=null!=r?r:De.EMPTY_NODE,this.right=null!=i?i:De.EMPTY_NODE}copy(t,e,n,r,i){return new Le(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return De.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return De.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Le.RED=!0,Le.BLACK=!1;class De{constructor(t,e=De.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new De(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Le.BLACK,null,null))}remove(t){return new De(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Le.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Me(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Me(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Me(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Me(this.root_,null,this.comparator_,!0,t)}}function Fe(t,e){return Pt(t.name,e.name)}function je(t,e){return Pt(t,e)}let Ue;De.EMPTY_NODE=new class{copy(t,e,n,r,i){return this}insert(t,e,n){return new Le(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const We=function(t){return"number"==typeof t?"number:"+Ft(t):"string:"+t},Ve=function(t){if(t.isLeafNode()){const e=t.val();s("string"==typeof e||"number"==typeof e||"object"==typeof e&&C(e,".sv"),"Priority must be a string or number.")}else s(t===Ue||t.isEmpty(),"priority of unexpected type.");s(t===Ue||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qe,He,ze;class $e{constructor(t,e=$e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,s(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ve(this.priorityNode_)}static set __childrenNodeConstructor(t){qe=t}static get __childrenNodeConstructor(){return qe}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new $e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:$e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ye(t)?this:".priority"===de(t)?this.priorityNode_:$e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:$e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const n=de(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(s(".priority"!==n||1===fe(t),".priority must be the last token in a path"),this.updateImmediateChild(n,$e.__childrenNodeConstructor.EMPTY_NODE.updateChild(pe(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+We(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?Ft(this.value_):this.value_,this.lazyHash_=yt(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===$e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof $e.__childrenNodeConstructor?-1:(s(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,n=typeof this.value_,r=$e.VALUE_TYPE_ORDER.indexOf(e),i=$e.VALUE_TYPE_ORDER.indexOf(n);return s(r>=0,"Unknown leaf type: "+e),s(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}$e.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Be=new class extends Re{compare(t,e){const n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Pt(t.name,e.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne(Rt,new $e("[PRIORITY-POST]",ze))}makePost(t,e){const n=He(t);return new Ne(e,new $e("[PRIORITY-POST]",n))}toString(){return".priority"}},Ge=Math.log(2);class Ke{constructor(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ge,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ye=function(t,e,n,r){t.sort(e);const i=function(e,r){const s=r-e;let o,a;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Le(a,o.node,Le.BLACK,null,null);{const c=parseInt(s/2,10)+e,u=i(e,c),l=i(c+1,r);return o=t[c],a=n?n(o):o,new Le(a,o.node,Le.BLACK,u,l)}},s=function(e){let r=null,s=null,o=t.length;const a=function(e,r){const s=o-e,a=o;o-=e;const u=i(s+1,a),l=t[s],h=n?n(l):l;c(new Le(h,l.node,r,null,u))},c=function(t){r?(r.left=t,r=t):(s=t,r=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),r=Math.pow(2,e.count-(t+1));n?a(r,Le.BLACK):(a(r,Le.BLACK),a(r,Le.RED))}return s}(new Ke(t.length));return new De(r||e,s)};let Je;const Qe={};class Xe{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return s(Qe&&Be,"ChildrenNode.ts has not been loaded"),Je=Je||new Xe({".priority":Qe},{".priority":Be}),Je}get(t){const e=S(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof De?e:null}hasIndex(t){return C(this.indexSet_,t.toString())}addIndex(t,e){s(t!==Ae,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=e.getIterator(Ne.Wrap);let o,a=i.getNext();for(;a;)r=r||t.isDefinedOn(a.node),n.push(a),a=i.getNext();o=r?Ye(n,t.getCompare()):Qe;const c=t.toString(),u=Object.assign({},this.indexSet_);u[c]=t;const l=Object.assign({},this.indexes_);return l[c]=o,new Xe(l,u)}addToIndexes(t,e){const n=E(this.indexes_,((n,r)=>{const i=S(this.indexSet_,r);if(s(i,"Missing index implementation for "+r),n===Qe){if(i.isDefinedOn(t.node)){const n=[],r=e.getIterator(Ne.Wrap);let s=r.getNext();for(;s;)s.name!==t.name&&n.push(s),s=r.getNext();return n.push(t),Ye(n,i.getCompare())}return Qe}{const r=e.get(t.name);let i=n;return r&&(i=i.remove(new Ne(t.name,r))),i.insert(t,t.node)}}));return new Xe(n,this.indexSet_)}removeFromIndexes(t,e){const n=E(this.indexes_,(n=>{if(n===Qe)return n;{const r=e.get(t.name);return r?n.remove(new Ne(t.name,r)):n}}));return new Xe(n,this.indexSet_)}}let Ze;class tn{constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ve(this.priorityNode_),this.children_.isEmpty()&&s(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ze||(Ze=new tn(new De(je),null,Xe.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ze}updatePriority(t){return this.children_.isEmpty()?this:new tn(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?Ze:e}}getChild(t){const e=de(t);return null===e?this:this.getImmediateChild(e).getChild(pe(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if(s(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const n=new Ne(t,e);let r,i;e.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Ze:this.priorityNode_;return new tn(r,s,i)}}updateChild(t,e){const n=de(t);if(null===n)return e;{s(".priority"!==de(t)||1===fe(t),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(pe(t),e);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let n=0,r=0,i=!0;if(this.forEachChild(Be,((s,o)=>{e[s]=o.val(t),n++,i&&tn.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!t&&i&&r<2*n){const t=[];for(const n in e)t[n]=e[n];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+We(this.getPriority().val())+":"),this.forEachChild(Be,((e,n)=>{const r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":yt(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Ne(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ne(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ne(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(t=>t));{const n=this.children_.getIteratorFrom(t.name,Ne.Wrap);let r=n.peek();for(;null!=r&&e.compare(r,t)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(t=>t));{const n=this.children_.getReverseIteratorFrom(t.name,Ne.Wrap);let r=n.peek();for(;null!=r&&e.compare(r,t)>0;)n.getNext(),r=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===en?-1:0}withIndex(t){if(t===Ae||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new tn(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Ae||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(Be),n=e.getIterator(Be);let r=t.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(t){return t===Ae?null:this.indexMap_.get(t.toString())}}tn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const en=new class extends tn{constructor(){super(new De(je),tn.EMPTY_NODE,Xe.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return tn.EMPTY_NODE}isEmpty(){return!1}};function nn(t,e=null){if(null===t)return tn.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),s(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new $e(t,nn(e));if(t instanceof Array){let n=tn.EMPTY_NODE;return Dt(t,((e,r)=>{if(C(t,e)&&"."!==e.substring(0,1)){const t=nn(r);!t.isLeafNode()&&t.isEmpty()||(n=n.updateImmediateChild(e,t))}})),n.updatePriority(nn(e))}{const n=[];let r=!1;if(Dt(t,((t,e)=>{if("."!==t.substring(0,1)){const i=nn(e);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Ne(t,i)))}})),0===n.length)return tn.EMPTY_NODE;const i=Ye(n,Fe,(t=>t.name),je);if(r){const t=Ye(n,Be.getCompare());return new tn(i,nn(e),new Xe({".priority":t},{".priority":Be}))}return new tn(i,nn(e),Xe.Default)}}Object.defineProperties(Ne,{MIN:{value:new Ne(Nt,tn.EMPTY_NODE)},MAX:{value:new Ne(Rt,en)}}),Oe.__EMPTY_NODE=tn.EMPTY_NODE,$e.__childrenNodeConstructor=tn,Ue=en,ze=en,function(t){He=t}(nn);class rn extends Re{constructor(t){super(),this.indexPath_=t,s(!ye(t)&&".priority"!==de(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Pt(t.name,e.name):i}makePost(t,e){const n=nn(t),r=tn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ne(e,r)}maxPost(){const t=tn.EMPTY_NODE.updateChild(this.indexPath_,en);return new Ne(Rt,t)}toString(){return ve(this.indexPath_,0).join("/")}}const sn=new class extends Re{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?Pt(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(t,e){const n=nn(t);return new Ne(e,n)}toString(){return".value"}};function on(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class an{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Be}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return s(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return s(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nt}hasEnd(){return this.endSet_}getIndexEndValue(){return s(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return s(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return s(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Be}copy(){const t=new an;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function cn(t){const e={};if(t.isDefault())return e;let n;return t.index_===Be?n="$priority":t.index_===sn?n="$value":t.index_===Ae?n="$key":(s(t.index_ instanceof rn,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=b(n),t.startSet_&&(e.startAt=b(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+b(t.indexStartName_))),t.endSet_&&(e.endAt=b(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+b(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function un(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Be&&(e.i=t.index_.toString()),e}class ln extends ae{constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=St("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:(s(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,r){const i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);const s=ln.getListenId_(t,n),o={};this.listens_[s]=o;const a=cn(t._queryParams);this.restRequest_(i+".json",a,((t,e)=>{let a=e;if(404===t&&(a=null,t=null),null===t&&this.onDataUpdate_(i,a,!1,n),S(this.listens_,s)===o){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",r(e,null)}}))}unlisten(t,e){const n=ln.getListenId_(t,e);delete this.listens_[n]}get(t){const e=cn(t._queryParams),n=t._path.toString(),r=new d;return this.restRequest_(n+".json",e,((t,e)=>{let i=e;404===t&&(i=null,t=null),null===t?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(e.auth=r.accessToken),i&&i.token&&(e.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+N(e);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=w(o.responseText)}catch(t){kt("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&kt("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class hn{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function dn(){return{value:null,children:new Map}}function fn(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=de(e);t.children.has(r)||t.children.set(r,dn()),fn(t.children.get(r),e=pe(e),n)}}function pn(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(((t,n)=>{e(n,t)}))}(t,((t,r)=>{pn(r,new le(e.toString()+"/"+t),n)}))}class gn{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Dt(this.last_,((t,n)=>{e[t]=e[t]-n})),this.last_=t,e}}class vn{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new gn(t);const n=1e4+2e4*Math.random();Vt(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;Dt(t,((t,r)=>{r>0&&C(this.statsToReport_,t)&&(e[t]=r,n=!0)})),n&&this.server_.reportStats(e),Vt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _n;function mn(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_n||(_n={}));class yn{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=_n.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(ye(this.path)){if(null!=this.affectedTree.value)return s(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new le(t));return new yn(he(),e,this.revert)}}return s(de(this.path)===t,"operationForChild called for unrelated child."),new yn(pe(this.path),this.affectedTree,this.revert)}}class wn{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=_n.OVERWRITE}operationForChild(t){return ye(this.path)?new wn(this.source,he(),this.snap.getImmediateChild(t)):new wn(this.source,pe(this.path),this.snap)}}class bn{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=_n.MERGE}operationForChild(t){if(ye(this.path)){const e=this.children.subtree(new le(t));return e.isEmpty()?null:e.value?new wn(this.source,he(),e.value):new bn(this.source,he(),e)}return s(de(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new bn(this.source,pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class In{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ye(t))return this.isFullyInitialized()&&!this.filtered_;const e=de(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function Cn(t,e,n,r,i,s){const a=r.filter((t=>t.type===n));a.sort(((e,n)=>function(t,e,n){if(null==e.childName||null==n.childName)throw o("Should only compare child_ events.");const r=new Ne(e.childName,e.snapshotNode),i=new Ne(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n))),a.forEach((n=>{const r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((i=>{i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Sn(t,e){return{eventCache:t,serverCache:e}}function Tn(t,e,n,r){return Sn(new In(e,n,r),t.serverCache)}function En(t,e,n,r){return Sn(t.eventCache,new In(e,n,r))}function kn(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Nn;class Rn{constructor(t,e=(()=>(Nn||(Nn=new De(Ot)),Nn))()){this.value=t,this.children=e}static fromObject(t){let e=new Rn(null);return Dt(t,((t,n)=>{e=e.set(new le(t),n)})),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:he(),value:this.value};if(ye(t))return null;{const n=de(t),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(pe(t),e);return null!=i?{path:me(new le(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(ye(t))return this;{const e=de(t),n=this.children.get(e);return null!==n?n.subtree(pe(t)):new Rn(null)}}set(t,e){if(ye(t))return new Rn(e,this.children);{const n=de(t),r=(this.children.get(n)||new Rn(null)).set(pe(t),e),i=this.children.insert(n,r);return new Rn(this.value,i)}}remove(t){if(ye(t))return this.children.isEmpty()?new Rn(null):new Rn(null,this.children);{const e=de(t),n=this.children.get(e);if(n){const r=n.remove(pe(t));let i;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?new Rn(null):new Rn(this.value,i)}return this}}get(t){if(ye(t))return this.value;{const e=de(t),n=this.children.get(e);return n?n.get(pe(t)):null}}setTree(t,e){if(ye(t))return e;{const n=de(t),r=(this.children.get(n)||new Rn(null)).setTree(pe(t),e);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Rn(this.value,i)}}fold(t){return this.fold_(he(),t)}fold_(t,e){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(me(t,r),e)})),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,he(),e)}findOnPath_(t,e,n){const r=!!this.value&&n(e,this.value);if(r)return r;if(ye(t))return null;{const r=de(t),i=this.children.get(r);return i?i.findOnPath_(pe(t),me(e,r),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,he(),e)}foreachOnPath_(t,e,n){if(ye(t))return this;{this.value&&n(e,this.value);const r=de(t),i=this.children.get(r);return i?i.foreachOnPath_(pe(t),me(e,r),n):new Rn(null)}}foreach(t){this.foreach_(he(),t)}foreach_(t,e){this.children.inorderTraversal(((n,r)=>{r.foreach_(me(t,n),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,n)=>{n.value&&t(e,n.value)}))}}class Pn{constructor(t){this.writeTree_=t}static empty(){return new Pn(new Rn(null))}}function On(t,e,n){if(ye(e))return new Pn(new Rn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=we(i,e);return s=s.updateChild(o,n),new Pn(t.writeTree_.set(i,s))}{const r=new Rn(n),i=t.writeTree_.setTree(e,r);return new Pn(i)}}}function An(t,e,n){let r=t;return Dt(n,((t,n)=>{r=On(r,me(e,t),n)})),r}function Mn(t,e){if(ye(e))return Pn.empty();{const n=t.writeTree_.setTree(e,new Rn(null));return new Pn(n)}}function Ln(t,e){return null!=Dn(t,e)}function Dn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(we(n.path,e)):null}function Fn(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Be,((t,n)=>{e.push(new Ne(t,n))})):t.writeTree_.children.inorderTraversal(((t,n)=>{null!=n.value&&e.push(new Ne(t,n.value))})),e}function jn(t,e){if(ye(e))return t;{const n=Dn(t,e);return new Pn(null!=n?new Rn(n):t.writeTree_.subtree(e))}}function Un(t){return t.writeTree_.isEmpty()}function Wn(t,e){return Vn(he(),t.writeTree_,e)}function Vn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal(((e,i)=>{".priority"===e?(s(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Vn(me(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(me(t,".priority"),r)),n}}function qn(t,e){return Zn(e,t)}function Hn(t,e){if(t.snap)return Ie(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ie(me(t.path,n),e))return!0;return!1}function zn(t){return t.visible}function $n(t,e,n){let r=Pn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const t=s.path;let e;if(s.snap)Ie(n,t)?(e=we(n,t),r=On(r,e,s.snap)):Ie(t,n)&&(e=we(t,n),r=On(r,he(),s.snap.getChild(e)));else{if(!s.children)throw o("WriteRecord should have .snap or .children");if(Ie(n,t))e=we(n,t),r=An(r,e,s.children);else if(Ie(t,n))if(e=we(t,n),ye(e))r=An(r,he(),s.children);else{const t=S(s.children,de(e));if(t){const n=t.getChild(pe(e));r=On(r,he(),n)}}}}}return r}function Bn(t,e,n,r,i){if(r||i){const s=jn(t.visibleWrites,e);if(!i&&Un(s))return n;if(i||null!=n||Ln(s,he())){const s=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ie(t.path,e)||Ie(e,t.path))};return Wn($n(t.allWrites,s,e),n||tn.EMPTY_NODE)}return null}{const r=Dn(t.visibleWrites,e);if(null!=r)return r;{const r=jn(t.visibleWrites,e);return Un(r)?n:null!=n||Ln(r,he())?Wn(r,n||tn.EMPTY_NODE):null}}}function Gn(t,e,n,r){return Bn(t.writeTree,t.treePath,e,n,r)}function Kn(t,e){return function(t,e,n){let r=tn.EMPTY_NODE;const i=Dn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Be,((t,e)=>{r=r.updateImmediateChild(t,e)})),r;if(n){const i=jn(t.visibleWrites,e);return n.forEachChild(Be,((t,e)=>{const n=Wn(jn(i,new le(t)),e);r=r.updateImmediateChild(t,n)})),Fn(i).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}return Fn(jn(t.visibleWrites,e)).forEach((t=>{r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Yn(t,e,n,r){return function(t,e,n,r,i){s(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=me(e,n);if(Ln(t.visibleWrites,o))return null;{const e=jn(t.visibleWrites,o);return Un(e)?i.getChild(n):Wn(e,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function Jn(t,e){return function(t,e){return Dn(t.visibleWrites,e)}(t.writeTree,me(t.treePath,e))}function Qn(t,e,n){return function(t,e,n,r){const i=me(e,n),s=Dn(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Wn(jn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Xn(t,e){return Zn(me(t.treePath,e),t.writeTree)}function Zn(t,e){return{treePath:t,writeTree:e}}class tr{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;s("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),s(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(n,on(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(n,(i=n,{type:"child_removed",snapshotNode:r.oldSnap,childName:i}));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(n,function(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw o("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,on(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t);var i}getChanges(){return Array.from(this.changeMap.values())}}const er=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class nr{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new In(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qn(this.writes_,t,e)}}getChildAfterChild(t,e,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xn(this.viewCache_),i=function(t,e,n,r,i,s){return function(t,e,n,r,i,s,o){let a;const c=jn(t.visibleWrites,e),u=Dn(c,he());if(null!=u)a=u;else{if(null==n)return[];a=Wn(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let c=n.getNext();for(;c&&t.length<i;)0!==e(c,r)&&t.push(c),c=n.getNext();return t}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]}}function rr(t,e,n,r,i,o){const a=e.eventCache;if(null!=Jn(r,n))return e;{let c,u;if(ye(n))if(s(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const n=xn(e),i=Kn(r,n instanceof tn?n:tn.EMPTY_NODE);c=t.filter.updateFullNode(e.eventCache.getNode(),i,o)}else{const n=Gn(r,xn(e));c=t.filter.updateFullNode(e.eventCache.getNode(),n,o)}else{const l=de(n);if(".priority"===l){s(1===fe(n),"Can't have a priority with additional path components");const i=a.getNode();u=e.serverCache.getNode();const o=Yn(r,n,i,u);c=null!=o?t.filter.updatePriority(i,o):a.getNode()}else{const s=pe(n);let h;if(a.isCompleteForChild(l)){u=e.serverCache.getNode();const t=Yn(r,n,a.getNode(),u);h=null!=t?a.getNode().getImmediateChild(l).updateChild(s,t):a.getNode().getImmediateChild(l)}else h=Qn(r,l,e.serverCache);c=null!=h?t.filter.updateChild(a.getNode(),l,h,s,i,o):a.getNode()}}return Tn(e,c,a.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function ir(t,e,n,r,i,s,o,a){const c=e.serverCache;let u;const l=o?t.filter:t.filter.getIndexedFilter();if(ye(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const t=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),t,null)}else{const t=de(n);if(!c.isCompleteForPath(n)&&fe(n)>1)return e;const i=pe(n),s=c.getNode().getImmediateChild(t).updateChild(i,r);u=".priority"===t?l.updatePriority(c.getNode(),s):l.updateChild(c.getNode(),t,s,i,er,null)}const h=En(e,u,c.isFullyInitialized()||ye(n),l.filtersNodes());return rr(t,h,n,i,new nr(i,h,s),a)}function sr(t,e,n,r,i,s,o){const a=e.eventCache;let c,u;const l=new nr(i,e,s);if(ye(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Tn(e,u,!0,t.filter.filtersNodes());else{const i=de(n);if(".priority"===i)u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Tn(e,u,a.isFullyInitialized(),a.isFiltered());else{const s=pe(n),u=a.getNode().getImmediateChild(i);let h;if(ye(s))h=r;else{const t=l.getCompleteChild(i);h=null!=t?".priority"===ge(s)&&t.getChild(_e(s)).isEmpty()?t:t.updateChild(s,r):tn.EMPTY_NODE}c=u.equals(h)?e:Tn(e,t.filter.updateChild(a.getNode(),i,h,s,l,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return c}function or(t,e){return t.eventCache.isCompleteForChild(e)}function ar(t,e,n){return n.foreach(((t,n)=>{e=e.updateChild(t,n)})),e}function cr(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=ye(n)?r:new Rn(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal(((n,r)=>{if(l.hasChild(n)){const c=ar(0,e.serverCache.getNode().getImmediateChild(n),r);u=ir(t,u,new le(n),c,i,s,o,a)}})),c.children.inorderTraversal(((n,r)=>{const c=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!c){const c=ar(0,e.serverCache.getNode().getImmediateChild(n),r);u=ir(t,u,new le(n),c,i,s,o,a)}})),u}function ur(t,e){const n=xn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(de(e)).isEmpty())?n.getChild(e):null}function lr(t,e,n,r){e.type===_n.MERGE&&null!==e.source.queryId&&(s(xn(t.viewCache_),"We should always have a full cache before handling merges"),s(kn(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,a=function(t,e,n,r,i){const a=new tr;let c,u;if(n.type===_n.OVERWRITE){const o=n;o.source.fromUser?c=sr(t,e,o.path,o.snap,r,i,a):(s(o.source.fromServer,"Unknown source."),u=o.source.tagged||e.serverCache.isFiltered()&&!ye(o.path),c=ir(t,e,o.path,o.snap,r,i,u,a))}else if(n.type===_n.MERGE){const o=n;o.source.fromUser?c=function(t,e,n,r,i,s,o){let a=e;return r.foreach(((r,c)=>{const u=me(n,r);or(e,de(u))&&(a=sr(t,a,u,c,i,s,o))})),r.foreach(((r,c)=>{const u=me(n,r);or(e,de(u))||(a=sr(t,a,u,c,i,s,o))})),a}(t,e,o.path,o.children,r,i,a):(s(o.source.fromServer,"Unknown source."),u=o.source.tagged||e.serverCache.isFiltered(),c=cr(t,e,o.path,o.children,r,i,u,a))}else if(n.type===_n.ACK_USER_WRITE){const o=n;c=o.revert?function(t,e,n,r,i,o){let a;if(null!=Jn(r,n))return e;{const c=new nr(r,e,i),u=e.eventCache.getNode();let l;if(ye(n)||".priority"===de(n)){let n;if(e.serverCache.isFullyInitialized())n=Gn(r,xn(e));else{const t=e.serverCache.getNode();s(t instanceof tn,"serverChildren would be complete if leaf node"),n=Kn(r,t)}n=n,l=t.filter.updateFullNode(u,n,o)}else{const i=de(n);let s=Qn(r,i,e.serverCache);null==s&&e.serverCache.isCompleteForChild(i)&&(s=u.getImmediateChild(i)),l=null!=s?t.filter.updateChild(u,i,s,pe(n),c,o):e.eventCache.getNode().hasChild(i)?t.filter.updateChild(u,i,tn.EMPTY_NODE,pe(n),c,o):u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Gn(r,xn(e)),a.isLeafNode()&&(l=t.filter.updateFullNode(l,a,o)))}return a=e.serverCache.isFullyInitialized()||null!=Jn(r,he()),Tn(e,l,a,t.filter.filtersNodes())}}(t,e,o.path,r,i,a):function(t,e,n,r,i,s,o){if(null!=Jn(i,n))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(ye(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ir(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ye(n)){let r=new Rn(null);return c.getNode().forEachChild(Ae,((t,e)=>{r=r.set(new le(t),e)})),cr(t,e,n,r,i,s,a,o)}return e}{let u=new Rn(null);return r.foreach(((t,e)=>{const r=me(n,t);c.isCompleteForPath(r)&&(u=u.set(t,c.getNode().getChild(r)))})),cr(t,e,n,u,i,s,a,o)}}(t,e,o.path,o.affectedTree,r,i,a)}else{if(n.type!==_n.LISTEN_COMPLETE)throw o("Unknown operation type: "+n.type);c=function(t,e,n,r,i){const s=e.serverCache;return rr(t,En(e,s.getNode(),s.isFullyInitialized()||ye(n),s.isFiltered()),n,r,er,i)}(t,e,n.path,r,a)}const l=a.getChanges();return function(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=kn(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push({type:"value",snapshotNode:kn(e)})}}(e,c,l),{viewCache:c,changes:l}}(t.processor_,i,e,n,r);var c,u;return c=t.processor_,u=a.viewCache,s(u.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),s(u.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed"),s(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,function(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){const i=[],s=[];return e.forEach((e=>{var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&s.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Cn(t,i,"child_removed",e,r,n),Cn(t,i,"child_added",e,r,n),Cn(t,i,"child_moved",s,r,n),Cn(t,i,"child_changed",e,r,n),Cn(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}(t,a.changes,a.viewCache.eventCache.getNode(),null)}let hr,dr;function fr(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return s(null!=o,"SyncTree gave us an op for an invalid query."),lr(o,e,n,r)}{let i=[];for(const s of t.views.values())i=i.concat(lr(s,e,n,r));return i}}function pr(t,e){let n=null;for(const r of t.views.values())n=n||ur(r,e);return n}class gr{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Rn(null),this.pendingWriteTree_={visibleWrites:Pn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vr(t,e,n,r,i){return function(t,e,n,r,i){s(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=On(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?wr(t,new wn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function _r(t,e,n=!1){const r=function(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){const n=t.allWrites.findIndex((t=>t.writeId===e));s(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,a=t.allWrites.length-1;for(;i&&a>=0;){const e=t.allWrites[a];e.visible&&(a>=n&&Hn(e,r.path)?i=!1:Ie(r.path,e.path)&&(o=!0)),a--}return!!i&&(o?(function(t){t.visibleWrites=$n(t.allWrites,zn,he()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0):(r.snap?t.visibleWrites=Mn(t.visibleWrites,r.path):Dt(r.children,(e=>{t.visibleWrites=Mn(t.visibleWrites,me(r.path,e))})),!0))}(t.pendingWriteTree_,e)){let e=new Rn(null);return null!=r.snap?e=e.set(he(),!0):Dt(r.children,(t=>{e=e.set(new le(t),!0)})),wr(t,new yn(r.path,e,n))}return[]}function mr(t,e,n){return wr(t,new wn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function yr(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,((t,n)=>{const r=pr(n,we(t,e));if(r)return r}));return Bn(r,e,i,n,!0)}function wr(t,e){return br(e,t.syncPointTree_,null,qn(t.pendingWriteTree_,he()))}function br(t,e,n,r){if(ye(t.path))return Ir(t,e,n,r);{const i=e.get(he());null==n&&null!=i&&(n=pr(i,he()));let s=[];const o=de(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const t=n?n.getImmediateChild(o):null,e=Xn(r,o);s=s.concat(br(a,c,t,e))}return i&&(s=s.concat(fr(i,t,r,n))),s}}function Ir(t,e,n,r){const i=e.get(he());null==n&&null!=i&&(n=pr(i,he()));let s=[];return e.children.inorderTraversal(((e,i)=>{const o=n?n.getImmediateChild(e):null,a=Xn(r,e),c=t.operationForChild(e);c&&(s=s.concat(Ir(c,i,o,a)))})),i&&(s=s.concat(fr(i,t,r,n))),s}function Cr(t,e){return t.tagToQueryMap.get(e)}function Sr(t){const e=t.indexOf("$");return s(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function Tr(t,e,n){const r=t.syncPointTree_.get(e);return s(r,"Missing sync point for query tag that we're tracking"),fr(r,n,qn(t.pendingWriteTree_,e),null)}class Er{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Er(e)}node(){return this.node_}}class kr{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=me(this.path_,t);return new kr(this.syncTree_,e)}node(){return yr(this.syncTree_,this.path_)}}const xr=function(t,e,n){return t&&"object"==typeof t?(s(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Nr(t[".sv"],e,n):"object"==typeof t[".sv"]?Rr(t[".sv"],e):void s(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Nr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:s(!1,"Unexpected server value: "+t)}},Rr=function(t,e,n){t.hasOwnProperty("increment")||s(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&s(!1,"Unexpected increment value: "+r);const i=e.node();if(s(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},Pr=function(t,e,n){return Or(t,new Er(e),n)};function Or(t,e,n){const r=t.getPriority().val(),i=xr(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const r=t,s=xr(r.getValue(),e,n);return s!==r.getValue()||i!==r.getPriority().val()?new $e(s,nn(i)):t}{const r=t;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new $e(i))),r.forEachChild(Be,((t,r)=>{const i=Or(r,e.getImmediateChild(t),n);i!==r&&(s=s.updateImmediateChild(t,i))})),s}}class Ar{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function Mr(t,e){let n=e instanceof le?e:new le(e),r=t,i=de(n);for(;null!==i;){const t=S(r.node.children,i)||{children:{},childCount:0};r=new Ar(i,r,t),n=pe(n),i=de(n)}return r}function Lr(t){return t.node.value}function Dr(t,e){t.node.value=e,Vr(t)}function Fr(t){return t.node.childCount>0}function jr(t,e){Dt(t.node.children,((n,r)=>{e(new Ar(n,t,r))}))}function Ur(t,e,n,r){n&&!r&&e(t),jr(t,(t=>{Ur(t,e,!0,r)})),n&&r&&e(t)}function Wr(t){return new le(null===t.parent?t.name:Wr(t.parent)+"/"+t.name)}function Vr(t){null!==t.parent&&function(t,e,n){const r=function(t){return void 0===Lr(t)&&!Fr(t)}(n),i=C(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Vr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Vr(t))}(t.parent,t.name,t)}const qr=/[\[\].#$\/\u0000-\u001F\u007F]/,Hr=/[\[\].#$\u0000-\u001F\u007F]/,zr=10485760,$r=function(t){return"string"==typeof t&&0!==t.length&&!qr.test(t)},Br=function(t){return"string"==typeof t&&0!==t.length&&!Hr.test(t)},Gr=function(t,e,n){const r=n instanceof le?new Ce(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Te(r));if("function"==typeof e)throw new Error(t+"contains a function "+Te(r)+" with contents = "+e.toString());if(xt(e))throw new Error(t+"contains "+e.toString()+" "+Te(r));if("string"==typeof e&&e.length>zr/3&&D(e)>zr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Te(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,i=!1;if(Dt(e,((e,s)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(i=!0,!$r(e)))throw new Error(t+" contains an invalid key ("+e+") "+Te(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=D(e),Se(t)}(r,e),Gr(t,s,r),function(t){const e=t.parts_.pop();t.byteLength_-=D(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),n&&i)throw new Error(t+' contains ".value" child '+Te(r)+" in addition to actual children.")}},Kr=function(t,e,n,r){if(!(r&&void 0===n||Br(n)))throw new Error(L(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class Yr{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jr(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null===n||be(s,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Qr(t,e,n){Jr(t,n),function(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(Xr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,(t=>Ie(t,e)||Ie(e,t)))}function Xr(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();bt&&Ct("event: "+n.toString()),Wt(r)}}}class Zr{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Yr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dn(),this.transactionQueueTree_=new Ar,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ti(t,e,n){if(t.stats_=Zt(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ln(t.repoInfo_,((e,n,r,i)=>{ri(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>ii(t,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{b(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new xe(t.repoInfo_,e,((e,n,r,i)=>{ri(t,e,n,r,i)}),(e=>{ii(t,e)}),(e=>{!function(t,e){Dt(e,((e,n)=>{si(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(e,n){const r=e.toString();return Xt[r]||(Xt[r]=new vn(t.stats_,t.server_)),Xt[r]}(t.repoInfo_),t.infoData_=new hn,t.infoSyncTree_=new gr({startListening:(e,n,r,i)=>{let s=[];const o=t.infoData_.getNode(e._path);return o.isEmpty()||(s=mr(t.infoSyncTree_,e._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),si(t,"connected",!1),t.serverSyncTree_=new gr({startListening:(e,n,r,i)=>(t.server_.listen(e,r,n,((n,r)=>{const s=i(n,r);Qr(t.eventQueue_,e._path,s)})),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function ei(t){const e=t.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ni(t){return(e=(e={timestamp:ei(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ri(t,e,n,r,i){t.dataUpdateCount++;const s=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const e=E(n,(t=>nn(t)));o=function(t,e,n,r){const i=Cr(t,r);if(i){const r=Sr(i),s=r.path,o=r.queryId,a=we(s,e),c=Rn.fromObject(n);return Tr(t,s,new bn(mn(o),a,c))}return[]}(t.serverSyncTree_,s,e,i)}else{const e=nn(n);o=function(t,e,n,r){const i=Cr(t,r);if(null!=i){const r=Sr(i),s=r.path,o=r.queryId,a=we(s,e);return Tr(t,s,new wn(mn(o),a,n))}return[]}(t.serverSyncTree_,s,e,i)}else if(r){const e=E(n,(t=>nn(t)));o=function(t,e,n){const r=Rn.fromObject(n);return wr(t,new bn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,e)}else{const e=nn(n);o=mr(t.serverSyncTree_,s,e)}let a=s;o.length>0&&(a=hi(t,s)),Qr(t.eventQueue_,a,o)}function ii(t,e){si(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");const e=ni(t),n=dn();pn(t.onDisconnect_,he(),((r,i)=>{const s=function(t,e,n,r){return Or(e,new kr(n,t),r)}(r,i,t.serverSyncTree_,e);fn(n,r,s)}));let r=[];pn(n,he(),((e,n)=>{r=r.concat(mr(t.serverSyncTree_,e,n));const i=vi(t,e);hi(t,i)})),t.onDisconnect_=dn(),Qr(t.eventQueue_,he(),r)}(t)}function si(t,e,n){const r=new le("/.info/"+e),i=nn(n);t.infoData_.updateSnapshot(r,i);const s=mr(t.infoSyncTree_,r,i);Qr(t.eventQueue_,r,s)}function oi(t){return t.nextWriteId_++}function ai(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});const s=ni(t),o=nn(n,r),a=yr(t.serverSyncTree_,e),c=Pr(o,a,s),u=oi(t),l=vr(t.serverSyncTree_,e,c,u,!0);Jr(t.eventQueue_,l),t.server_.put(e.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||kt("set at "+e+" failed: "+n);const o=_r(t.serverSyncTree_,u,!s);Qr(t.eventQueue_,e,o),function(t,e,n,r){e&&Wt((()=>{if("ok"===n)e(null);else{const t=(n||"error").toUpperCase();let i=t;r&&(i+=": "+r);const s=new Error(i);s.code=t,e(s)}}))}(0,i,n,r)}));const h=vi(t,e);hi(t,h),Qr(t.eventQueue_,h,[])}function ci(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ct(n,...e)}function ui(t,e,n){return yr(t.serverSyncTree_,e,n)||tn.EMPTY_NODE}function li(t,e=t.transactionQueueTree_){if(e||gi(t,e),Lr(e)){const n=fi(t,e);s(n.length>0,"Sending zero length transaction queue"),n.every((t=>0===t.status))&&function(t,e,n){const r=n.map((t=>t.currentWriteId)),i=ui(t,e,r);let o=i;const a=i.hash();for(let t=0;t<n.length;t++){const r=n[t];s(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;const i=we(e,r.path);o=o.updateChild(i,r.currentOutputSnapshotRaw)}const c=o.val(!0),u=e;t.server_.put(u.toString(),c,(r=>{ci(t,"transaction put response",{path:u.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let e=0;e<n.length;e++)n[e].status=2,i=i.concat(_r(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&r.push((()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved))),n[e].unwatcher();gi(t,Mr(t.transactionQueueTree_,e)),li(t,t.transactionQueueTree_),Qr(t.eventQueue_,e,i);for(let t=0;t<r.length;t++)Wt(r[t])}else{if("datastale"===r)for(let t=0;t<n.length;t++)3===n[t].status?n[t].status=4:n[t].status=0;else{kt("transaction at "+u.toString()+" failed: "+r);for(let t=0;t<n.length;t++)n[t].status=4,n[t].abortReason=r}hi(t,e)}}),a)}(t,Wr(e),n)}else Fr(e)&&jr(e,(e=>{li(t,e)}))}function hi(t,e){const n=di(t,e),r=Wr(n);return function(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter((t=>0===t.status)).map((t=>t.currentWriteId));for(let c=0;c<e.length;c++){const u=e[c],l=we(n,u.path);let h,d=!1;if(s(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)d=!0,h=u.abortReason,i=i.concat(_r(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)d=!0,h="maxretry",i=i.concat(_r(t.serverSyncTree_,u.currentWriteId,!0));else{const n=ui(t,u.path,o);u.currentInputSnapshot=n;const r=e[c].update(n.val());if(void 0!==r){Gr("transaction failed: Data returned ",r,u.path);let e=nn(r);"object"==typeof r&&null!=r&&C(r,".priority")||(e=e.updatePriority(n.getPriority()));const s=u.currentWriteId,a=ni(t),c=Pr(e,n,a);u.currentOutputSnapshotRaw=e,u.currentOutputSnapshotResolved=c,u.currentWriteId=oi(t),o.splice(o.indexOf(s),1),i=i.concat(vr(t.serverSyncTree_,u.path,c,u.currentWriteId,u.applyLocally)),i=i.concat(_r(t.serverSyncTree_,s,!0))}else d=!0,h="nodata",i=i.concat(_r(t.serverSyncTree_,u.currentWriteId,!0))}Qr(t.eventQueue_,n,i),i=[],d&&(e[c].status=2,a=e[c].unwatcher,setTimeout(a,Math.floor(0)),e[c].onComplete&&("nodata"===h?r.push((()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot))):r.push((()=>e[c].onComplete(new Error(h),!1,null)))))}var a;gi(t,t.transactionQueueTree_);for(let t=0;t<r.length;t++)Wt(r[t]);li(t,t.transactionQueueTree_)}(t,fi(t,n),r),r}function di(t,e){let n,r=t.transactionQueueTree_;for(n=de(e);null!==n&&void 0===Lr(r);)r=Mr(r,n),n=de(e=pe(e));return r}function fi(t,e){const n=[];return pi(t,e,n),n.sort(((t,e)=>t.order-e.order)),n}function pi(t,e,n){const r=Lr(e);if(r)for(let t=0;t<r.length;t++)n.push(r[t]);jr(e,(e=>{pi(t,e,n)}))}function gi(t,e){const n=Lr(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,Dr(e,n.length>0?n:void 0)}jr(e,(e=>{gi(t,e)}))}function vi(t,e){const n=Wr(di(t,e)),r=Mr(t.transactionQueueTree_,e);return function(t,e,n){let r=t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,(e=>{_i(t,e)})),_i(t,r),Ur(r,(e=>{_i(t,e)})),n}function _i(t,e){const n=Lr(e);if(n){const r=[];let i=[],o=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?(s(o===e-1,"All SENT items should be at beginning of queue."),o=e,n[e].status=3,n[e].abortReason="set"):(s(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),i=i.concat(_r(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&r.push(n[e].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Dr(e,void 0):n.length=o+1,Qr(t.eventQueue_,Wr(e),i);for(let t=0;t<r.length;t++)Wt(r[t])}}const mi=function(t,e){const n=yi(t),r=n.namespace;"firebase.com"===n.domain&&Et(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Et("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&kt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Kt(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new le(n.pathString)}},yi=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");-1===l&&(l=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){let e="";const n=t.split("/");for(let t=0;t<n.length;t++)if(n[t].length>0){let r=n[t];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}e+="/"+r}return e}(t.substring(l,h)));const d=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):kt(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o="https"===a||"wss"===a,c=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const t=e.indexOf(".");r=e.substring(0,t).toLowerCase(),n=e.substring(t+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class wi{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return ye(this._path)?null:ge(this._path)}get ref(){return new bi(this._repo,this._path)}get _queryIdentifier(){const t=un(this._queryParams),e=Mt(t);return"{}"===e?"default":e}get _queryObject(){return un(this._queryParams)}isEqual(t){if(!((t=F(t))instanceof wi))return!1;const e=this._repo===t._repo,n=be(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class bi extends wi{constructor(t,e){super(t,e,new an,!1)}get parent(){const t=_e(this._path);return null===t?null:new bi(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}function Ii(t,e){return(t=F(t))._checkNotDeleted("ref"),void 0!==e?function(t,e){var n,r,i,s;return null===de((t=F(t))._path)?(n="child",r="path",s=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Kr(n,r,i,s)):Kr("child","path",e,!1),new bi(t._repo,me(t._path,e))}(t._root,e):t._root}function Ci(t,e){(function(t,e){if(".info"===de(e))throw new Error(t+" failed = Can't modify data under /.info/")})("set",(t=F(t))._path),function(t,e,n,r){r&&void 0===e||Gr(L(t,"value"),e,n)}("set",e,t._path,!1);const n=new d;return ai(t._repo,t._path,e,null,n.wrapCallback((()=>{}))),n.promise}!function(t){s(!hr,"__referenceConstructor has already been defined"),hr=t}(bi),function(t){s(!dr,"__referenceConstructor has already been defined"),dr=t}(bi);const Si={};function Ti(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||Et("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ct("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o,a,c=mi(s,i),u=c.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${u.namespace}`,c=mi(s,i),u=c.repoInfo):o=!c.repoInfo.secure;const l=i&&o?new zt(zt.OWNER):new Ht(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!$r(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Br(t)}(n))throw new Error(L(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",c),ye(c.path)||Et("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(t,e,n,r){let i=Si[e.name];i||(i={},Si[e.name]=i);let s=i[t.toURLString()];return s&&Et("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Zr(t,false,n,r),i[t.toURLString()]=s,s}(u,t,l,new qt(t.name,n));return new Ei(h,t)}class Ei{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ti(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bi(this._repo,he())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){const n=Si[e];n&&n[t.key]===t||Et(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Et("Cannot call "+t+" on a deleted database.")}}xe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},xe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},ht="9.0.0",it(new U("database",((t,{instanceIdentifier:e})=>Ti(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e)),"PUBLIC").setMultipleInstances(!0)),lt("@firebase/database","0.12.0",void 0);const ki=new _("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xi=new J("@firebase/auth");function Ni(t,...e){xi.logLevel<=z.ERROR&&xi.error(`Auth (9.0.0): ${t}`,...e)}function Ri(t,...e){throw Oi(t,...e)}function Pi(t,...e){return Oi(t,...e)}function Oi(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ki.create(t,...e)}function Ai(t,e,...n){if(!t)throw Oi(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ni(e),new Error(e)}function Li(t,e){t||Mi(e)}const Di=new Map;function Fi(t){Li(t instanceof Function,"Expected a class definition");let e=Di.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Di.set(t,e),e)}function ji(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Ui(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Wi(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||!("http:"===Ui()||"https:"===Ui())&&("object"!=typeof(t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)||void 0===t.id)&&!("connection"in navigator)||navigator.onLine;var t}class Vi{constructor(t,e){this.shortDelay=t,this.longDelay=e,Li(e>t,"Short delay should be less than long delay!"),this.isMobile=p()||g()}get(){return Wi()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qi(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Hi{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},$i=new Vi(3e4,6e4);function Bi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gi(t,e,n,r,i={}){return Ki(t,i,(()=>{let i={},s={};r&&("GET"===e?s=r:i={body:JSON.stringify(r)});const o=N(Object.assign({key:t.config.apiKey},s)).slice(1),a=new(Hi.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&a.set("X-Firebase-Locale",t.languageCode),Hi.fetch()(Ji(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Ki(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zi),e);try{const e=new Qi(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Xi(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=(i.ok?s.errorMessage:s.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===e)throw Xi(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===e)throw Xi(t,"email-already-in-use",s);Ri(t,r[e]||e.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(e){if(e instanceof v)throw e;Ri(t,"network-request-failed")}}async function Yi(t,e,n,r,i={}){const s=await Gi(t,e,n,r,i);return"mfaPendingCredential"in s&&Ri(t,"multi-factor-auth-required",{serverResponse:s}),s}function Ji(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?qi(t.config,i):`${t.config.apiScheme}://${i}`}class Qi{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Pi(this.auth,"timeout"))),$i.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xi(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pi(t,e,r);return i.customData._tokenResponse=n,i}function Zi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function ts(t){return 1e3*Number(t)}function es(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Ni("JWT malformed, contained fewer than 3 sections"),null;try{const t=u(n);return t?JSON.parse(t):(Ni("Failed to decode base64 JWT payload"),null)}catch(t){return Ni("Caught error parsing JWT payload as JSON",t),null}}async function ns(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof v&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class rs{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class is{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zi(this.lastLoginAt),this.creationTime=Zi(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ss(t){var n;const r=t.auth,i=await t.getIdToken(),s=await ns(t,async function(t,e){return Gi(t,"POST","/v1/accounts:lookup",e)}(r,{idToken:i}));Ai(null==s?void 0:s.users.length,r,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const a=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((t=>{var{providerId:n}=t,r=e(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})):[],c=(u=t.providerData,l=a,[...u.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var u,l;const h=t.isAnonymous,d=!(t.email&&o.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new is(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)}class os{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ai(t.idToken,"internal-error"),Ai(void 0!==t.idToken,"internal-error"),Ai(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=es(t);return Ai(e,"internal-error"),Ai(void 0!==e.exp,"internal-error"),Ai(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Ai(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(t,e){const n=await Ki(t,{},(()=>{const n=N({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,s=Ji(t,r,"/v1/token",`key=${i}`);return Hi.fetch()(s,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,s=new os;return n&&(Ai("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),r&&(Ai("string"==typeof r,"internal-error",{appName:t}),s.accessToken=r),i&&(Ai("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new os,this.toJSON())}_performRefresh(){return Mi("not implemented")}}function as(t,e){Ai("string"==typeof t||void 0===t,"internal-error",{appName:e})}class cs{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=e(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new rs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new is(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await ns(this,this.stsTokenManager.getToken(this.auth,t));return Ai(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=F(t),r=await n.getIdToken(e),i=es(r);Ai(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zi(ts(i.auth_time)),issuedAtTime:Zi(ts(i.iat)),expirationTime:Zi(ts(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=F(t);await ss(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Ai(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new cs(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){Ai(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await ss(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await ns(this,async function(t,e){return Gi(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,s,o,a,c,u;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,v=null!==(c=e.createdAt)&&void 0!==c?c:void 0,_=null!==(u=e.lastLoginAt)&&void 0!==u?u:void 0,{uid:m,emailVerified:y,isAnonymous:w,providerData:b,stsTokenManager:I}=e;Ai(m&&I,t,"internal-error");const C=os.fromJSON(this.name,I);Ai("string"==typeof m,t,"internal-error"),as(l,t.name),as(h,t.name),Ai("boolean"==typeof y,t,"internal-error"),Ai("boolean"==typeof w,t,"internal-error"),as(d,t.name),as(f,t.name),as(p,t.name),as(g,t.name),as(v,t.name),as(_,t.name);const S=new cs({uid:m,auth:t,email:h,emailVerified:y,displayName:l,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:C,createdAt:v,lastLoginAt:_});return b&&Array.isArray(b)&&(S.providerData=b.map((t=>Object.assign({},t)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(t,e,n=!1){const r=new os;r.updateFromServerResponse(e);const i=new cs({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return await ss(i),i}}class us{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}us.type="NONE";const ls=us;function hs(t,e,n){return`firebase:${t}:${e}:${n}`}class ds{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=hs(this.userKey,r.apiKey,i),this.fullPersistenceKey=hs("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?cs._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new ds(Fi(ls),t,n);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=r[0]||Fi(ls);const s=hs(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const r=cs._fromJSON(t,e);n!==i&&(o=r),i=n;break}}catch(t){}const a=r.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(s)}catch(t){}}))),new ds(i,t,n)):new ds(i,t,n)}}function fs(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_s(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ps(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ys(e))return"Blackberry";if(ws(e))return"Webos";if(gs(e))return"Safari";if((e.includes("chrome/")||vs(e))&&!e.includes("edge/"))return"Chrome";if(ms(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ps(t=f()){return/firefox\//i.test(t)}function gs(t=f()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vs(t=f()){return/crios\//i.test(t)}function _s(t=f()){return/iemobile/i.test(t)}function ms(t=f()){return/android/i.test(t)}function ys(t=f()){return/blackberry/i.test(t)}function ws(t=f()){return/webos/i.test(t)}function bs(t=f()){return/iphone|ipad|ipod/i.test(t)}function Is(t=f()){return bs(t)||ms(t)||ws(t)||ys(t)||/windows phone/i.test(t)||_s(t)}function Cs(t,e=[]){let n;switch(t){case"Browser":n=fs(f());break;case"Worker":n=`${fs(f())}-${t}`;break;default:n=t}return`${n}/JsCore/9.0.0/${e.length?e.join(","):"FirebaseCore-web"}`}class Ss{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Es(this),this.idTokenSubscription=new Es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ki,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Fi(e)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await ds.create(this,t),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(e),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(t);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(Ai(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await ss(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?F(t):null;return e&&Ai(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&Ai(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Fi(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new _("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Fi(t)||this._popupRedirectResolver;Ai(e,this,"argument-error"),this.redirectPersistenceManager=await ds.create(this,[Fi(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Ai(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof e?t.addObserver(e,n,r):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ai(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Cs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ts(t){return F(t)}class Es{constructor(t){var e;this.auth=t,this.observer=null,this.addObserver=(e=new A((t=>this.observer=t),undefined)).subscribe.bind(e)}get next(){return Ai(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class ks{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Mi("not implemented")}_getIdTokenResponse(t){return Mi("not implemented")}_linkToIdToken(t,e){return Mi("not implemented")}_getReauthenticationResolver(t){return Mi("not implemented")}}class xs extends ks{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new xs(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new xs(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return Yi(t,"POST","/v1/accounts:signInWithPassword",Bi(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Yi(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))}(t,{email:this._email,oobCode:this._password});default:Ri(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return Gi(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Yi(t,"POST","/v1/accounts:signInWithEmailLink",Bi(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Ri(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Ns(t,e){return Yi(t,"POST","/v1/accounts:signInWithIdp",Bi(t,e))}class Rs extends ks{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Rs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ri("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n="string"==typeof t?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=e(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Rs(r,i);return Object.assign(o,s),o}_getIdTokenResponse(t){return Ns(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Ns(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ns(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=N(e)}return t}}const Ps={USER_NOT_FOUND:"user-not-found"};class Os extends ks{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Os({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Os({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Yi(t,"POST","/v1/accounts:signInWithPhoneNumber",Bi(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Yi(t,"POST","/v1/accounts:signInWithPhoneNumber",Bi(t,e));if(n.temporaryProof)throw Xi(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Yi(t,"POST","/v1/accounts:signInWithPhoneNumber",Bi(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ps)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new Os({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class As{constructor(t){var e,n,r,i,s,o;const a=R(P(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ai(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=R(P(t)).link,n=e?R(P(e)).deep_link_id:null,r=R(P(t)).deep_link_id;return(r?R(P(r)).link:null)||r||n||e||t}(t);try{return new As(e)}catch(t){return null}}}class Ms{constructor(){this.providerId=Ms.PROVIDER_ID}static credential(t,e){return xs._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=As.parseLink(e);return Ai(n,"argument-error"),xs._fromEmailAndCode(t,n.code,n.tenantId)}}Ms.PROVIDER_ID="password",Ms.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ms.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ls{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ds extends Ls{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Fs extends Ds{constructor(){super("facebook.com")}static credential(t){return Rs._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fs.credentialFromTaggedObject(t)}static credentialFromError(t){return Fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fs.credential(t.oauthAccessToken)}catch(t){return null}}}Fs.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fs.PROVIDER_ID="facebook.com";class js extends Ds{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Rs._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return js.credentialFromTaggedObject(t)}static credentialFromError(t){return js.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return js.credential(e,n)}catch(t){return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com",js.PROVIDER_ID="google.com";class Us extends Ds{constructor(){super("github.com")}static credential(t){return Rs._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Us.credentialFromTaggedObject(t)}static credentialFromError(t){return Us.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Us.credential(t.oauthAccessToken)}catch(t){return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com",Us.PROVIDER_ID="github.com";class Ws extends Ds{constructor(){super("twitter.com")}static credential(t,e){return Rs._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ws.credentialFromTaggedObject(t)}static credentialFromError(t){return Ws.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Ws.credential(e,n)}catch(t){return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com",Ws.PROVIDER_ID="twitter.com";class Vs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,r=!1){const i=await cs._fromIdTokenResponse(t,n,r),s=qs(n);return new Vs({user:i,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const r=qs(n);return new Vs({user:t,providerId:r,_tokenResponse:n,operationType:e})}}function qs(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Hs extends v{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Hs.prototype),this.appName=t.name,this.code=e.code,this.tenantId=null!==(i=t.tenantId)&&void 0!==i?i:void 0,this.serverResponse=e.customData.serverResponse}static _fromErrorAndOperation(t,e,n,r){return new Hs(t,e,n,r)}}function zs(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Hs._fromErrorAndOperation(t,n,e,r);throw n}))}new WeakMap;const $s="__sak";class Bs{constructor(t,e){this.storage=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem($s,"1"),this.storage.removeItem($s),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}}class Gs extends Bs{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=f();return gs(t)||bs(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Is(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(t.newValue!==r)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);var s;((s=f()).indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0)&&10===document.documentMode&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Gs.type="LOCAL";const Ks=Gs;class Ys extends Bs{constructor(){super(window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Ys.type="SESSION";const Js=Ys;class Qs{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Qs(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:r,data:i}=e.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async t=>t(e.origin,i))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Xs(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Qs.receivers=[];class Zs{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Xs("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function to(){return window}function eo(){return void 0!==to().WorkerGlobalScope&&"function"==typeof to().importScripts}const no="firebaseLocalStorageDb",ro="firebaseLocalStorage",io="fbase_key";class so{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function oo(t,e){return t.transaction([ro],e?"readwrite":"readonly").objectStore(ro)}function ao(){const t=indexedDB.open(no,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(ro,{keyPath:io})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(ro)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(no);return new so(t).toPromise()}(),e(await ao()))}))}))}async function co(t,e,n){const r=oo(t,!0).put({[io]:e,value:n});return new so(r).toPromise()}function uo(t,e){const n=oo(t,!0).delete(e);return new so(n).toPromise()}class lo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ao()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qs._getInstance(eo()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Zs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ao();return await co(t,$s,"1"),await uo(t,$s),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>co(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=oo(t,!1).get(e),r=await new so(n).toPromise();return void 0===r?null:r.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>uo(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=oo(t,!1).getAll();return new so(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:r,value:i}of t)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),e.push(r));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}lo.type="LOCAL";const ho=lo;function fo(t){return`__${t}${Math.floor(1e6*Math.random())}`}fo("rcb"),new Vi(3e4,6e4);class po{constructor(t){this.providerId=po.PROVIDER_ID,this.auth=Ts(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var r;const i=await n.verify();try{let s;if(Ai("string"==typeof i,t,"argument-error"),Ai("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s)return Ai("enroll"===e.type,t,"internal-error"),(await function(t,e){return Gi(t,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:t.tenantId},e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Ai("signin"===e.type,t,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return Ai(n,t,"missing-multi-factor-info"),(await function(t,e){return Gi(t,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:t.tenantId},e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Gi(t,"POST","/v1/accounts:sendVerificationCode",Bi(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}}(this.auth,t,F(e))}static credential(t,e){return Os._fromVerification(t,e)}static credentialFromResult(t){const e=t;return po.credentialFromTaggedObject(e)}static credentialFromError(t){return po.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Os._fromTokenResponse(e,n):null}}po.PROVIDER_ID="phone",po.PHONE_SIGN_IN_METHOD="phone";class go extends ks{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ns(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ns(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ns(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function vo(t){return async function(t,e,n=!1){const r="signIn",i=await zs(t,r,e),s=await Vs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}(t.auth,new go(t),t.bypassAuthState)}function _o(t){const{auth:e,user:n}=t;return Ai(n,e,"internal-error"),async function(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await ns(t,zs(r,i,e,t),n);Ai(s.idToken,r,"internal-error");const o=es(s.idToken);Ai(o,r,"internal-error");const{sub:a}=o;return Ai(t.uid===a,r,"user-mismatch"),Vs._forOperation(t,i,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Ri(r,"user-mismatch"),t}}(n,new go(t),t.bypassAuthState)}async function mo(t){const{auth:e,user:n}=t;return Ai(n,e,"internal-error"),async function(t,e,n=!1){const r=await ns(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vs._forOperation(t,"link",r)}(n,new go(t),t.bypassAuthState)}class yo{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vo;case"linkViaPopup":case"linkViaRedirect":return mo;case"reauthViaPopup":case"reauthViaRedirect":return _o;default:Ri(this.auth,"internal-error")}}resolve(t){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wo=new Vi(2e3,1e4);class bo extends yo{constructor(t,e,n,r,i){super(t,e,r,i),this.provider=n,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ai(t,this.auth,"internal-error"),t}async onExecution(){Li(1===this.filter.length,"Popup operations only handle one event");const t=Xs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Pi(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,wo.get())};t()}}bo.currentPopupAction=null;const Io=new Map;class Co extends yo{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Io.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return hs("pendingRedirect",t.config.apiKey,t.name)}(e),r="true"===await So(t)._get(n);return await So(t)._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Io.set(this.auth._key(),t)}return t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function So(t){return Fi(t._redirectPersistence)}async function To(t,e,n=!1){const r=Ts(t),i=function(t,e){return e?Fi(e):(Ai(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),s=new Co(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}class Eo{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xo(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!xo(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Pi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ko(t))}saveEventToCache(t){this.cachedEventUids.add(ko(t)),this.lastProcessedEventTime=Date.now()}}function ko(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function xo({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const No=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ro=/^https?/;function Po(t){const e=ji(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ro.test(n))return!1;if(No.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Oo=new Vi(3e4,6e4);function Ao(){const t=to().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let Mo=null;function Lo(t){return Mo=Mo||function(t){return new Promise(((e,n)=>{var r,i,s,o;function a(){Ao(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ao(),n(Pi(t,"network-request-failed"))},timeout:Oo.get()})}if(null===(i=null===(r=to().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=to().gapi)||void 0===s?void 0:s.load)){const e=fo("iframefcb");return to()[e]=()=>{gapi.load?a():n(Pi(t,"network-request-failed"))},o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise(((t,e)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=t,n.onerror=t=>{const n=Pi("internal-error");n.customData=t,e(n)},n.type="text/javascript",n.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(n)}))}a()}})).catch((t=>{throw Mo=null,t}))}(t),Mo}const Do=new Vi(5e3,15e3),Fo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},jo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uo(t){const e=t.config;Ai(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qi(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:ct},i=jo.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${N(r).slice(1)}`}const Wo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vo{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function qo(t,e,n,r,i,s){Ai(t.config.authDomain,t,"auth-domain-config-required"),Ai(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ct,eventId:i};if(e instanceof Ls){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",T(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof Ds){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];return`${function({config:t}){return t.emulator?qi(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${N(a).slice(1)}`}const Ho="webStorageSupport",zo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Js,this._completeRedirectFn=To}async _openPopup(t,e,n,r){var i;return Li(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Wo),{width:r.toString(),height:i.toString(),top:s,left:o}),u=f().toLowerCase();n&&(a=vs(u)?"_blank":n),ps(u)&&(e=e||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=f()){var e;return bs(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new Vo(null);const h=window.open(e||"",a,l);Ai(h,t,"popup-blocked");try{h.focus()}catch(t){}return new Vo(h)}(t,qo(t,e,n,ji(),r),Xs())}async _openRedirect(t,e,n,r){var i;return await this._originValidation(t),i=qo(t,e,n,ji(),r),to().location.href=i,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Li(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n}async initAndGetManager(t){const e=await async function(t){const e=await Lo(t),n=to().gapi;return Ai(n,t,"internal-error"),e.open({where:document.body,url:Uo(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fo,dontclear:!0},(e=>new Promise((async(n,r)=>{await e.restyle({setHideOnLeave:!1});const i=Pi(t,"network-request-failed"),s=to().setTimeout((()=>{r(i)}),Do.get());function o(){to().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{r(i)}))}))))}(t),n=new Eo(t);return e.register("authEvent",(e=>(Ai(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ho,{type:Ho},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&e(!!i),Ri(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Gi(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(Po(t))return}catch(t){}Ri(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Is()||gs()||bs()}};var $o;class Bo{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ai(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}$o="Browser",it(new U("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(t=>{Ai(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),Ai(!(null==i?void 0:i.includes(":")),"argument-error",{appName:t.name});const n={apiKey:r,authDomain:i,clientPlatform:$o,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cs($o)},s=new Ss(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fi);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(s,e),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),it(new U("auth-internal",(t=>{return e=Ts(t.getProvider("auth").getImmediate()),new Bo(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),lt("@firebase/auth","0.17.0",void 0);const Go="ADD_TO_PLAYLIST",Ko="CREATE_PLAYLIST";const Yo=t=>`on${t.slice(0,1).toUpperCase()}${t.slice(1)}`,Jo=(t,e=document)=>e.querySelector(t),Qo=(t,e)=>{document.body.insertAdjacentHTML("beforeend",'<div class="overlay"></div>'+t);const n=()=>{document.onclick=null,Jo(e).remove(),Jo(".overlay").remove()};return document.onclick=t=>{"overlay"===t.target.className&&n()},new Promise(((t,e)=>t(n)))},Xo=t=>`${String(t/60).split(".")[0]}:${String((t%60).toFixed()).padStart(2,"0")}`;var Zo=class extends class{constructor(t){this.listeners=t||[]}initDOMListeners(){this.listeners.forEach((t=>{const e=Yo(t);this.$root.addEventListener(t,this[e].bind(this))}))}removeDOMListeners(){this.listeners.forEach((t=>{const e=Yo(t);this.$root.removeEventListener(t,this[e].bind(this))}))}}{constructor({name:t,emmiter:e,store:n,listeners:r}){super(r),this.name=t,this.emmiter=e,this.store=n}get getHTML(){return""}init(){this.$root=document.querySelector(`.${this.name}`),this.initDOMListeners()}destroy(){this.removeDOMListeners()}subscribe(t,e){this.emmiter.subscribe(t,e)}unsubscribe(t){this.emmiter.unsubscribe(t)}emmit(t,...e){this.emmiter.emmit(t,e)}dispatch(t){this.store.dispatch(t)}observe(t,e){this.store.observe(t,e)}get getState(){return this.store.getState}},ta=class extends Zo{constructor(t,e){super({name:"search-form",emmiter:t,store:e,listeners:["submit"]})}get getHTML(){return' \n    <form class="search-form">\n        \n  <input class="search-form__input" type="text">\n  <button class="search-form__button">\n     <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M7 14C8.763 14 10.37 13.34 11.603 12.261L12.94 15.061C12.94 15.061 13.215 15.285 13.593 15.657C13.98 16.02 14.489 16.511 14.977 17.024L16.335 18.416L16.939 19.062L19.06 16.941L18.414 16.337L17.022 14.979C16.5536 14.5304 16.0978 14.0689 15.655 13.595C15.283 13.217 15.059 12.942 15.059 12.942L12.259 11.605C13.3804 10.333 13.9994 8.69572 14 7C14 3.141 10.859 0 7 0C3.141 0 0 3.141 0 7C0 10.859 3.141 14 7 14Z" />\n      </svg>\n  </button>\n     </form>'}init(){super.init()}update(t){this.$root.innerHTML='\n  <input class="search-form__input" type="text">\n  <button class="search-form__button">\n     <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M7 14C8.763 14 10.37 13.34 11.603 12.261L12.94 15.061C12.94 15.061 13.215 15.285 13.593 15.657C13.98 16.02 14.489 16.511 14.977 17.024L16.335 18.416L16.939 19.062L19.06 16.941L18.414 16.337L17.022 14.979C16.5536 14.5304 16.0978 14.0689 15.655 13.595C15.283 13.217 15.059 12.942 15.059 12.942L12.259 11.605C13.3804 10.333 13.9994 8.69572 14 7C14 3.141 10.859 0 7 0C3.141 0 0 3.141 0 7C0 10.859 3.141 14 7 14Z" />\n      </svg>\n  </button>'}onSubmit(t){t.preventDefault();const e=t.srcElement[1],n=t.srcElement[0];e.disabled=!0,(t=>{const e=t.split(",")[1]||5;return fetch(`https://youtube.googleapis.com/youtube/v3/search?&key=AIzaSyC-JXJtNzaLbGtm7M-9ftbXt6ah6Cqt12U&part=snippet&maxResults=${e}&q="${t}'`).then((t=>t.json())).then((t=>t))})(n.value).then((t=>{const r=t.items.map((t=>({id:t.id.videoId,name:t.snippet.title,channel:t.snippet.channelTitle,img:t.snippet.thumbnails.default.url})));this.emmit("search::result","ResultItem",r),e.disabled=!1,n.value=""}))}};const ea=(t,e)=>`  \n <div class="music-card__content">\n          <img class="music-card__img" src="${e.img}" alt="">\n          <div class="music-card__box">\n            <h4 class="music-card__caption">${e.name}</h4>\n            <p class="music-card__author">${e.channel}</p>  \n          </div>\n  </div>\n  <button class="result-item__button">\n          <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n              d="M7 0C5.15042 0.0223147 3.38287 0.766977 2.07493 2.07493C0.766977 3.38287 0.0223147 5.15042 0 7C0.0223147 8.84958 0.766977 10.6171 2.07493 11.9251C3.38287 13.233 5.15042 13.9777 7 14C8.84958 13.9777 10.6171 13.233 11.9251 11.9251C13.233 10.6171 13.9777 8.84958 14 7C13.9777 5.15042 13.233 3.38287 11.9251 2.07493C10.6171 0.766977 8.84958 0.0223147 7 0ZM11 7.5H7.5V11H6.5V7.5H3V6.5H6.5V3H7.5V6.5H11V7.5Z"\n              fill="white" />\n          </svg>\n  </button>`;var na=class extends Zo{constructor({emmiter:t,store:e},n){super({name:`result-item-${n.id}`,emmiter:t,store:e,listeners:["click"]}),this.data=n,this.observe(Ko,this.update.bind(this)),this.observe(Go,this.update.bind(this))}get getHTML(){return`\n    <li class="music-card result-item ${this.name}" data-id="${this.data.id}">\n        ${ea(this.getState,this.data)}\n    </li>`}init(){super.init()}update(t){this.$root.innerHTML=ea(0,this.data)}openContextMenu(){const t=this.getState.playlists.map((t=>t.items.every((t=>t.id!==this.data.id))?`\n        <li class="context-menu-item"><button>${t.name}</button></li>`:"")),e=Qo(`\n      <ul class="active context-menu context-menu-${this.data.id}" style="${(()=>{const t=this.$root.getBoundingClientRect();return`top:${t.top+20}px; right:${t.left+20}px`})()}">\n             ${t.join("")}\n      </ul>`,`.context-menu-${this.data.id}`),n=Jo(`.context-menu-${this.data.id}`),r=t=>{t.preventDefault();const i=t.target;var s;this.dispatch((s={playlistName:i.textContent,item:{...this.data,playlist:i.textContent}},{type:Go,data:s})),e.then((t=>t())),n.removeEventListener("click",r.bind(this))};n.addEventListener("click",r.bind(this))}onClick(t){const e=t.target;e.closest(".result-item__button")?this.openContextMenu():e.closest(".context-menu-item")}destroy(){super.destroy()}};const ra=(t,e)=>`   <div class="music-card__content">\n    <img class="music-card__img" src="${e.img}" alt="">\n    <div class="music-card__box">\n      <h4 class="music-card__caption">${e.name}</h4>\n      <p class="music-card__author">${e.channel}</p>\n    </div>\n  </div>`;var ia=class extends Zo{constructor({emmiter:t,store:e},n){super({name:`playlist-item-${n.id}`,emmiter:t,store:e,listeners:["click"]}),this.data=n,this.subscribe("playlistItem::chose",this.changeActive.bind(this)),this.subscribe("player::next",this.changeActive.bind(this))}get getHTML(){return`\n    <li class="music-card playlist-item ${this.name}" data-id="${this.data.id}">\n           ${ra(this.getState,this.data)}\n    </li>`}init(){super.init()}update(t){this.$root.innerHTML=ra(0,this.data)}changeActive(t){t.id!==this.data.id?this.$root.classList.remove("current"):this.$root.classList.add("current")}onClick(t){t.target,this.emmit("playlistItem::chose",this.data)}destroy(){super.destroy(),this.unsubscribe("playlistItem::chose",this.changeActive.bind(this)),this.unsubscribe("player::next",this.changeActive.bind(this))}};const sa=(t,e,n=[])=>{let r="";const i=[];let s;switch(t||(r='<p class="message">Choose playlist or find something</p>'),t){case"ResultItem":s=na;break;case"PlaylistItem":s=ia}return n.forEach((t=>{const n=new s(e,t);r+=n.getHTML,i.push({init:n.init.bind(n),destroy:n.destroy.bind(n)})})),{html:r,inits:i}};var oa=class extends Zo{constructor(t,e){super({name:"music-cards",emmiter:t,store:e,listeners:[]}),this.subscribe("search::result",this.update.bind(this)),this.subscribe("playlist::chose",this.update.bind(this))}get getHTML(){const t=sa();return this.cardsInits=t.inits,`\n     <ul class="music-cards">\n        ${t.html}\n     </ul>`}init(){super.init(),this.cardsInits.forEach((({init:t})=>t()))}update(t,e){console.log(e),this.cardsInits.forEach((({destroy:t})=>t()));const n=sa(t,{emmiter:this.emmiter,store:this.store},e);this.$root.innerHTML=n.html,this.cardsInits=n.inits,this.cardsInits.forEach((({init:t})=>t()))}};const aa=t=>`\n  <div class="player__passed"></div>\n  <div class="player__content">\n    ${t?.img?`<img class="player__img" src="${t.img}" alt="">`:'<div class="img-placeholder"></div>'}\n    <div class="player__box">\n     ${t?.name?`<h4 class="player__caption">${t.name}</h4>`:'<div class="caption-placeholder"></div>'}\n     ${t?.channel?`<p class="player__author">${t.channel}</p>`:'<div class="author-placeholder"></div>'}\n    </div>\n    <div class="player__controller-box">\n         <div class="player__current-time">0:00</div>\n         <button class="player__button">\n            <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M3.49067 0.650327C3.13569 0.447558 2.73367 0.341611 2.32487 0.343094C1.91606 0.344577 1.51482 0.45344 1.16133 0.658779C0.807831 0.864118 0.514487 1.15873 0.310672 1.5131C0.106857 1.86748 -0.000276476 2.26919 5.35836e-07 2.67799V17.322C-0.000276476 17.7308 0.106857 18.1325 0.310672 18.4869C0.514487 18.8413 0.807831 19.1359 1.16133 19.3412C1.51482 19.5465 1.91606 19.6554 2.32487 19.6569C2.73367 19.6584 3.13569 19.5524 3.49067 19.3497L16.3053 12.0253C16.6622 11.8212 16.9588 11.5263 17.1651 11.1707C17.3714 10.815 17.48 10.4111 17.48 9.99999C17.48 9.58884 17.3714 9.18499 17.1651 8.82932C16.9588 8.47366 16.6622 8.17882 16.3053 7.97466L3.49067 0.650327Z" fill="white"/>\n            </svg>\n         </button>\n         <div class="player__full-time">0:00</div>\n    </div>\n  </div>\n`;var ca=class extends Zo{constructor(t,e){super({name:"player",emmiter:t,store:e,listeners:["click"]}),this.state="pause",this.playlist=null,this.prev=null,this.current=null,this.next=null,this.subscribe("playlistItem::chose",this.update.bind(this))}get getHTML(){return`\n    <div class="player">\n        ${aa()} \n    </div>\n    <div class="players__box" id="players__box"></div>`}init(){super.init(),this.player=new class{constructor(t){this.id=t,this.player}init(){this.player=new YT.Player(this.id,{height:"390",width:"640",videoId:"",playerVars:{playsinline:1,origin:"https://www.youtube.com"},events:{onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)}}),console.log(this.onPlayerReady)}play(){this.player.playVideo()}pause(){this.player.pauseVideo()}onPlayerStateChange(t){switch(t.data){case YT.PlayerState.PLAYING:this.onPlaying(t);break;case YT.PlayerState.ENDED:this.onEnded(t)}}on(t,e){this["on"+t]=e}set source(t){this.player.loadVideoById(t)}get duration(){return this.player.getDuration()}get currentTime(){return this.player.getCurrentTime()}}("players__box"),this.player.on("Playing",this.onPlay.bind(this)),this.player.on("Ended",this.playNext.bind(this)),this.player.on("PlayerReady",this.onPlayerReady.bind(this)),this.player.init()}update(t){this.$root.innerHTML=aa(t),this.playlist=this.getState.playlists.find((e=>e.name===t.playlist)),this.current=t,console.log(this.current,"update"),this.playlist.items.forEach(((t,e,n)=>{t.id===this.current.id&&(this.prev=0===e?n[n.length-1]:n[e-1],e===n.length-1?this.next=n[0]:this.next=n[e+1])})),this.$timer=Jo(".player__current-time",this.$root),this.$btn=Jo(".player__button",this.$root),this.$fulltime=Jo(".player__full-time",this.$root),this.$progress=Jo(".player__passed",this.$root),this.player.source=this.current.id,this.pause(),this.play()}pause(){clearInterval(this.interval),this.player.pause(),this.state="pause",this.$btn.innerHTML='<svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n     <path d="M3.49067 0.650327C3.13569 0.447558 2.73367 0.341611 2.32487 0.343094C1.91606 0.344577 1.51482 0.45344 1.16133 0.658779C0.807831 0.864118 0.514487 1.15873 0.310672 1.5131C0.106857 1.86748 -0.000276476 2.26919 5.35836e-07 2.67799V17.322C-0.000276476 17.7308 0.106857 18.1325 0.310672 18.4869C0.514487 18.8413 0.807831 19.1359 1.16133 19.3412C1.51482 19.5465 1.91606 19.6554 2.32487 19.6569C2.73367 19.6584 3.13569 19.5524 3.49067 19.3497L16.3053 12.0253C16.6622 11.8212 16.9588 11.5263 17.1651 11.1707C17.3714 10.815 17.48 10.4111 17.48 9.99999C17.48 9.58884 17.3714 9.18499 17.1651 8.82932C16.9588 8.47366 16.6622 8.17882 16.3053 7.97466L3.49067 0.650327Z" fill="white"/>\n     </svg>'}play(){this.player.play(),this.state="play",this.$btn.innerHTML='<svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M3.1875 0C4.03288 0 4.84363 0.335825 5.4414 0.933597C6.03918 1.53137 6.375 2.34212 6.375 3.1875V15.9375C6.375 16.7829\n    6.03918 17.5936 5.4414 18.1914C4.84363 18.7892 4.03288 19.125 3.1875 19.125C2.34212 19.125 1.53137 18.7892 0.933597 18.1914C0.335825 17.5936 1.7815e-08 16.7829 0 15.9375V3.1875C0 2.34212 0.335825 1.53137 0.933597 0.933597C1.53137 0.335825 2.34212 0 3.1875 0V0ZM13.8125 0C14.6579 0 15.4686 0.335825 16.0664 0.933597C16.6642 1.53137 17 2.34212 17 3.1875V15.9375C17 16.7829 16.6642 17.5936 16.0664 18.1914C15.4686 18.7892 14.6579 19.125 13.8125 19.125C12.9671 19.125 12.1564 18.7892 11.5586 18.1914C10.9608 17.5936 10.625 16.7829 10.625 15.9375V3.1875C10.625 2.34212 10.9608 1.53137 11.5586 0.933597C12.1564 0.335825 12.9671 0 13.8125 0Z" fill="white"/>\n    </svg>'}onPlayerReady(t){console.log(this.current,"Ready")}onPlay(t){const e=this.player.duration;this.$fulltime.textContent=Xo(e),this.interval=setInterval((()=>{const t=this.player.currentTime.toFixed(2);console.log(t),this.$timer.textContent=Xo(this.player.currentTime),this.$progress.style.width=100*t/e+"%"}),100)}playNext(){clearInterval(this.interval),this.update(this.next),this.emmit("player::next",this.current)}onClick(t){t.target.closest(".player__button")&&this.current&&("pause"===this.state?this.play():this.pause())}};const ua=t=>`\n        <div class="playlist__top">\n          <h2 class="playlist__title">Playlists</h2>\n          <button class="playlist__arrow"></button>\n        </div>\n        <ul class="playlist__list">\n            ${(t=t.map((t=>` \n    <li class="playlist__item">\n       <h4  class="playlist__item-caption">${t.name}</h4>\n    </li>`))).join("")}\n          <button class="playlist__item--add"></button>\n        </ul>\n`;var la=class extends Zo{constructor(t,e){super({name:"playlist",emmiter:t,store:e,listeners:["click"]}),this.isOpen=!1,this.observe(Go,this.update.bind(this)),this.observe(Ko,this.update.bind(this))}get getHTML(){return`\n    <div class="playlist">\n        ${ua(this.getState.playlists)}\n    </div>`}init(){super.init()}update(t){this.$root.innerHTML=ua(t.playlists)}addPlaylist(){const t=Qo('\n   <form class="playlist__form" action="POST">\n           <input class="playlist__input" placeholder="Enter name" type="text">\n           <button class="playlist__input-button"></button>\n    </form>',".playlist__form"),e=Jo(".playlist__input-button");this.getPlaylistName=n=>{n.preventDefault();const r=Jo(".playlist__input").value;this.dispatch({type:Ko,data:{name:r}}),t.then((t=>t())),e.removeEventListener("click",this.getPlaylistName.bind(this))},e.addEventListener("click",this.getPlaylistName.bind(this))}togglePlaylists(t){const e=Jo("#app");t.classList.toggle("active"),this.isOpen?(this.isOpen=!this.isOpen,e.style.transform="translateY(0)"):(this.isOpen=!this.isOpen,e.style.transform=`translateY(-${this.$root.clientHeight}px)`)}openPlaylist(t){const e=this.getState.playlists.filter((e=>e.name===t))[0];this.emmit("playlist::chose","PlaylistItem",e.items)}onClick(t){const e=t.target;e.classList.contains("playlist__arrow")&&this.togglePlaylists(e),e.classList.contains("playlist__item--add")&&this.addPlaylist(),e.classList.contains("playlist__item")&&this.openPlaylist(e.textContent.trim())}};let ha=document.createElement("script");ha.src="http://www.youtube.com/player_api";let da=document.getElementsByTagName("script")[0];da.parentNode.insertBefore(ha,da),window.onYouTubeIframeAPIReady=function(){new class{constructor(t,e){this.$root=document.querySelector(t),this.components=e}async init(){document.body.style.height=window.innerHeight+"px";const t=new class{constructor(){this.subscribers=[]}subscribe(t,e){this.subscribers.push({event:t,callback:e}),console.log(this.subscribers)}unsubscribe(t){this.subscribers=this.subscribers.filter((e=>e.event!==t))}emmit(t,e){this.subscribers.filter((e=>e.event===t)).forEach((t=>t.callback(...e)))}},e=await(new class{constructor(){this.processor=new class{constructor(){this.key="m-project",this.database,this.userId}async init(){!function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw ot.create("bad-app-name",{appName:String(r)});const i=et.get(r);if(i){if(k(t,i.options)&&k(n,i.config))return i;throw ot.create("duplicate-app",{appName:r})}const s=new q(r);for(const t of nt.values())s.addComponent(t);const o=new at(t,n,s);et.set(r,o)}({apiKey:"AIzaSyC-JXJtNzaLbGtm7M-9ftbXt6ah6Cqt12U",authDomain:"m-project-323906.firebaseapp.com",databaseURL:"https://m-project-323906-default-rtdb.europe-west1.firebasedatabase.app/"}),this.database=function(t=ut(),e){return st(t,"database").getImmediate({identifier:e})}(),localStorage.getItem(this.key)||(this.auth=new class{constructor(){this.name="auth",this.auth=function(t=ut()){const e=st(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=st(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(k(n.getOptions(),null!=e?e:{}))return t;Ri(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:zo,persistence:[ho,Ks,Js]})}(),this.email}get getHTML(){return'\n        <form class="auth" action="POST">\n          <div class="container auth__container">\n              <h2 class="auth__title">Sign Up</h2>\n              <input  class="auth__input" type="email" placeholder="Email">\n              <input  class="auth__input" type="password" placeholder="Password">\n              <button class="auth__button" type="submit">\n                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <path d="M3.49067 0.650327C3.13569 0.447558 2.73367 0.341611 2.32487 0.343094C1.91606 0.344577 1.51482 0.45344 1.16133 0.658779C0.807831 0.864118 0.514487 1.15873 0.310672 1.5131C0.106857 1.86748 -0.000276476 2.26919 5.35836e-07 2.67799V17.322C-0.000276476 17.7308 0.106857 18.1325 0.310672 18.4869C0.514487 18.8413 0.807831 19.1359 1.16133 19.3412C1.51482 19.5465 1.91606 19.6554 2.32487 19.6569C2.73367 19.6584 3.13569 19.5524 3.49067 19.3497L16.3053 12.0253C16.6622 11.8212 16.9588 11.5263 17.1651 11.1707C17.3714 10.815 17.48 10.4111 17.48 9.99999C17.48 9.58884 17.3714 9.18499 17.1651 8.82932C16.9588 8.47366 16.6622 8.17882 16.3053 7.97466L3.49067 0.650327Z"/>\n                  </svg>\n              </button>\n          </div>\n      </form>\n    '}init(){return document.body.insertAdjacentHTML("afterbegin",this.getHTML),new Promise(((t,e)=>{document.addEventListener("submit",this.signUp.bind(this,t))}))}destroy(){document.querySelector(`.${this.name}`).remove(),document.removeEventListener("submit",this.signUp.bind(this))}signUp(t,e){e.preventDefault(),this.email=e.srcElement[0].value,this.password=e.srcElement[1].value,async function(t,e,n){const r=Ts(t),i=await async function(t,e){return Yi(t,"POST","/v1/accounts:signUp",Bi(t,e))}(r,{returnSecureToken:!0,email:e,password:n}),s=await Vs._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}(this.auth,this.email,this.password).then((n=>{const r=n.user;this.uid=r.uid,t(e)})).catch((t=>{throw new Error(t.message,t.code)})),this.destroy()}},await this.auth.init(),this.userId=this.auth.uid,this.write({uid:this.userId,email:this.auth.email,playlists:[]})),this.userId=this.read().uid}write(t){Ci(Ii(this.database,`users/${this.userId}`),t),localStorage.setItem(this.key,JSON.stringify(t))}read(){return JSON.parse(localStorage.getItem(this.key))}},this.observers=[]}async init(){return await this.processor.init(),this}dispatch(t){const e=((t,{type:e,data:n})=>{let r,i;switch(e){case Go:const{playlistName:e,item:s}=n,o=t.playlists.filter((t=>t.name===e))[0];return console.log(o),o.items.push(s),{...t};case Ko:return i=t.playlists,r={name:n.name,items:[]},{...t,playlists:[...i,r]};default:return t}})(this.getState,t);this.observers.forEach((n=>{n.event===t.type&&n.update(e)})),this.processor.write(e),console.log(e)}observe(t,e){this.observers.push({event:t,update:e})}get getState(){return this.processor.read()}}).init();this.components=this.components.map((n=>{const r=new n(t,e);return this.$root.insertAdjacentHTML("beforeend",r.getHTML),r.init(),r}))}destroy(){this.$root.innerHTML="",this.components.map((t=>{t.destroy()}))}}("#app",[ta,oa,ca,la]).init(),console.log(1)}}()}();